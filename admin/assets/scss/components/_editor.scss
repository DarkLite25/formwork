@import '../vendor/codemirror';

.editor-toolbar {
    padding: $editor-toolbar-padding-v $editor-toolbar-padding-h;
    border: 1px solid $color-base-500;
    border-top-left-radius: $border-radius;
    border-top-right-radius: $border-radius;
    background-color: $color-base-800;
    font-size: 0;
}

.toolbar-button {
    margin-bottom: 0;
    padding: $editor-toolbar-button-padding;
    border: 0;
    background-color: $color-base-800;
    &:hover,
    &:focus {
        background-color: transparent;
        color: $color-accent-500;
    }
    &:focus {
        @include focusring;
    }
}

.editor-textarea {
    margin-bottom: $editor-textarea-margin-bottom;
    padding: $editor-textarea-padding-v $editor-textarea-padding-h;
    min-height: 15 * $font-size-m * $base-line-height + $editor-textarea-padding-v * 2;
    border: $input-border-width solid $color-base-500;
    border-radius: $input-border-radius;
    font-size: $font-size-m;
    font-family: $base-font-family;
    &:focus {
        box-shadow: none;
    }
}

.CodeMirror {
    margin-bottom: $editor-textarea-margin-bottom;
    padding: 0 $editor-textarea-padding-h;
    min-height: 15 * $font-size-m * $base-line-height + $editor-textarea-padding-v * 2;
    border: $input-border-width solid $color-base-500;
    border-radius: $input-border-radius;
    background: $color-base-900;
    color: $color-base-100;
    font-size: $font-size-m;
    font-family: $base-font-family;
}

.CodeMirror-lines {
    padding: $editor-textarea-padding-v 0;
}

.CodeMirror-lines pre {
    padding: 0 !important;
}

.editor-toolbar + .editor-textarea,
.editor-textarea + .CodeMirror {
    border-top-width: 0;
    border-top-left-radius: 0;
    border-top-right-radius: 0;
}

.editor-wrap {
    border-radius: $border-radius;
}

.editor-wrap.focused .editor-toolbar,
.editor-wrap.focused .CodeMirror {
    border-color: $color-accent-500;
}

.CodeMirror-cursor {
    border-left-color: $color-base-100;
}

.CodeMirror-vscrollbar,
.CodeMirror-hscrollbar,
.CodeMirror-scrollbar-filler {
    background-color: inherit;
}

.CodeMirror-selected {
    background: transparent;
}

.CodeMirror-focused .CodeMirror-selected {
    background: $selection-background-color;
}

.CodeMirror-line::selection,
.CodeMirror-line > span::selection,
.CodeMirror-line > span > span::selection {
    background: $selection-background-color;
}

.CodeMirror-line::-moz-selection,
.CodeMirror-line > span::-moz-selection,
.CodeMirror-line > span > span::-moz-selection {
    background: $selection-background-color;
}

.cm-formatting-code-block,
.cm-formatting-list {
    display: inline !important;
}

.cm-formatting,
.cm-image-alt-text,
.cm-url {
    display: none;
    .CodeMirror-activeline & {
        display: inline;
    }
}

.cm-s-formwork .cm-formatting {
    color: $color-base-300;
}

.cm-s-formwork .cm-header-1 {
    font-size: 1.75rem;
}

.cm-s-formwork .cm-header-2 {
    font-size: 1.5rem;
}

.cm-s-formwork .cm-header-3 {
    font-size: 1.25rem;
}

.cm-s-formwork .cm-comment {
    font-size: 0.875rem;
    font-family: $mono-font-family;
}

.cm-s-formwork .cm-comment.cm-header-1 {
    font-size: 1.75rem * 0.875;
}

.cm-s-formwork .cm-comment.cm-header-2 {
    font-size: 1.5rem * 0.875;
}

.cm-s-formwork .cm-comment.cm-header-3 {
    font-size: 1.25rem * 0.875;
}

.cm-s-formwork .cm-quote {
    color: $color-base-300;
}

.cm-s-formwork .cm-formatting-quote + .cm-quote::before {
    margin-right: 0.25rem;
    color: $color-base-300;
    content: ' ';
    @include icon('quote');
}

.cm-s-formwork .CodeMirror-activeline .cm-formatting-quote + .cm-quote::before {
    display: none;
}

.cm-s-formwork .cm-link {
    color: $color-accent-500;
    text-decoration: underline;
}

.cm-s-formwork .cm-url.cm-formatting,
.cm-s-formwork .cm-image-alt-text.cm-formatting,
.cm-s-formwork .cm-image-marker {
    color: $color-accent-500;
}

.cm-s-formwork .cm-url,
.cm-s-formwork .cm-image-alt-text {
    color: $color-base-300;
    text-decoration: none;
}

.cm-s-formwork .cm-image ~ .cm-url:not(.cm-formatting) {
    display: inline;
    padding: 0 0.25rem;
    border-radius: 3px;
    background-color: $color-base-700;
    color: $color-base-100;
    &::before {
        margin-right: 0.25rem;
        color: $color-base-300;
        content: ' ';
        @include icon('image');
    }
}

.cm-s-formwork .CodeMirror-activeline .cm-image ~ .cm-url:not(.cm-formatting) {
    padding: 0;
    background-color: transparent;
    color: $color-base-300;
    &::before {
        display: none;
    }
}

.cm-s-formwork .cm-hr {
    color: $color-base-300;
}

.cm-s-formwork .cm-tag {
    color: $color-green-400;
}

.cm-s-formwork .cm-bracket {
    color: $color-base-100;
}

.cm-s-formwork .cm-attribute {
    color: $color-purple-600;
}

.cm-s-formwork .cm-bracket,
.cm-s-formwork .cm-m-xml {
    font-size: 0.875rem;
    font-family: $mono-font-family;
}
