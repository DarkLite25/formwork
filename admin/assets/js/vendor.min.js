!function(e,t){"function"==typeof define&&define.amd?define("Chartist",[],function(){return e.Chartist=t()}):"object"==typeof module&&module.exports?module.exports=t():e.Chartist=t()}(this,function(){var e={version:"0.11.1"};return function(e,g){"use strict";var u=e.window,p=e.document;g.namespaces={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",ct:"http://gionkunz.github.com/chartist-js/ct"},g.noop=function(e){return e},g.alphaNumerate=function(e){return String.fromCharCode(97+e%26)},g.extend=function(e){var t,n,i;for(e=e||{},t=1;t<arguments.length;t++)for(var r in n=arguments[t])"object"!=typeof(i=n[r])||null===i||i instanceof Array?e[r]=i:e[r]=g.extend(e[r],i);return e},g.replaceAll=function(e,t,n){return e.replace(new RegExp(t,"g"),n)},g.ensureUnit=function(e,t){return"number"==typeof e&&(e+=t),e},g.quantity=function(e){if("string"!=typeof e)return{value:e};var t=/^(\d+)\s*(.*)$/g.exec(e);return{value:+t[1],unit:t[2]||void 0}},g.querySelector=function(e){return e instanceof Node?e:p.querySelector(e)},g.times=function(e){return Array.apply(null,new Array(e))},g.sum=function(e,t){return e+(t||0)},g.mapMultiply=function(t){return function(e){return e*t}},g.mapAdd=function(t){return function(e){return e+t}},g.serialMap=function(i,r){var o=[],e=Math.max.apply(null,i.map(function(e){return e.length}));return g.times(e).forEach(function(e,t){var n=i.map(function(e){return e[t]});o[t]=r.apply(null,n)}),o},g.roundWithPrecision=function(e,t){var n=Math.pow(10,t||g.precision);return Math.round(e*n)/n},g.precision=8,g.escapingMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"},g.serialize=function(e){return null==e?e:("number"==typeof e?e=""+e:"object"==typeof e&&(e=JSON.stringify({data:e})),Object.keys(g.escapingMap).reduce(function(e,t){return g.replaceAll(e,t,g.escapingMap[t])},e))},g.deserialize=function(e){if("string"!=typeof e)return e;e=Object.keys(g.escapingMap).reduce(function(e,t){return g.replaceAll(e,g.escapingMap[t],t)},e);try{e=void 0!==(e=JSON.parse(e)).data?e.data:e}catch(e){}return e},g.createSvg=function(t,e,n,i){var r;return e=e||"100%",n=n||"100%",Array.prototype.slice.call(t.querySelectorAll("svg")).filter(function(e){return e.getAttributeNS(g.namespaces.xmlns,"ct")}).forEach(function(e){t.removeChild(e)}),(r=new g.Svg("svg").attr({width:e,height:n}).addClass(i))._node.style.width=e,r._node.style.height=n,t.appendChild(r._node),r},g.normalizeData=function(e,t,n){var i,r={raw:e,normalized:{}};return r.normalized.series=g.getDataArray({series:e.series||[]},t,n),i=r.normalized.series.every(function(e){return e instanceof Array})?Math.max.apply(null,r.normalized.series.map(function(e){return e.length})):r.normalized.series.length,r.normalized.labels=(e.labels||[]).slice(),Array.prototype.push.apply(r.normalized.labels,g.times(Math.max(0,i-r.normalized.labels.length)).map(function(){return""})),t&&g.reverseData(r.normalized),r},g.safeHasProperty=function(e,t){return null!==e&&"object"==typeof e&&e.hasOwnProperty(t)},g.isDataHoleValue=function(e){return null==e||"number"==typeof e&&isNaN(e)},g.reverseData=function(e){e.labels.reverse(),e.series.reverse();for(var t=0;t<e.series.length;t++)"object"==typeof e.series[t]&&void 0!==e.series[t].data?e.series[t].data.reverse():e.series[t]instanceof Array&&e.series[t].reverse()},g.getDataArray=function(e,t,i){return e.series.map(function e(t){if(g.safeHasProperty(t,"value"))return e(t.value);if(g.safeHasProperty(t,"data"))return e(t.data);if(t instanceof Array)return t.map(e);if(!g.isDataHoleValue(t)){if(i){var n={};return"string"==typeof i?n[i]=g.getNumberOrUndefined(t):n.y=g.getNumberOrUndefined(t),n.x=t.hasOwnProperty("x")?g.getNumberOrUndefined(t.x):n.x,n.y=t.hasOwnProperty("y")?g.getNumberOrUndefined(t.y):n.y,n}return g.getNumberOrUndefined(t)}})},g.normalizePadding=function(e,t){return t=t||0,"number"==typeof e?{top:e,right:e,bottom:e,left:e}:{top:"number"==typeof e.top?e.top:t,right:"number"==typeof e.right?e.right:t,bottom:"number"==typeof e.bottom?e.bottom:t,left:"number"==typeof e.left?e.left:t}},g.getMetaData=function(e,t){var n=e.data?e.data[t]:e[t];return n?n.meta:void 0},g.orderOfMagnitude=function(e){return Math.floor(Math.log(Math.abs(e))/Math.LN10)},g.projectLength=function(e,t,n){return t/n.range*e},g.getAvailableHeight=function(e,t){return Math.max((g.quantity(t.height).value||e.height())-(t.chartPadding.top+t.chartPadding.bottom)-t.axisX.offset,0)},g.getHighLow=function(e,t,r){var o={high:void 0===(t=g.extend({},t,r?t["axis"+r.toUpperCase()]:{})).high?-Number.MAX_VALUE:+t.high,low:void 0===t.low?Number.MAX_VALUE:+t.low},s=void 0===t.high,a=void 0===t.low;return(s||a)&&function e(t){if(void 0!==t)if(t instanceof Array)for(var n=0;n<t.length;n++)e(t[n]);else{var i=r?+t[r]:+t;s&&i>o.high&&(o.high=i),a&&i<o.low&&(o.low=i)}}(e),!t.referenceValue&&0!==t.referenceValue||(o.high=Math.max(t.referenceValue,o.high),o.low=Math.min(t.referenceValue,o.low)),o.high<=o.low&&(0===o.low?o.high=1:o.low<0?o.high=0:(0<o.high||(o.high=1),o.low=0)),o},g.isNumeric=function(e){return null!==e&&isFinite(e)},g.isFalseyButZero=function(e){return!e&&0!==e},g.getNumberOrUndefined=function(e){return g.isNumeric(e)?+e:void 0},g.isMultiValue=function(e){return"object"==typeof e&&("x"in e||"y"in e)},g.getMultiValue=function(e,t){return g.isMultiValue(e)?g.getNumberOrUndefined(e[t||"y"]):g.getNumberOrUndefined(e)},g.rho=function(e){function n(e,t){return e%t==0?t:n(t,e%t)}function t(e){return e*e+1}if(1===e)return e;var i,r=2,o=2;if(e%2==0)return 2;for(;r=t(r)%e,o=t(t(o))%e,1===(i=n(Math.abs(r-o),e)););return i},g.getBounds=function(e,t,n,i){function r(e,t){return e===(e+=t)&&(e*=1+(0<t?d:-d)),e}var o,s,a,l=0,u={high:t.high,low:t.low};u.valueRange=u.high-u.low,u.oom=g.orderOfMagnitude(u.valueRange),u.step=Math.pow(10,u.oom),u.min=Math.floor(u.low/u.step)*u.step,u.max=Math.ceil(u.high/u.step)*u.step,u.range=u.max-u.min,u.numberOfSteps=Math.round(u.range/u.step);var c=g.projectLength(e,u.step,u)<n,h=i?g.rho(u.range):0;if(i&&g.projectLength(e,1,u)>=n)u.step=1;else if(i&&h<u.step&&g.projectLength(e,h,u)>=n)u.step=h;else for(;;){if(c&&g.projectLength(e,u.step,u)<=n)u.step*=2;else{if(c||!(g.projectLength(e,u.step/2,u)>=n))break;if(u.step/=2,i&&u.step%1!=0){u.step*=2;break}}if(1e3<l++)throw new Error("Exceeded maximum number of iterations while optimizing scale step!")}var d=2221e-19;for(u.step=Math.max(u.step,d),s=u.min,a=u.max;s+u.step<=u.low;)s=r(s,u.step);for(;a-u.step>=u.high;)a=r(a,-u.step);u.min=s,u.max=a,u.range=u.max-u.min;var f=[];for(o=u.min;o<=u.max;o=r(o,u.step)){var p=g.roundWithPrecision(o);p!==f[f.length-1]&&f.push(p)}return u.values=f,u},g.polarToCartesian=function(e,t,n,i){var r=(i-90)*Math.PI/180;return{x:e+n*Math.cos(r),y:t+n*Math.sin(r)}},g.createChartRect=function(e,t,n){var i=!(!t.axisX&&!t.axisY),r=i?t.axisY.offset:0,o=i?t.axisX.offset:0,s=e.width()||g.quantity(t.width).value||0,a=e.height()||g.quantity(t.height).value||0,l=g.normalizePadding(t.chartPadding,n);s=Math.max(s,r+l.left+l.right),a=Math.max(a,o+l.top+l.bottom);var u={padding:l,width:function(){return this.x2-this.x1},height:function(){return this.y1-this.y2}};return i?("start"===t.axisX.position?(u.y2=l.top+o,u.y1=Math.max(a-l.bottom,u.y2+1)):(u.y2=l.top,u.y1=Math.max(a-l.bottom-o,u.y2+1)),"start"===t.axisY.position?(u.x1=l.left+r,u.x2=Math.max(s-l.right,u.x1+1)):(u.x1=l.left,u.x2=Math.max(s-l.right-r,u.x1+1))):(u.x1=l.left,u.x2=Math.max(s-l.right,u.x1+1),u.y2=l.top,u.y1=Math.max(a-l.bottom,u.y2+1)),u},g.createGrid=function(e,t,n,i,r,o,s,a){var l={};l[n.units.pos+"1"]=e,l[n.units.pos+"2"]=e,l[n.counterUnits.pos+"1"]=i,l[n.counterUnits.pos+"2"]=i+r;var u=o.elem("line",l,s.join(" "));a.emit("draw",g.extend({type:"grid",axis:n,index:t,group:o,element:u},l))},g.createGridBackground=function(e,t,n,i){var r=e.elem("rect",{x:t.x1,y:t.y2,width:t.width(),height:t.height()},n,!0);i.emit("draw",{type:"gridBackground",group:e,element:r})},g.createLabel=function(e,t,n,i,r,o,s,a,l,u,c){var h,d={};if(d[r.units.pos]=e+s[r.units.pos],d[r.counterUnits.pos]=s[r.counterUnits.pos],d[r.units.len]=t,d[r.counterUnits.len]=Math.max(0,o-10),u){var f=p.createElement("span");f.className=l.join(" "),f.setAttribute("xmlns",g.namespaces.xhtml),f.innerText=i[n],f.style[r.units.len]=Math.round(d[r.units.len])+"px",f.style[r.counterUnits.len]=Math.round(d[r.counterUnits.len])+"px",h=a.foreignObject(f,g.extend({style:"overflow: visible;"},d))}else h=a.elem("text",d,l.join(" ")).text(i[n]);c.emit("draw",g.extend({type:"label",axis:r,index:n,group:a,element:h,text:i[n]},d))},g.getSeriesOption=function(e,t,n){if(e.name&&t.series&&t.series[e.name]){var i=t.series[e.name];return i.hasOwnProperty(n)?i[n]:t[n]}return t[n]},g.optionsProvider=function(e,n,i){function t(e){var t=r;if(r=g.extend({},s),n)for(o=0;o<n.length;o++){u.matchMedia(n[o][0]).matches&&(r=g.extend(r,n[o][1]))}i&&e&&i.emit("optionsChanged",{previousOptions:t,currentOptions:r})}var r,o,s=g.extend({},e),a=[];if(!u.matchMedia)throw"window.matchMedia not found! Make sure you're using a polyfill.";if(n)for(o=0;o<n.length;o++){var l=u.matchMedia(n[o][0]);l.addListener(t),a.push(l)}return t(),{removeMediaQueryListeners:function(){a.forEach(function(e){e.removeListener(t)})},getCurrentOptions:function(){return g.extend({},r)}}},g.splitIntoSegments=function(e,t,n){n=g.extend({},{increasingX:!1,fillHoles:!1},n);for(var i=[],r=!0,o=0;o<e.length;o+=2)void 0===g.getMultiValue(t[o/2].value)?n.fillHoles||(r=!0):(n.increasingX&&2<=o&&e[o]<=e[o-2]&&(r=!0),r&&(i.push({pathCoordinates:[],valueData:[]}),r=!1),i[i.length-1].pathCoordinates.push(e[o],e[o+1]),i[i.length-1].valueData.push(t[o/2]));return i}}(this,e),function(e,g){"use strict";g.Interpolation={},g.Interpolation.none=function(l){return l=g.extend({},{fillHoles:!1},l),function(e,t){for(var n=new g.Svg.Path,i=!0,r=0;r<e.length;r+=2){var o=e[r],s=e[r+1],a=t[r/2];void 0!==g.getMultiValue(a.value)?(i?n.move(o,s,!1,a):n.line(o,s,!1,a),i=!1):l.fillHoles||(i=!0)}return n}},g.Interpolation.simple=function(h){h=g.extend({},{divisor:2,fillHoles:!1},h);var d=1/Math.max(1,h.divisor);return function(e,t){for(var n,i,r,o=new g.Svg.Path,s=0;s<e.length;s+=2){var a=e[s],l=e[s+1],u=(a-n)*d,c=t[s/2];void 0!==c.value?(void 0===r?o.move(a,l,!1,c):o.curve(n+u,i,a-u,l,a,l,!1,c),n=a,i=l,r=c):h.fillHoles||(n=a=r=void 0)}return o}},g.Interpolation.cardinal=function(u){u=g.extend({},{tension:1,fillHoles:!1},u);var c=Math.min(1,Math.max(0,u.tension)),h=1-c;return function t(e,n){var i=g.splitIntoSegments(e,n,{fillHoles:u.fillHoles});if(i.length){if(1<i.length){var r=[];return i.forEach(function(e){r.push(t(e.pathCoordinates,e.valueData))}),g.Svg.Path.join(r)}if(e=i[0].pathCoordinates,n=i[0].valueData,e.length<=4)return g.Interpolation.none()(e,n);for(var o=(new g.Svg.Path).move(e[0],e[1],!1,n[0]),s=0,a=e.length;s<a-2;s+=2){var l=[{x:+e[s-2],y:+e[s-1]},{x:+e[s],y:+e[s+1]},{x:+e[s+2],y:+e[s+3]},{x:+e[s+4],y:+e[s+5]}];a-4===s?l[3]=l[2]:s||(l[0]={x:+e[s],y:+e[s+1]}),o.curve(c*(-l[0].x+6*l[1].x+l[2].x)/6+h*l[2].x,c*(-l[0].y+6*l[1].y+l[2].y)/6+h*l[2].y,c*(l[1].x+6*l[2].x-l[3].x)/6+h*l[2].x,c*(l[1].y+6*l[2].y-l[3].y)/6+h*l[2].y,l[2].x,l[2].y,!1,n[(s+2)/2])}return o}return g.Interpolation.none()([])}},g.Interpolation.monotoneCubic=function(p){return p=g.extend({},{fillHoles:!1},p),function t(e,n){var i=g.splitIntoSegments(e,n,{fillHoles:p.fillHoles,increasingX:!0});if(i.length){if(1<i.length){var r=[];return i.forEach(function(e){r.push(t(e.pathCoordinates,e.valueData))}),g.Svg.Path.join(r)}if(e=i[0].pathCoordinates,n=i[0].valueData,e.length<=4)return g.Interpolation.none()(e,n);var o,s,a=[],l=[],u=e.length/2,c=[],h=[],d=[],f=[];for(o=0;o<u;o++)a[o]=e[2*o],l[o]=e[2*o+1];for(o=0;o<u-1;o++)d[o]=l[o+1]-l[o],f[o]=a[o+1]-a[o],h[o]=d[o]/f[o];for(c[0]=h[0],c[u-1]=h[u-2],o=1;o<u-1;o++)0===h[o]||0===h[o-1]||0<h[o-1]!=0<h[o]?c[o]=0:(c[o]=3*(f[o-1]+f[o])/((2*f[o]+f[o-1])/h[o-1]+(f[o]+2*f[o-1])/h[o]),isFinite(c[o])||(c[o]=0));for(s=(new g.Svg.Path).move(a[0],l[0],!1,n[0]),o=0;o<u-1;o++)s.curve(a[o]+f[o]/3,l[o]+c[o]*f[o]/3,a[o+1]-f[o]/3,l[o+1]-c[o+1]*f[o]/3,a[o+1],l[o+1],!1,n[o+1]);return s}return g.Interpolation.none()([])}},g.Interpolation.step=function(c){return c=g.extend({},{postpone:!0,fillHoles:!1},c),function(e,t){for(var n,i,r,o=new g.Svg.Path,s=0;s<e.length;s+=2){var a=e[s],l=e[s+1],u=t[s/2];void 0!==u.value?(void 0===r?o.move(a,l,!1,u):(c.postpone?o.line(a,i,!1,r):o.line(n,l,!1,u),o.line(a,l,!1,u)),n=a,i=l,r=u):c.fillHoles||(n=i=r=void 0)}return o}}}(0,e),function(){"use strict";e.EventEmitter=function(){var i=[];return{addEventHandler:function(e,t){i[e]=i[e]||[],i[e].push(t)},removeEventHandler:function(e,t){i[e]&&(t?(i[e].splice(i[e].indexOf(t),1),0===i[e].length&&delete i[e]):delete i[e])},emit:function(t,n){i[t]&&i[t].forEach(function(e){e(n)}),i["*"]&&i["*"].forEach(function(e){e(t,n)})}}}}(),function(e,o){"use strict";o.Class={extend:function(e,t){var n=t||this.prototype||o.Class,i=Object.create(n);function r(){var e,t=i.constructor||function(){};return e=this===o?Object.create(i):this,t.apply(e,Array.prototype.slice.call(arguments,0)),e}return o.Class.cloneDefinitions(i,e),r.prototype=i,r.super=n,r.extend=this.extend,r},cloneDefinitions:function(){var e=function(e){var t=[];if(e.length)for(var n=0;n<e.length;n++)t.push(e[n]);return t}(arguments),n=e[0];return e.splice(1,e.length-1).forEach(function(t){Object.getOwnPropertyNames(t).forEach(function(e){delete n[e],Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}),n}}}(0,e),function(e,o){"use strict";var s=e.window;o.Base=o.Class.extend({constructor:function(e,t,n,i,r){this.container=o.querySelector(e),this.data=t||{},this.data.labels=this.data.labels||[],this.data.series=this.data.series||[],this.defaultOptions=n,this.options=i,this.responsiveOptions=r,this.eventEmitter=o.EventEmitter(),this.supportsForeignObject=o.Svg.isSupported("Extensibility"),this.supportsAnimations=o.Svg.isSupported("AnimationEventsAttribute"),this.resizeListener=function(){this.update()}.bind(this),this.container&&(this.container.__chartist__&&this.container.__chartist__.detach(),this.container.__chartist__=this),this.initializeTimeoutId=setTimeout(function(){s.addEventListener("resize",this.resizeListener),this.optionsProvider=o.optionsProvider(this.options,this.responsiveOptions,this.eventEmitter),this.eventEmitter.addEventHandler("optionsChanged",function(){this.update()}.bind(this)),this.options.plugins&&this.options.plugins.forEach(function(e){e instanceof Array?e[0](this,e[1]):e(this)}.bind(this)),this.eventEmitter.emit("data",{type:"initial",data:this.data}),this.createChart(this.optionsProvider.getCurrentOptions()),this.initializeTimeoutId=void 0}.bind(this),0)},optionsProvider:void 0,container:void 0,svg:void 0,eventEmitter:void 0,createChart:function(){throw new Error("Base chart type can't be instantiated!")},update:function(e,t,n){return e&&(this.data=e||{},this.data.labels=this.data.labels||[],this.data.series=this.data.series||[],this.eventEmitter.emit("data",{type:"update",data:this.data})),t&&(this.options=o.extend({},n?this.options:this.defaultOptions,t),this.initializeTimeoutId||(this.optionsProvider.removeMediaQueryListeners(),this.optionsProvider=o.optionsProvider(this.options,this.responsiveOptions,this.eventEmitter))),this.initializeTimeoutId||this.createChart(this.optionsProvider.getCurrentOptions()),this},detach:function(){return this.initializeTimeoutId?s.clearTimeout(this.initializeTimeoutId):(s.removeEventListener("resize",this.resizeListener),this.optionsProvider.removeMediaQueryListeners()),this},on:function(e,t){return this.eventEmitter.addEventHandler(e,t),this},off:function(e,t){return this.eventEmitter.removeEventHandler(e,t),this},version:o.version,supportsForeignObject:!1})}(this,e),function(e,l){"use strict";var s=e.document;l.Svg=l.Class.extend({constructor:function(e,t,n,i,r){e instanceof Element?this._node=e:(this._node=s.createElementNS(l.namespaces.svg,e),"svg"===e&&this.attr({"xmlns:ct":l.namespaces.ct})),t&&this.attr(t),n&&this.addClass(n),i&&(r&&i._node.firstChild?i._node.insertBefore(this._node,i._node.firstChild):i._node.appendChild(this._node))},attr:function(n,e){return"string"==typeof n?e?this._node.getAttributeNS(e,n):this._node.getAttribute(n):(Object.keys(n).forEach(function(e){if(void 0!==n[e])if(-1!==e.indexOf(":")){var t=e.split(":");this._node.setAttributeNS(l.namespaces[t[0]],e,n[e])}else this._node.setAttribute(e,n[e])}.bind(this)),this)},elem:function(e,t,n,i){return new l.Svg(e,t,n,this,i)},parent:function(){return this._node.parentNode instanceof SVGElement?new l.Svg(this._node.parentNode):null},root:function(){for(var e=this._node;"svg"!==e.nodeName;)e=e.parentNode;return new l.Svg(e)},querySelector:function(e){var t=this._node.querySelector(e);return t?new l.Svg(t):null},querySelectorAll:function(e){var t=this._node.querySelectorAll(e);return t.length?new l.Svg.List(t):null},getNode:function(){return this._node},foreignObject:function(e,t,n,i){if("string"==typeof e){var r=s.createElement("div");r.innerHTML=e,e=r.firstChild}e.setAttribute("xmlns",l.namespaces.xmlns);var o=this.elem("foreignObject",t,n,i);return o._node.appendChild(e),o},text:function(e){return this._node.appendChild(s.createTextNode(e)),this},empty:function(){for(;this._node.firstChild;)this._node.removeChild(this._node.firstChild);return this},remove:function(){return this._node.parentNode.removeChild(this._node),this.parent()},replace:function(e){return this._node.parentNode.replaceChild(e._node,this._node),e},append:function(e,t){return t&&this._node.firstChild?this._node.insertBefore(e._node,this._node.firstChild):this._node.appendChild(e._node),this},classes:function(){return this._node.getAttribute("class")?this._node.getAttribute("class").trim().split(/\s+/):[]},addClass:function(e){return this._node.setAttribute("class",this.classes(this._node).concat(e.trim().split(/\s+/)).filter(function(e,t,n){return n.indexOf(e)===t}).join(" ")),this},removeClass:function(e){var t=e.trim().split(/\s+/);return this._node.setAttribute("class",this.classes(this._node).filter(function(e){return-1===t.indexOf(e)}).join(" ")),this},removeAllClasses:function(){return this._node.setAttribute("class",""),this},height:function(){return this._node.getBoundingClientRect().height},width:function(){return this._node.getBoundingClientRect().width},animate:function(e,n,a){return void 0===n&&(n=!0),Object.keys(e).forEach(function(s){function t(t,e){var n,i,r,o={};t.easing&&(r=t.easing instanceof Array?t.easing:l.Svg.Easing[t.easing],delete t.easing),t.begin=l.ensureUnit(t.begin,"ms"),t.dur=l.ensureUnit(t.dur,"ms"),r&&(t.calcMode="spline",t.keySplines=r.join(" "),t.keyTimes="0;1"),e&&(t.fill="freeze",o[s]=t.from,this.attr(o),i=l.quantity(t.begin||0).value,t.begin="indefinite"),n=this.elem("animate",l.extend({attributeName:s},t)),e&&setTimeout(function(){try{n._node.beginElement()}catch(e){o[s]=t.to,this.attr(o),n.remove()}}.bind(this),i),a&&n._node.addEventListener("beginEvent",function(){a.emit("animationBegin",{element:this,animate:n._node,params:t})}.bind(this)),n._node.addEventListener("endEvent",function(){a&&a.emit("animationEnd",{element:this,animate:n._node,params:t}),e&&(o[s]=t.to,this.attr(o),n.remove())}.bind(this))}e[s]instanceof Array?e[s].forEach(function(e){t.bind(this)(e,!1)}.bind(this)):t.bind(this)(e[s],n)}.bind(this)),this}}),l.Svg.isSupported=function(e){return s.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#"+e,"1.1")};l.Svg.Easing={easeInSine:[.47,0,.745,.715],easeOutSine:[.39,.575,.565,1],easeInOutSine:[.445,.05,.55,.95],easeInQuad:[.55,.085,.68,.53],easeOutQuad:[.25,.46,.45,.94],easeInOutQuad:[.455,.03,.515,.955],easeInCubic:[.55,.055,.675,.19],easeOutCubic:[.215,.61,.355,1],easeInOutCubic:[.645,.045,.355,1],easeInQuart:[.895,.03,.685,.22],easeOutQuart:[.165,.84,.44,1],easeInOutQuart:[.77,0,.175,1],easeInQuint:[.755,.05,.855,.06],easeOutQuint:[.23,1,.32,1],easeInOutQuint:[.86,0,.07,1],easeInExpo:[.95,.05,.795,.035],easeOutExpo:[.19,1,.22,1],easeInOutExpo:[1,0,0,1],easeInCirc:[.6,.04,.98,.335],easeOutCirc:[.075,.82,.165,1],easeInOutCirc:[.785,.135,.15,.86],easeInBack:[.6,-.28,.735,.045],easeOutBack:[.175,.885,.32,1.275],easeInOutBack:[.68,-.55,.265,1.55]},l.Svg.List=l.Class.extend({constructor:function(e){var i=this;this.svgElements=[];for(var t=0;t<e.length;t++)this.svgElements.push(new l.Svg(e[t]));Object.keys(l.Svg.prototype).filter(function(e){return-1===["constructor","parent","querySelector","querySelectorAll","replace","append","classes","height","width"].indexOf(e)}).forEach(function(n){i[n]=function(){var t=Array.prototype.slice.call(arguments,0);return i.svgElements.forEach(function(e){l.Svg.prototype[n].apply(e,t)}),i}})}})}(this,e),function(e,a){"use strict";function u(e,t,n,i,r,o){var s=a.extend({command:r?e.toLowerCase():e.toUpperCase()},t,o?{data:o}:{});n.splice(i,0,s)}function t(r,o){r.forEach(function(n,i){s[n.command.toLowerCase()].forEach(function(e,t){o(n,e,i,t,r)})})}var s={m:["x","y"],l:["x","y"],c:["x1","y1","x2","y2","x","y"],a:["rx","ry","xAr","lAf","sf","x","y"]},n={accuracy:3};a.Svg.Path=a.Class.extend({constructor:function(e,t){this.pathElements=[],this.pos=0,this.close=e,this.options=a.extend({},n,t)},position:function(e){return void 0!==e?(this.pos=Math.max(0,Math.min(this.pathElements.length,e)),this):this.pos},remove:function(e){return this.pathElements.splice(this.pos,e),this},move:function(e,t,n,i){return u("M",{x:+e,y:+t},this.pathElements,this.pos++,n,i),this},line:function(e,t,n,i){return u("L",{x:+e,y:+t},this.pathElements,this.pos++,n,i),this},curve:function(e,t,n,i,r,o,s,a){return u("C",{x1:+e,y1:+t,x2:+n,y2:+i,x:+r,y:+o},this.pathElements,this.pos++,s,a),this},arc:function(e,t,n,i,r,o,s,a,l){return u("A",{rx:+e,ry:+t,xAr:+n,lAf:+i,sf:+r,x:+o,y:+s},this.pathElements,this.pos++,a,l),this},scale:function(n,i){return t(this.pathElements,function(e,t){e[t]*="x"===t[0]?n:i}),this},translate:function(n,i){return t(this.pathElements,function(e,t){e[t]+="x"===t[0]?n:i}),this},transform:function(s){return t(this.pathElements,function(e,t,n,i,r){var o=s(e,t,n,i,r);!o&&0!==o||(e[t]=o)}),this},parse:function(e){var t=e.replace(/([A-Za-z])([0-9])/g,"$1 $2").replace(/([0-9])([A-Za-z])/g,"$1 $2").split(/[\s,]+/).reduce(function(e,t){return t.match(/[A-Za-z]/)&&e.push([]),e[e.length-1].push(t),e},[]);"Z"===t[t.length-1][0].toUpperCase()&&t.pop();var n=t.map(function(i){var e=i.shift(),t=s[e.toLowerCase()];return a.extend({command:e},t.reduce(function(e,t,n){return e[t]=+i[n],e},{}))}),i=[this.pos,0];return Array.prototype.push.apply(i,n),Array.prototype.splice.apply(this.pathElements,i),this.pos+=n.length,this},stringify:function(){var i=Math.pow(10,this.options.accuracy);return this.pathElements.reduce(function(e,t){var n=s[t.command.toLowerCase()].map(function(e){return this.options.accuracy?Math.round(t[e]*i)/i:t[e]}.bind(this));return e+t.command+n.join(",")}.bind(this),"")+(this.close?"Z":"")},clone:function(e){var t=new a.Svg.Path(e||this.close);return t.pos=this.pos,t.pathElements=this.pathElements.slice().map(function(e){return a.extend({},e)}),t.options=a.extend({},this.options),t},splitByCommand:function(t){var n=[new a.Svg.Path];return this.pathElements.forEach(function(e){e.command===t.toUpperCase()&&0!==n[n.length-1].pathElements.length&&n.push(new a.Svg.Path),n[n.length-1].pathElements.push(e)}),n}}),a.Svg.Path.elementDescriptions=s,a.Svg.Path.join=function(e,t,n){for(var i=new a.Svg.Path(t,n),r=0;r<e.length;r++)for(var o=e[r],s=0;s<o.pathElements.length;s++)i.pathElements.push(o.pathElements[s]);return i}}(0,e),function(e,d){"use strict";var r=(e.window,e.document,{x:{pos:"x",len:"width",dir:"horizontal",rectStart:"x1",rectEnd:"x2",rectOffset:"y2"},y:{pos:"y",len:"height",dir:"vertical",rectStart:"y2",rectEnd:"y1",rectOffset:"x1"}});d.Axis=d.Class.extend({constructor:function(e,t,n,i){this.units=e,this.counterUnits=e===r.x?r.y:r.x,this.chartRect=t,this.axisLength=t[e.rectEnd]-t[e.rectStart],this.gridOffset=t[e.rectOffset],this.ticks=n,this.options=i},createGridAndLabels:function(r,o,s,a,l){var u=a["axis"+this.units.pos.toUpperCase()],c=this.ticks.map(this.projectValue.bind(this)),h=this.ticks.map(u.labelInterpolationFnc);c.forEach(function(e,t){var n,i={x:0,y:0};n=c[t+1]?c[t+1]-e:Math.max(this.axisLength-e,30),d.isFalseyButZero(h[t])&&""!==h[t]||("x"===this.units.pos?(e=this.chartRect.x1+e,i.x=a.axisX.labelOffset.x,"start"===a.axisX.position?i.y=this.chartRect.padding.top+a.axisX.labelOffset.y+(s?5:20):i.y=this.chartRect.y1+a.axisX.labelOffset.y+(s?5:20)):(e=this.chartRect.y1-e,i.y=a.axisY.labelOffset.y-(s?n:0),"start"===a.axisY.position?i.x=s?this.chartRect.padding.left+a.axisY.labelOffset.x:this.chartRect.x1-10:i.x=this.chartRect.x2+a.axisY.labelOffset.x+10),u.showGrid&&d.createGrid(e,t,this,this.gridOffset,this.chartRect[this.counterUnits.len](),r,[a.classNames.grid,a.classNames[this.units.dir]],l),u.showLabel&&d.createLabel(e,n,t,h,this,u.offset,i,o,[a.classNames.label,a.classNames[this.units.dir],"start"===u.position?a.classNames[u.position]:a.classNames.end],s,l))}.bind(this))},projectValue:function(e,t,n){throw new Error("Base axis can't be instantiated!")}}),d.Axis.units=r}(this,e),function(e,o){"use strict";e.window,e.document,o.AutoScaleAxis=o.Axis.extend({constructor:function(e,t,n,i){var r=i.highLow||o.getHighLow(t,i,e.pos);this.bounds=o.getBounds(n[e.rectEnd]-n[e.rectStart],r,i.scaleMinSpace||20,i.onlyInteger),this.range={min:this.bounds.min,max:this.bounds.max},o.AutoScaleAxis.super.constructor.call(this,e,n,this.bounds.values,i)},projectValue:function(e){return this.axisLength*(+o.getMultiValue(e,this.units.pos)-this.bounds.min)/this.bounds.range}})}(this,e),function(e,o){"use strict";e.window,e.document,o.FixedScaleAxis=o.Axis.extend({constructor:function(e,t,n,i){var r=i.highLow||o.getHighLow(t,i,e.pos);this.divisor=i.divisor||1,this.ticks=i.ticks||o.times(this.divisor).map(function(e,t){return r.low+(r.high-r.low)/this.divisor*t}.bind(this)),this.ticks.sort(function(e,t){return e-t}),this.range={min:r.low,max:r.high},o.FixedScaleAxis.super.constructor.call(this,e,n,this.ticks,i),this.stepLength=this.axisLength/this.divisor},projectValue:function(e){return this.axisLength*(+o.getMultiValue(e,this.units.pos)-this.range.min)/(this.range.max-this.range.min)}})}(this,e),function(e,o){"use strict";e.window,e.document,o.StepAxis=o.Axis.extend({constructor:function(e,t,n,i){o.StepAxis.super.constructor.call(this,e,n,i.ticks,i);var r=Math.max(1,i.ticks.length-(i.stretch?1:0));this.stepLength=this.axisLength/r},projectValue:function(e,t){return this.stepLength*t}})}(this,e),function(e,m){"use strict";var r=(e.window,e.document,{axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:m.noop,type:void 0},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:m.noop,type:void 0,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,showLine:!0,showPoint:!0,showArea:!1,areaBase:0,lineSmooth:!0,showGridBackground:!1,low:void 0,high:void 0,chartPadding:{top:15,right:15,bottom:5,left:10},fullWidth:!1,reverseData:!1,classNames:{chart:"ct-chart-line",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",line:"ct-line",point:"ct-point",area:"ct-area",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}});m.Line=m.Base.extend({constructor:function(e,t,n,i){m.Line.super.constructor.call(this,e,t,r,m.extend({},r,n),i)},createChart:function(c){var h=m.normalizeData(this.data,c.reverseData,!0);this.svg=m.createSvg(this.container,c.width,c.height,c.classNames.chart);var d,f,e=this.svg.elem("g").addClass(c.classNames.gridGroup),p=this.svg.elem("g"),t=this.svg.elem("g").addClass(c.classNames.labelGroup),g=m.createChartRect(this.svg,c,r.padding);d=void 0===c.axisX.type?new m.StepAxis(m.Axis.units.x,h.normalized.series,g,m.extend({},c.axisX,{ticks:h.normalized.labels,stretch:c.fullWidth})):c.axisX.type.call(m,m.Axis.units.x,h.normalized.series,g,c.axisX),f=void 0===c.axisY.type?new m.AutoScaleAxis(m.Axis.units.y,h.normalized.series,g,m.extend({},c.axisY,{high:m.isNumeric(c.high)?c.high:c.axisY.high,low:m.isNumeric(c.low)?c.low:c.axisY.low})):c.axisY.type.call(m,m.Axis.units.y,h.normalized.series,g,c.axisY),d.createGridAndLabels(e,t,this.supportsForeignObject,c,this.eventEmitter),f.createGridAndLabels(e,t,this.supportsForeignObject,c,this.eventEmitter),c.showGridBackground&&m.createGridBackground(e,g,c.classNames.gridBackground,this.eventEmitter),h.raw.series.forEach(function(i,r){var n=p.elem("g");n.attr({"ct:series-name":i.name,"ct:meta":m.serialize(i.meta)}),n.addClass([c.classNames.series,i.className||c.classNames.series+"-"+m.alphaNumerate(r)].join(" "));var o=[],s=[];h.normalized.series[r].forEach(function(e,t){var n={x:g.x1+d.projectValue(e,t,h.normalized.series[r]),y:g.y1-f.projectValue(e,t,h.normalized.series[r])};o.push(n.x,n.y),s.push({value:e,valueIndex:t,meta:m.getMetaData(i,t)})}.bind(this));var e={lineSmooth:m.getSeriesOption(i,c,"lineSmooth"),showPoint:m.getSeriesOption(i,c,"showPoint"),showLine:m.getSeriesOption(i,c,"showLine"),showArea:m.getSeriesOption(i,c,"showArea"),areaBase:m.getSeriesOption(i,c,"areaBase")},t=("function"==typeof e.lineSmooth?e.lineSmooth:e.lineSmooth?m.Interpolation.monotoneCubic():m.Interpolation.none())(o,s);if(e.showPoint&&t.pathElements.forEach(function(e){var t=n.elem("line",{x1:e.x,y1:e.y,x2:e.x+.01,y2:e.y},c.classNames.point).attr({"ct:value":[e.data.value.x,e.data.value.y].filter(m.isNumeric).join(","),"ct:meta":m.serialize(e.data.meta)});this.eventEmitter.emit("draw",{type:"point",value:e.data.value,index:e.data.valueIndex,meta:e.data.meta,series:i,seriesIndex:r,axisX:d,axisY:f,group:n,element:t,x:e.x,y:e.y})}.bind(this)),e.showLine){var a=n.elem("path",{d:t.stringify()},c.classNames.line,!0);this.eventEmitter.emit("draw",{type:"line",values:h.normalized.series[r],path:t.clone(),chartRect:g,index:r,series:i,seriesIndex:r,seriesMeta:i.meta,axisX:d,axisY:f,group:n,element:a})}if(e.showArea&&f.range){var l=Math.max(Math.min(e.areaBase,f.range.max),f.range.min),u=g.y1-f.projectValue(l);t.splitByCommand("M").filter(function(e){return 1<e.pathElements.length}).map(function(e){var t=e.pathElements[0],n=e.pathElements[e.pathElements.length-1];return e.clone(!0).position(0).remove(1).move(t.x,u).line(t.x,t.y).position(e.pathElements.length+1).line(n.x,u)}).forEach(function(e){var t=n.elem("path",{d:e.stringify()},c.classNames.area,!0);this.eventEmitter.emit("draw",{type:"area",values:h.normalized.series[r],path:e.clone(),series:i,seriesIndex:r,axisX:d,axisY:f,chartRect:g,index:r,group:n,element:t})}.bind(this))}}.bind(this)),this.eventEmitter.emit("created",{bounds:f.bounds,chartRect:g,axisX:d,axisY:f,svg:this.svg,options:c})}})}(this,e),function(e,C){"use strict";var s=(e.window,e.document,{axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:C.noop,scaleMinSpace:30,onlyInteger:!1},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:C.noop,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,high:void 0,low:void 0,referenceValue:0,chartPadding:{top:15,right:15,bottom:5,left:10},seriesBarDistance:15,stackBars:!1,stackMode:"accumulate",horizontalBars:!1,distributeSeries:!1,reverseData:!1,showGridBackground:!1,classNames:{chart:"ct-chart-bar",horizontalBars:"ct-horizontal-bars",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",bar:"ct-bar",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}});C.Bar=C.Base.extend({constructor:function(e,t,n,i){C.Bar.super.constructor.call(this,e,t,s,C.extend({},s,n),i)},createChart:function(f){var p,e;f.distributeSeries?(p=C.normalizeData(this.data,f.reverseData,f.horizontalBars?"x":"y")).normalized.series=p.normalized.series.map(function(e){return[e]}):p=C.normalizeData(this.data,f.reverseData,f.horizontalBars?"x":"y"),this.svg=C.createSvg(this.container,f.width,f.height,f.classNames.chart+(f.horizontalBars?" "+f.classNames.horizontalBars:""));var t=this.svg.elem("g").addClass(f.classNames.gridGroup),n=this.svg.elem("g"),i=this.svg.elem("g").addClass(f.classNames.labelGroup);if(f.stackBars&&0!==p.normalized.series.length){var r=C.serialMap(p.normalized.series,function(){return Array.prototype.slice.call(arguments).map(function(e){return e}).reduce(function(e,t){return{x:e.x+(t&&t.x)||0,y:e.y+(t&&t.y)||0}},{x:0,y:0})});e=C.getHighLow([r],f,f.horizontalBars?"x":"y")}else e=C.getHighLow(p.normalized.series,f,f.horizontalBars?"x":"y");e.high=+f.high||(0===f.high?0:e.high),e.low=+f.low||(0===f.low?0:e.low);var g,o,m,v,y,x=C.createChartRect(this.svg,f,s.padding);o=f.distributeSeries&&f.stackBars?p.normalized.labels.slice(0,1):p.normalized.labels,f.horizontalBars?(g=v=void 0===f.axisX.type?new C.AutoScaleAxis(C.Axis.units.x,p.normalized.series,x,C.extend({},f.axisX,{highLow:e,referenceValue:0})):f.axisX.type.call(C,C.Axis.units.x,p.normalized.series,x,C.extend({},f.axisX,{highLow:e,referenceValue:0})),m=y=void 0===f.axisY.type?new C.StepAxis(C.Axis.units.y,p.normalized.series,x,{ticks:o}):f.axisY.type.call(C,C.Axis.units.y,p.normalized.series,x,f.axisY)):(m=v=void 0===f.axisX.type?new C.StepAxis(C.Axis.units.x,p.normalized.series,x,{ticks:o}):f.axisX.type.call(C,C.Axis.units.x,p.normalized.series,x,f.axisX),g=y=void 0===f.axisY.type?new C.AutoScaleAxis(C.Axis.units.y,p.normalized.series,x,C.extend({},f.axisY,{highLow:e,referenceValue:0})):f.axisY.type.call(C,C.Axis.units.y,p.normalized.series,x,C.extend({},f.axisY,{highLow:e,referenceValue:0})));var b=f.horizontalBars?x.x1+g.projectValue(0):x.y1-g.projectValue(0),w=[];m.createGridAndLabels(t,i,this.supportsForeignObject,f,this.eventEmitter),g.createGridAndLabels(t,i,this.supportsForeignObject,f,this.eventEmitter),f.showGridBackground&&C.createGridBackground(t,x,f.classNames.gridBackground,this.eventEmitter),p.raw.series.forEach(function(l,u){var c,h,d=u-(p.raw.series.length-1)/2;c=f.distributeSeries&&!f.stackBars?m.axisLength/p.normalized.series.length/2:f.distributeSeries&&f.stackBars?m.axisLength/2:m.axisLength/p.normalized.series[u].length/2,(h=n.elem("g")).attr({"ct:series-name":l.name,"ct:meta":C.serialize(l.meta)}),h.addClass([f.classNames.series,l.className||f.classNames.series+"-"+C.alphaNumerate(u)].join(" ")),p.normalized.series[u].forEach(function(e,t){var n,i,r,o;if(o=f.distributeSeries&&!f.stackBars?u:f.distributeSeries&&f.stackBars?0:t,n=f.horizontalBars?{x:x.x1+g.projectValue(e&&e.x?e.x:0,t,p.normalized.series[u]),y:x.y1-m.projectValue(e&&e.y?e.y:0,o,p.normalized.series[u])}:{x:x.x1+m.projectValue(e&&e.x?e.x:0,o,p.normalized.series[u]),y:x.y1-g.projectValue(e&&e.y?e.y:0,t,p.normalized.series[u])},m instanceof C.StepAxis&&(m.options.stretch||(n[m.units.pos]+=c*(f.horizontalBars?-1:1)),n[m.units.pos]+=f.stackBars||f.distributeSeries?0:d*f.seriesBarDistance*(f.horizontalBars?-1:1)),r=w[t]||b,w[t]=r-(b-n[m.counterUnits.pos]),void 0!==e){var s={};s[m.units.pos+"1"]=n[m.units.pos],s[m.units.pos+"2"]=n[m.units.pos],!f.stackBars||"accumulate"!==f.stackMode&&f.stackMode?(s[m.counterUnits.pos+"1"]=b,s[m.counterUnits.pos+"2"]=n[m.counterUnits.pos]):(s[m.counterUnits.pos+"1"]=r,s[m.counterUnits.pos+"2"]=w[t]),s.x1=Math.min(Math.max(s.x1,x.x1),x.x2),s.x2=Math.min(Math.max(s.x2,x.x1),x.x2),s.y1=Math.min(Math.max(s.y1,x.y2),x.y1),s.y2=Math.min(Math.max(s.y2,x.y2),x.y1);var a=C.getMetaData(l,t);i=h.elem("line",s,f.classNames.bar).attr({"ct:value":[e.x,e.y].filter(C.isNumeric).join(","),"ct:meta":C.serialize(a)}),this.eventEmitter.emit("draw",C.extend({type:"bar",value:e,index:t,meta:a,series:l,seriesIndex:u,axisX:v,axisY:y,chartRect:x,group:h,element:i},s))}}.bind(this))}.bind(this)),this.eventEmitter.emit("created",{bounds:g.bounds,chartRect:x,axisX:v,axisY:y,svg:this.svg,options:f})}})}(this,e),function(e,T){"use strict";function D(e,t,n){var i=t.x>e.x;return i&&"explode"===n||!i&&"implode"===n?"start":i&&"implode"===n||!i&&"explode"===n?"end":"middle"}var r=(e.window,e.document,{width:void 0,height:void 0,chartPadding:5,classNames:{chartPie:"ct-chart-pie",chartDonut:"ct-chart-donut",series:"ct-series",slicePie:"ct-slice-pie",sliceDonut:"ct-slice-donut",sliceDonutSolid:"ct-slice-donut-solid",label:"ct-label"},startAngle:0,total:void 0,donut:!1,donutSolid:!1,donutWidth:60,showLabel:!0,labelOffset:0,labelPosition:"inside",labelInterpolationFnc:T.noop,labelDirection:"neutral",reverseData:!1,ignoreEmptyValues:!1});T.Pie=T.Base.extend({constructor:function(e,t,n,i){T.Pie.super.constructor.call(this,e,t,r,T.extend({},r,n),i)},createChart:function(m){var v,e,y,x,b,w=T.normalizeData(this.data),C=[],S=m.startAngle;this.svg=T.createSvg(this.container,m.width,m.height,m.donut?m.classNames.chartDonut:m.classNames.chartPie),e=T.createChartRect(this.svg,m,r.padding),y=Math.min(e.width()/2,e.height()/2),b=m.total||w.normalized.series.reduce(function(e,t){return e+t},0);var k=T.quantity(m.donutWidth);"%"===k.unit&&(k.value*=y/100),y-=m.donut&&!m.donutSolid?k.value/2:0,x="outside"===m.labelPosition||m.donut&&!m.donutSolid?y:"center"===m.labelPosition?0:m.donutSolid?y-k.value/2:y/2,x+=m.labelOffset;var L={x:e.x1+e.width()/2,y:e.y2+e.height()/2},M=1===w.raw.series.filter(function(e){return e.hasOwnProperty("value")?0!==e.value:0!==e}).length;w.raw.series.forEach(function(e,t){C[t]=this.svg.elem("g",null,null)}.bind(this)),m.showLabel&&(v=this.svg.elem("g",null,null)),w.raw.series.forEach(function(e,t){if(0!==w.normalized.series[t]||!m.ignoreEmptyValues){C[t].attr({"ct:series-name":e.name}),C[t].addClass([m.classNames.series,e.className||m.classNames.series+"-"+T.alphaNumerate(t)].join(" "));var n=0<b?S+w.normalized.series[t]/b*360:0,i=Math.max(0,S-(0===t||M?0:.2));359.99<=n-i&&(n=i+359.99);var r,o,s,a=T.polarToCartesian(L.x,L.y,y,i),l=T.polarToCartesian(L.x,L.y,y,n),u=new T.Svg.Path(!m.donut||m.donutSolid).move(l.x,l.y).arc(y,y,0,180<n-S,0,a.x,a.y);m.donut?m.donutSolid&&(s=y-k.value,r=T.polarToCartesian(L.x,L.y,s,S-(0===t||M?0:.2)),o=T.polarToCartesian(L.x,L.y,s,n),u.line(r.x,r.y),u.arc(s,s,0,180<n-S,1,o.x,o.y)):u.line(L.x,L.y);var c=m.classNames.slicePie;m.donut&&(c=m.classNames.sliceDonut,m.donutSolid&&(c=m.classNames.sliceDonutSolid));var h=C[t].elem("path",{d:u.stringify()},c);if(h.attr({"ct:value":w.normalized.series[t],"ct:meta":T.serialize(e.meta)}),m.donut&&!m.donutSolid&&(h._node.style.strokeWidth=k.value+"px"),this.eventEmitter.emit("draw",{type:"slice",value:w.normalized.series[t],totalDataSum:b,index:t,meta:e.meta,series:e,group:C[t],element:h,path:u.clone(),center:L,radius:y,startAngle:S,endAngle:n}),m.showLabel){var d,f;d=1===w.raw.series.length?{x:L.x,y:L.y}:T.polarToCartesian(L.x,L.y,x,S+(n-S)/2),f=w.normalized.labels&&!T.isFalseyButZero(w.normalized.labels[t])?w.normalized.labels[t]:w.normalized.series[t];var p=m.labelInterpolationFnc(f,t);if(p||0===p){var g=v.elem("text",{dx:d.x,dy:d.y,"text-anchor":D(L,d,m.labelDirection)},m.classNames.label).text(""+p);this.eventEmitter.emit("draw",{type:"label",index:t,group:v,element:g,text:""+p,x:d.x,y:d.y})}}S=n}}.bind(this)),this.eventEmitter.emit("created",{chartRect:e,svg:this.svg,options:m})},determineAnchorPosition:D})}(this,e),e});var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.findInternal=function(e,t,n){e instanceof String&&(e=String(e));for(var i=e.length,r=0;r<i;r++){var o=e[r];if(t.call(n,o,r,e))return{i:r,v:o}}return{i:-1,v:void 0}},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.SIMPLE_FROUND_POLYFILL=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof global&&null!=global?global:e},$jscomp.global=$jscomp.getGlobal(this),$jscomp.polyfill=function(e,t,n,i){if(t){for(n=$jscomp.global,e=e.split("."),i=0;i<e.length-1;i++){var r=e[i];r in n||(n[r]={}),n=n[r]}(t=t(i=n[e=e[e.length-1]]))!=i&&null!=t&&$jscomp.defineProperty(n,e,{configurable:!0,writable:!0,value:t})}},$jscomp.polyfill("Array.prototype.find",function(e){return e||function(e,t){return $jscomp.findInternal(this,e,t).v}},"es6","es3"),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.CodeMirror=t()}(this,function(){function a(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}function D(e){for(var t=e.childNodes.length;0<t;--t)e.removeChild(e.firstChild);return e}function A(e,t){return D(e).appendChild(t)}function m(e,t,n,i){if(e=document.createElement(e),n&&(e.className=n),i&&(e.style.cssText=i),"string"==typeof t)e.appendChild(document.createTextNode(t));else if(t)for(n=0;n<t.length;++n)e.appendChild(t[n]);return e}function E(e,t,n,i){return(e=m(e,t,n,i)).setAttribute("role","presentation"),e}function c(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function y(){try{var t=document.activeElement}catch(e){t=document.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}function i(e,t){var n=e.className;a(t).test(n)||(e.className+=(n?" ":"")+t)}function N(e,t){e=e.split(" ");for(var n=0;n<e.length;n++)e[n]&&!a(e[n]).test(t)&&(t+=" "+e[n]);return t}function l(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function u(e,t,n){for(var i in t||(t={}),e)!e.hasOwnProperty(i)||!1===n&&t.hasOwnProperty(i)||(t[i]=e[i]);return t}function x(e,t,n,i,r){for(null==t&&(-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length)),i=i||0,r=r||0;;){var o=e.indexOf("\t",i);if(o<0||t<=o)return r+(t-i);r+=o-i,r+=n-r%n,i=o+1}}function v(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}function b(e,t,n){for(var i=0,r=0;;){var o=e.indexOf("\t",i);-1==o&&(o=e.length);var s=o-i;if(o==e.length||t<=r+s)return i+Math.min(s,t-r);if(r+=o-i,i=o+1,t<=(r+=n-r%n))return i}}function w(e){for(;ao.length<=e;)ao.push(g(ao)+" ");return ao[e]}function g(e){return e[e.length-1]}function C(e,t){for(var n=[],i=0;i<e.length;i++)n[i]=t(e[i],i);return n}function n(){}function r(e,t){return e=Object.create?Object.create(e):(n.prototype=e,new n),t&&u(t,e),e}function o(e){return/\w/.test(e)||""<e&&(e.toUpperCase()!=e.toLowerCase()||lo.test(e))}function f(e,t){return t?!!(-1<t.source.indexOf("\\w")&&o(e))||t.test(e):o(e)}function s(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function p(e){return 768<=e.charCodeAt(0)&&uo.test(e)}function S(e,t,n){for(;(n<0?0<t:t<e.length)&&p(e.charAt(t));)t+=n;return t}function k(e,t,n){for(var i=n<t?-1:1;;){if(t==n)return t;var r=(t+n)/2;if((r=i<0?Math.ceil(r):Math.floor(r))==t)return e(r)?t:n;e(r)?n=r:t=r+i}}function L(e,t,n){var i;co=null;for(var r=0;r<e.length;++r){var o=e[r];if(o.from<t&&o.to>t)return r;o.to==t&&(o.from!=o.to&&"before"==n?i=r:co=r),o.from==t&&(o.from!=o.to&&"before"!=n?i=r:co=r)}return null!=i?i:co}function O(e,t){var n=e.order;return null==n&&(n=e.order=ho(e.text,t)),n}function M(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var i=(e=e._handlers)&&e[t];i&&(-1<(n=v(i,n))&&(e[t]=i.slice(0,n).concat(i.slice(n+1))))}}function F(e,t){var n=e._handlers&&e._handlers[t]||fo;if(n.length)for(var i=Array.prototype.slice.call(arguments,2),r=0;r<n.length;++r)n[r].apply(null,i)}function T(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),F(e,n||t.type,e,t),P(t)||t.codemirrorIgnore}function h(e){var t=e._handlers&&e._handlers.cursorActivity;if(t){e=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]);for(var n=0;n<t.length;++n)-1==v(e,t[n])&&e.push(t[n])}}function d(e,t){return 0<(e._handlers&&e._handlers[t]||fo).length}function e(e){e.prototype.on=function(e,t){po(this,e,t)},e.prototype.off=function(e,t){M(this,e,t)}}function z(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function t(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function P(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function I(e){z(e),t(e)}function H(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),_r&&e.ctrlKey&&1==t&&(t=3),t}function W(e){if(null==$r){var t=m("span","​");A(e,m("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&($r=t.offsetWidth<=1&&2<t.offsetHeight&&!(Tr&&Dr<8))}return(e=$r?m("span","​"):m("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")).setAttribute("cm-text",""),e}function _(e){if("string"==typeof e&&wo.hasOwnProperty(e))e=wo[e];else if(e&&"string"==typeof e.name&&wo.hasOwnProperty(e.name)){var t=wo[e.name];"string"==typeof t&&(t={name:t}),(e=r(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return _("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return _("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function B(e,t){t=_(t);var n=bo[t.name];if(!n)return B(e,"text/plain");if(e=n(e,t),Co.hasOwnProperty(t.name))for(var i in n=Co[t.name])n.hasOwnProperty(i)&&(e.hasOwnProperty(i)&&(e["_"+i]=e[i]),e[i]=n[i]);if(e.name=t.name,t.helperType&&(e.helperType=t.helperType),t.modeProps)for(var r in t.modeProps)e[r]=t.modeProps[r];return e}function R(e,t){u(t,e=Co.hasOwnProperty(e)?Co[e]:Co[e]={})}function j(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);for(var n in e={},t){var i=t[n];i instanceof Array&&(i=i.concat([])),e[n]=i}return e}function U(e,t){for(var n;e.innerMode&&((n=e.innerMode(t))&&n.mode!=e);)t=n.state,e=n.mode;return n||{mode:e,state:t}}function G(e,t,n){return!e.startState||e.startState(t,n)}function X(e,t){if((t-=e.first)<0||t>=e.size)throw Error("There is no line "+(t+e.first)+" in the document.");for(;!e.lines;)for(var n=0;;++n){var i=e.children[n],r=i.chunkSize();if(t<r){e=i;break}t-=r}return e.lines[t]}function V(e,t,n){var i=[],r=t.line;return e.iter(t.line,n.line+1,function(e){e=e.text,r==n.line&&(e=e.slice(0,n.ch)),r==t.line&&(e=e.slice(t.ch)),i.push(e),++r}),i}function Y(e,t,n){var i=[];return e.iter(t,n,function(e){i.push(e.text)}),i}function q(e,t){if(t-=e.height)for(;e;e=e.parent)e.height+=t}function $(e){if(null==e.parent)return null;var t=e.parent;e=v(t.lines,e);for(var n=t.parent;n;n=(t=n).parent)for(var i=0;n.children[i]!=t;++i)e+=n.children[i].chunkSize();return e+t.first}function K(e,t){var n=e.first;e:do{for(var i=0;i<e.children.length;++i){var r=e.children[i],o=r.height;if(t<o){e=r;continue e}t-=o,n+=r.chunkSize()}return n}while(!e.lines);for(i=0;i<e.lines.length&&!(t<(r=e.lines[i].height));++i)t-=r;return n+i}function Z(e,t){return t>=e.first&&t<e.first+e.size}function Q(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function J(e,t,n){if(void 0===n&&(n=null),!(this instanceof J))return new J(e,t,n);this.line=e,this.ch=t,this.sticky=n}function ee(e,t){return e.line-t.line||e.ch-t.ch}function te(e,t){return e.sticky==t.sticky&&0==ee(e,t)}function ne(e){return J(e.line,e.ch)}function ie(e,t){return ee(e,t)<0?t:e}function re(e,t){return ee(e,t)<0?e:t}function oe(e,t){if(t.line<e.first)return J(e.first,0);var n=e.first+e.size-1;return t.line>n?J(n,X(e,n).text.length):(e=X(e,t.line).text.length,t=null==(n=t.ch)||e<n?J(t.line,e):n<0?J(t.line,0):t)}function se(e,t){for(var n=[],i=0;i<t.length;i++)n[i]=oe(e,t[i]);return n}function ae(t,n,i,e){var a=[t.state.modeGen],l={};ge(t,n.text,t.doc.mode,i,function(e,t){return a.push(e,t)},l,e);var u=i.state;e=function(e){i.baseTokens=a;var r=t.state.overlays[e],o=1,s=0;i.state=!0,ge(t,n.text,r.mode,i,function(e,t){for(var n=o;s<e;){var i=a[o];e<i&&a.splice(o,1,e,a[o+1],i),o+=2,s=Math.min(e,i)}if(t)if(r.opaque)a.splice(n,o-n,e,"overlay "+t),o=n+2;else for(;n<o;n+=2)e=a[n+1],a[n+1]=(e?e+" ":"")+"overlay "+t},l),i.state=u,i.baseTokens=null,i.baseTokenPos=1};for(var r=0;r<t.state.overlays.length;++r)e(r);return{styles:a,classes:l.bgClass||l.textClass?l:null}}function le(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var i=ue(e,$(t)),r=t.text.length>e.options.maxHighlightLength&&j(e.doc.mode,i.state),o=ae(e,t,i);r&&(i.state=r),t.stateAfter=i.save(!r),t.styles=o.styles,o.classes?t.styleClasses=o.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function ue(n,i,e){var t=n.doc,r=n.display;if(!t.mode.startState)return new Mo(t,!0,i);var o=function(e,t,n){for(var i,r,o=e.doc,s=n?-1:t-(e.doc.mode.innerMode?1e3:100);s<t;--t){if(t<=o.first)return o.first;var a=X(o,t-1),l=a.stateAfter;if(l&&(!n||t+(l instanceof Lo?l.lookAhead:0)<=o.modeFrontier))return t;a=x(a.text,null,e.options.tabSize),(null==r||a<i)&&(r=t-1,i=a)}return r}(n,i,e),s=o>t.first&&X(t,o-1).stateAfter,a=s?Mo.fromSaved(t,s,o):new Mo(t,G(t.mode),o);return t.iter(o,i,function(e){ce(n,e.text,a);var t=a.line;e.stateAfter=t==i-1||0==t%5||t>=r.viewFrom&&t<r.viewTo?a.save():null,a.nextLine()}),e&&(t.modeFrontier=a.line),a}function ce(e,t,n,i){var r=e.doc.mode;for((e=new So(t,e.options.tabSize,n)).start=e.pos=i||0,""==t&&he(r,n.state);!e.eol();)de(r,e,n.state),e.start=e.pos}function he(e,t){return e.blankLine?e.blankLine(t):e.innerMode&&(e=U(e,t)).mode.blankLine?e.mode.blankLine(e.state):void 0}function de(e,t,n,i){for(var r=0;r<10;r++){i&&(i[0]=U(e,n).mode);var o=e.token(t,n);if(t.pos>t.start)return o}throw Error("Mode "+e.name+" failed to advance stream.")}function fe(e,t,n,i){var r,o=e.doc,s=o.mode,a=X(o,(t=oe(o,t)).line);for(n=ue(e,t.line,n),e=new So(a.text,e.options.tabSize,n),i&&(r=[]);(i||e.pos<t.ch)&&!e.eol();){e.start=e.pos;var l=de(s,e,n.state);i&&r.push(new To(e,l,j(o.mode,n.state)))}return i?r:new To(e,l,n.state)}function pe(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var i=n[1]?"bgClass":"textClass";null==t[i]?t[i]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(t[i])||(t[i]+=" "+n[2])}return e}function ge(e,t,n,i,r,o,s){var a=n.flattenSpans;null==a&&(a=e.options.flattenSpans);var l=0,u=null,c=new So(t,e.options.tabSize,i),h=e.options.addModeClass&&[null];for(""==t&&pe(he(n,i.state),o);!c.eol();){if(c.pos>e.options.maxHighlightLength){a=!1,s&&ce(e,t,i,c.pos),c.pos=t.length;var d=null}else d=pe(de(n,c,i.state,h),o);if(h){var f=h[0].name;f&&(d="m-"+(d?f+" "+d:f))}if(!a||u!=d){for(;l<c.start;)r(l=Math.min(c.start,l+5e3),u);u=d}c.start=c.pos}for(;l<c.pos;)r(e=Math.min(c.pos,l+5e3),u),l=e}function me(e,t,n){this.marker=e,this.from=t,this.to=n}function ve(e,t){if(e)for(var n=0;n<e.length;++n){var i=e[n];if(i.marker==t)return i}}function ye(e,t){if(t.full)return null;var n=Z(e,t.from.line)&&X(e,t.from.line).markedSpans,i=Z(e,t.to.line)&&X(e,t.to.line).markedSpans;if(!n&&!i)return null;e=t.from.ch;var r,o,s=t.to.ch,a=0==ee(t.from,t.to);if(n)for(var l=0;l<n.length;++l){var u=n[l],c=u.marker;if(null==u.from||(c.inclusiveLeft?u.from<=e:u.from<e)||!(u.from!=e||"bookmark"!=c.type||a&&u.marker.insertLeft)){var h=null==u.to||(c.inclusiveRight?u.to>=e:u.to>e);(r||(r=[])).push(new me(c,u.from,h?null:u.to))}}if(n=r,i)for(r=0;r<i.length;++r)u=(l=i[r]).marker,null!=l.to&&!(u.inclusiveRight?l.to>=s:l.to>s)&&(l.from!=s||"bookmark"!=u.type||a&&!l.marker.insertLeft)||(c=null==l.from||(u.inclusiveLeft?l.from<=s:l.from<s),(o||(o=[])).push(new me(u,c?null:l.from-s,null==l.to?null:l.to-s)));if(i=1==t.text.length,s=g(t.text).length+(i?e:0),n)for(a=0;a<n.length;++a)null==(r=n[a]).to&&((l=ve(o,r.marker))?i&&(r.to=null==l.to?null:l.to+s):r.to=e);if(o)for(e=0;e<o.length;++e)null!=(a=o[e]).to&&(a.to+=s),null==a.from?ve(n,a.marker)||(a.from=s,i&&(n||(n=[])).push(a)):(a.from+=s,i&&(n||(n=[])).push(a));if(n&&(n=xe(n)),o&&o!=n&&(o=xe(o)),e=[n],!i){var d;if(0<(t=t.text.length-2)&&n)for(i=0;i<n.length;++i)null==n[i].to&&(d||(d=[])).push(new me(n[i].marker,null,null));for(n=0;n<t;++n)e.push(d);e.push(o)}return e}function xe(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function be(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function we(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function Ce(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;n=e.find();var i=t.find(),r=ee(n.from,i.from)||(e.inclusiveLeft?-1:0)-(t.inclusiveLeft?-1:0);return r?-r:(n=ee(n.to,i.to)||(e.inclusiveRight?1:0)-(t.inclusiveRight?1:0))?n:t.id-e.id}function Se(e,t){if(e=Ao&&e.markedSpans)for(var n,i=0;i<e.length;++i)if((n=e[i]).marker.collapsed&&null==(t?n.from:n.to)&&(!r||Ce(r,n.marker)<0))var r=n.marker;return r}function ke(e,t,n,i,r){if(e=X(e,t),e=Ao&&e.markedSpans)for(t=0;t<e.length;++t){var o=e[t];if(o.marker.collapsed){var s=o.marker.find(0),a=ee(s.from,n)||(o.marker.inclusiveLeft?-1:0)-(r.inclusiveLeft?-1:0),l=ee(s.to,i)||(o.marker.inclusiveRight?1:0)-(r.inclusiveRight?1:0);if(!(0<=a&&l<=0||a<=0&&0<=l)&&(a<=0&&(o.marker.inclusiveRight&&r.inclusiveLeft?0<=ee(s.to,n):0<ee(s.to,n))||0<=a&&(o.marker.inclusiveRight&&r.inclusiveLeft?ee(s.from,i)<=0:ee(s.from,i)<0)))return!0}}}function Le(e){for(var t;t=Se(e,!0);)e=t.find(-1,!0).line;return e}function Me(e,t){var n=Le(e=X(e,t));return e==n?t:$(n)}function Te(e,t){if(t>e.lastLine())return t;var n=X(e,t);if(!De(e,n))return t;for(;e=Se(n,!1);)n=e.find(1,!0).line;return $(n)+1}function De(e,t){var n=Ao&&t.markedSpans;if(n)for(var i,r=0;r<n.length;++r)if((i=n[r]).marker.collapsed&&(null==i.from||!i.marker.widgetNode&&0==i.from&&i.marker.inclusiveLeft&&Ae(e,t,i)))return!0}function Ae(e,t,n){if(null==n.to)return Ae(e,(t=n.marker.find(1,!0)).line,ve(t.line.markedSpans,n.marker));if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var i,r=0;r<t.markedSpans.length;++r)if((i=t.markedSpans[r]).marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(null==i.to||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&Ae(e,t,i))return!0}function Ee(e){for(var t=0,n=(e=Le(e)).parent,i=0;i<n.lines.length;++i){var r=n.lines[i];if(r==e)break;t+=r.height}for(e=n.parent;e;e=(n=e).parent)for(i=0;i<e.children.length&&(r=e.children[i])!=n;++i)t+=r.height;return t}function Ne(e){if(0==e.height)return 0;for(var t,n=e.text.length,i=e;t=Se(i,!0);)i=(t=t.find(0,!0)).from.line,n+=t.from.ch-t.to.ch;for(i=e;t=Se(i,!1);)e=t.find(0,!0),n-=i.text.length-e.from.ch,n+=(i=e.to.line).text.length-e.to.ch;return n}function Oe(e){var n=e.display;e=e.doc,n.maxLine=X(e,e.first),n.maxLineLength=Ne(n.maxLine),n.maxLineChanged=!0,e.iter(function(e){var t=Ne(e);t>n.maxLineLength&&(n.maxLineLength=t,n.maxLine=e)})}function Fe(e,t){return!e||/^\s*$/.test(e)?null:(t=t.addModeClass?zo:Fo)[e]||(t[e]=e.replace(/\S+/g,"cm-$&"))}function ze(e,t){var n=E("span",null,null,Ar?"padding-right: .1px":null);n={pre:E("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")},t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var r=i?t.rest[i-1]:t.line,o=void 0;n.pos=0,n.addToken=Ie;var s=e.display.measure;if(null!=Kr)s=Kr;else{var a=A(s,document.createTextNode("AخA")),l=Vr(a,0,1).getBoundingClientRect();a=Vr(a,1,2).getBoundingClientRect(),D(s),s=!(!l||l.left==l.right)&&(Kr=a.right-l.right<3)}s&&(o=O(r,e.doc.direction))&&(n.addToken=He(n.addToken,o)),n.map=[];var u=t!=e.display.externalMeasured&&$(r);e:{var c=a=l=s=void 0,h=void 0,d=void 0,f=void 0;o=n,u=le(e,r,u);var p=r.markedSpans,g=r.text,m=0;if(p)for(var v=g.length,y=0,x=1,b="",w=0;;){if(w==y){h=c=a=d="",l=s=null,w=1/0;for(var C=[],S=void 0,k=0;k<p.length;++k){var L=p[k],M=L.marker;if("bookmark"==M.type&&L.from==y&&M.widgetNode)C.push(M);else if(L.from<=y&&(null==L.to||L.to>y||M.collapsed&&L.to==y&&L.from==y)){if(null!=L.to&&L.to!=y&&w>L.to&&(w=L.to,c=""),M.className&&(h+=" "+M.className),M.css&&(d=(d?d+";":"")+M.css),M.startStyle&&L.from==y&&(a+=" "+M.startStyle),M.endStyle&&L.to==w&&(S||(S=[])).push(M.endStyle,L.to),M.title&&((s||(s={})).title=M.title),M.attributes)for(var T in M.attributes)(s||(s={}))[T]=M.attributes[T];M.collapsed&&(!l||Ce(l.marker,M)<0)&&(l=L)}else L.from>y&&w>L.from&&(w=L.from)}if(S)for(k=0;k<S.length;k+=2)S[k+1]==w&&(c+=" "+S[k]);if(!l||l.from==y)for(S=0;S<C.length;++S)We(o,0,C[S]);if(l&&(l.from||0)==y){if(We(o,(null==l.to?v+1:l.to)-y,l.marker,null==l.from),null==l.to)break e;l.to==y&&(l=!1)}}if(v<=y)break;for(C=Math.min(v,w);;){if(b){if(S=y+b.length,l||(k=C<S?b.slice(0,C-y):b,o.addToken(o,k,f?f+h:h,a,y+k.length==w?c:"",d,s)),C<=S){b=b.slice(C-y),y=C;break}y=S,a=""}b=g.slice(m,m=u[x++]),f=Fe(u[x++],o.cm.options)}}else for(s=1;s<u.length;s+=2)o.addToken(o,g.slice(m,m=u[s]),Fe(u[s+1],o.cm.options))}r.styleClasses&&(r.styleClasses.bgClass&&(n.bgClass=N(r.styleClasses.bgClass,n.bgClass||"")),r.styleClasses.textClass&&(n.textClass=N(r.styleClasses.textClass,n.textClass||""))),0==n.map.length&&n.map.push(0,0,n.content.appendChild(W(e.display.measure))),0==i?(t.measure.map=n.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(n.map),(t.measure.caches||(t.measure.caches=[])).push({}))}return Ar&&(T=n.content.lastChild,/\bcm-tab\b/.test(T.className)||T.querySelector&&T.querySelector(".cm-tab"))&&(n.content.className="cm-tab-wrap-hack"),F(e,"renderLine",e,t.line,n.pre),n.pre.className&&(n.textClass=N(n.pre.className,n.textClass||"")),n}function Pe(e){var t=m("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Ie(e,t,n,i,r,o,s){if(t){if(e.splitSpaces){var a=e.trailingSpace;if(1<t.length&&!/  /.test(t))a=t;else{for(var l="",u=0;u<t.length;u++){var c=t.charAt(u);" "!=c||!a||u!=t.length-1&&32!=t.charCodeAt(u+1)||(c=" "),l+=c,a=" "==c}a=l}}else a=t;if(l=a,c=!1,(u=e.cm.state.specialChars).test(t)){a=document.createDocumentFragment();for(var h=0;;){u.lastIndex=h;var d=u.exec(t),f=d?d.index-h:t.length-h;if(f){var p=document.createTextNode(l.slice(h,h+f));Tr&&Dr<9?a.appendChild(m("span",[p])):a.appendChild(p),e.map.push(e.pos,e.pos+f,p),e.col+=f,e.pos+=f}if(!d)break;h+=f+1,"\t"==d[0]?(d=e.cm.options.tabSize,d-=e.col%d,(f=a.appendChild(m("span",w(d),"cm-tab"))).setAttribute("role","presentation"),f.setAttribute("cm-text","\t"),e.col+=d):("\r"==d[0]||"\n"==d[0]?(f=a.appendChild(m("span","\r"==d[0]?"␍":"␤","cm-invalidchar"))).setAttribute("cm-text",d[0]):((f=e.cm.options.specialCharPlaceholder(d[0])).setAttribute("cm-text",d[0]),Tr&&Dr<9?a.appendChild(m("span",[f])):a.appendChild(f)),e.col+=1),e.map.push(e.pos,e.pos+1,f),e.pos++}}else e.col+=t.length,a=document.createTextNode(l),e.map.push(e.pos,e.pos+t.length,a),Tr&&Dr<9&&(c=!0),e.pos+=t.length;if(e.trailingSpace=32==l.charCodeAt(t.length-1),n||i||r||c||o){if(t=n||"",i&&(t+=i),r&&(t+=r),i=m("span",[a],t,o),s)for(var g in s)s.hasOwnProperty(g)&&"style"!=g&&"class"!=g&&i.setAttribute(g,s[g]);return e.content.appendChild(i)}e.content.appendChild(a)}}function He(h,d){return function(e,t,n,i,r,o,s){n=n?n+" cm-force-border":"cm-force-border";for(var a=e.pos,l=a+t.length;;){for(var u=void 0,c=0;c<d.length&&!((u=d[c]).to>a&&u.from<=a);c++);if(u.to>=l)return h(e,t,n,i,r,o,s);h(e,t.slice(0,u.to-a),n,i,null,o,s),i=null,t=t.slice(u.to-a),a=u.to}}}function We(e,t,n,i){var r=!i&&n.widgetNode;r&&e.map.push(e.pos,e.pos+t,r),!i&&e.cm.display.input.needsContentAttribute&&(r||(r=e.content.appendChild(document.createElement("span"))),r.setAttribute("cm-marker",n.id)),r&&(e.cm.display.input.setUneditable(r),e.content.appendChild(r)),e.pos+=t,e.trailingSpace=!1}function _e(e,t,n){for(var i,r=this.line=t;r=Se(r,!1);)r=r.find(1,!0).line,(i||(i=[])).push(r);this.size=(this.rest=i)?$(g(this.rest))-n+1:1,this.node=this.text=null,this.hidden=De(e,t)}function Be(e,t,n){var i,r=[];for(i=t;i<n;)i+=(t=new _e(e.doc,X(e.doc,i),i)).size,r.push(t);return r}function Re(e,t){var n=e._handlers&&e._handlers[t]||fo;if(n.length){var i=Array.prototype.slice.call(arguments,2);if(Po)var r=Po.delayedCallbacks;else Io?r=Io:(r=Io=[],setTimeout(je,0));function o(e){r.push(function(){return n[e].apply(null,i)})}for(var s=0;s<n.length;++s)o(s)}}function je(){var e=Io;Io=null;for(var t=0;t<e.length;++t)e[t]()}function Ue(e,t,n,i){for(var r=0;r<t.changes.length;r++){var o=t.changes[r];if("text"==o){o=e;var s=t,a=s.text.className,l=Xe(o,s);s.text==s.node&&(s.node=l.pre),s.text.parentNode.replaceChild(l.pre,s.text),s.text=l.pre,l.bgClass!=s.bgClass||l.textClass!=s.textClass?(s.bgClass=l.bgClass,s.textClass=l.textClass,Ve(o,s)):a&&(s.text.className=a)}else if("gutter"==o)Ye(e,t,n,i);else if("class"==o)Ve(e,t);else if("widget"==o){o=e,a=i,(s=t).alignable&&(s.alignable=null),l=s.node.firstChild;for(var u;l;l=u)u=l.nextSibling,"CodeMirror-linewidget"==l.className&&s.node.removeChild(l);qe(o,s,a)}}t.changes=null}function Ge(e){return e.node==e.text&&(e.node=m("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),Tr&&Dr<8&&(e.node.style.zIndex=2)),e.node}function Xe(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):ze(e,t)}function Ve(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var i=Ge(t);t.background=i.insertBefore(m("div",null,n),i.firstChild),e.display.input.setUneditable(t.background)}t.line.wrapClass?Ge(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className=""),t.text.className=(t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass)||""}function Ye(e,t,n,i){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var r=Ge(t);t.gutterBackground=m("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px; width: "+i.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),r.insertBefore(t.gutterBackground,t.text)}if(r=t.line.gutterMarkers,e.options.lineNumbers||r){var o=Ge(t),s=t.gutter=m("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px");if(e.display.input.setUneditable(s),o.insertBefore(s,t.text),t.line.gutterClass&&(s.className+=" "+t.line.gutterClass),!e.options.lineNumbers||r&&r["CodeMirror-linenumbers"]||(t.lineNumber=s.appendChild(m("div",Q(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),r)for(t=0;t<e.display.gutterSpecs.length;++t)n=e.display.gutterSpecs[t].className,(o=r.hasOwnProperty(n)&&r[n])&&s.appendChild(m("div",[o],"CodeMirror-gutter-elt","left: "+i.gutterLeft[n]+"px; width: "+i.gutterWidth[n]+"px"))}}function qe(e,t,n){if($e(e,t.line,t,n,!0),t.rest)for(var i=0;i<t.rest.length;i++)$e(e,t.rest[i],t,n,!1)}function $e(e,t,n,i,r){if(t.widgets){var o=Ge(n),s=0;for(t=t.widgets;s<t.length;++s){var a=t[s],l=m("div",[a.node],"CodeMirror-linewidget");a.handleMouseEvents||l.setAttribute("cm-ignore-events","true");var u=a,c=l,h=i;if(u.noHScroll){(n.alignable||(n.alignable=[])).push(c);var d=h.wrapperWidth;c.style.left=h.fixedPos+"px",u.coverGutter||(d-=h.gutterTotalWidth,c.style.paddingLeft=h.gutterTotalWidth+"px"),c.style.width=d+"px"}u.coverGutter&&(c.style.zIndex=5,c.style.position="relative",u.noHScroll||(c.style.marginLeft=-h.gutterTotalWidth+"px")),e.display.input.setUneditable(l),r&&a.above?o.insertBefore(l,n.gutter||n.text):o.appendChild(l),Re(a,"redraw")}}}function Ke(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!c(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),A(t.display.measure,m("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function Ze(e,t){for(t=t.target||t.srcElement;t!=e.wrapper;t=t.parentNode)if(!t||1==t.nodeType&&"true"==t.getAttribute("cm-ignore-events")||t.parentNode==e.sizer&&t!=e.mover)return!0}function Qe(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Je(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=A(e.measure,m("pre","x"));return t=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,t={left:parseInt(t.paddingLeft),right:parseInt(t.paddingRight)},isNaN(t.left)||isNaN(t.right)||(e.cachedPaddingH=t),t}function et(e){return 30-e.display.nativeBarWidth}function tt(e){return e.display.scroller.clientWidth-et(e)-e.display.barWidth}function nt(e){return e.display.scroller.clientHeight-et(e)-e.display.barHeight}function it(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var i=0;i<e.rest.length;i++)if(e.rest[i]==t)return{map:e.measure.maps[i],cache:e.measure.caches[i]};for(t=0;t<e.rest.length;t++)if($(e.rest[t])>n)return{map:e.measure.maps[t],cache:e.measure.caches[t],before:!0}}function rt(e,t){return t>=e.display.viewFrom&&t<e.display.viewTo?e.display.view[Ot(e,t)]:(e=e.display.externalMeasured)&&t>=e.lineN&&t<e.lineN+e.size?e:void 0}function ot(e,t){var n=$(t),i=rt(e,n);if(i&&!i.text?i=null:i&&i.changes&&(Ue(e,i,n,Tt(e)),e.curOp.forceUpdate=!0),!i){var r=Le(t);i=$(r),(r=e.display.externalMeasured=new _e(e.doc,r,i)).lineN=i,i=r.built=ze(e,r),r.text=i.pre,A(e.display.lineMeasure,i.pre),i=r}return{line:t,view:i,rect:null,map:(e=it(i,t,n)).map,cache:e.cache,before:e.before,hasHeights:!1}}function st(e,t,n,i,r){t.before&&(n=-1);var o=n+(i||"");if(t.cache.hasOwnProperty(o))e=t.cache[o];else{if(t.rect||(t.rect=t.view.text.getBoundingClientRect()),!t.hasHeights){var s=t.view,a=t.rect,l=e.options.lineWrapping,u=l&&tt(e);if(!s.measure.heights||l&&s.measure.width!=u){var c=s.measure.heights=[];if(l)for(s.measure.width=u,s=s.text.firstChild.getClientRects(),l=0;l<s.length-1;l++){u=s[l];var h=s[l+1];2<Math.abs(u.bottom-h.bottom)&&c.push((u.bottom+h.top)/2-a.top)}c.push(a.bottom-a.top)}t.hasHeights=!0}if(c=i,i=(s=at(t.map,n,c)).node,a=s.start,l=s.end,n=s.collapse,3==i.nodeType){for(var d=0;d<4;d++){for(;a&&p(t.line.text.charAt(s.coverStart+a));)--a;for(;s.coverStart+l<s.coverEnd&&p(t.line.text.charAt(s.coverStart+l));)++l;if(Tr&&Dr<9&&0==a&&l==s.coverEnd-s.coverStart)var f=i.parentNode.getBoundingClientRect();else{if(f=Vr(i,a,l).getClientRects(),l=Ho,"left"==c)for(u=0;u<f.length&&(l=f[u]).left==l.right;u++);else for(u=f.length-1;0<=u&&(l=f[u]).left==l.right;u--);f=l}if(f.left||f.right||0==a)break;l=a,--a,n="right"}Tr&&Dr<11&&((d=!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI)||(d=!(d=null!=xo?xo:(d=(c=A(e.display.measure,m("span","x"))).getBoundingClientRect(),c=Vr(c,0,1).getBoundingClientRect(),xo=1<Math.abs(d.left-c.left)))),d||(d=screen.logicalXDPI/screen.deviceXDPI,c=screen.logicalYDPI/screen.deviceYDPI,f={left:f.left*d,right:f.right*d,top:f.top*c,bottom:f.bottom*c}))}else 0<a&&(n=c="right"),f=e.options.lineWrapping&&1<(d=i.getClientRects()).length?d["right"==c?d.length-1:0]:i.getBoundingClientRect();for(!(Tr&&Dr<9)||a||f&&(f.left||f.right)||(f=(f=i.parentNode.getClientRects()[0])?{left:f.left,right:f.left+Mt(e.display),top:f.top,bottom:f.bottom}:Ho),d=((i=f.top-t.rect.top)+(a=f.bottom-t.rect.top))/2,c=t.view.measure.heights,s=0;s<c.length-1&&!(d<c[s]);s++);n={left:("right"==n?f.right:f.left)-t.rect.left,right:("left"==n?f.left:f.right)-t.rect.left,top:s?c[s-1]:0,bottom:c[s]},f.left||f.right||(n.bogus=!0),e.options.singleCursorHeightPerLine||(n.rtop=i,n.rbottom=a),(e=n).bogus||(t.cache[o]=e)}return{left:e.left,right:e.right,top:r?e.rtop:e.top,bottom:r?e.rbottom:e.bottom}}function at(e,t,n){for(var i,r,o,s,a,l,u=0;u<e.length;u+=3)if(a=e[u],l=e[u+1],t<a?(r=0,o=1,s="left"):t<l?o=(r=t-a)+1:(u==e.length-3||t==l&&e[u+3]>t)&&(r=(o=l-a)-1,l<=t&&(s="right")),null!=r){if(i=e[u+2],a==l&&n==(i.insertLeft?"left":"right")&&(s=n),"left"==n&&0==r)for(;u&&e[u-2]==e[u-3]&&e[u-1].insertLeft;)i=e[2+(u-=3)],s="left";if("right"==n&&r==l-a)for(;u<e.length-3&&e[u+3]==e[u+4]&&!e[u+5].insertLeft;)i=e[(u+=3)+2],s="right";break}return{node:i,start:r,end:o,collapse:s,coverStart:a,coverEnd:l}}function lt(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function ut(e){e.display.externalMeasure=null,D(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)lt(e.display.view[t])}function ct(e){ut(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function ht(){return Nr&&Hr?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function dt(){return Nr&&Hr?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function ft(e){var t=0;if(e.widgets)for(var n=0;n<e.widgets.length;++n)e.widgets[n].above&&(t+=Ke(e.widgets[n]));return t}function pt(e,t,n,i,r){return r||(r=ft(t),n.top+=r,n.bottom+=r),"line"==i||(i||(i="local"),t=Ee(t),t="local"==i?t+e.display.lineSpace.offsetTop:t-e.display.viewOffset,"page"!=i&&"window"!=i||(t+=(e=e.display.lineSpace.getBoundingClientRect()).top+("window"==i?0:dt()),i=e.left+("window"==i?0:ht()),n.left+=i,n.right+=i),n.top+=t,n.bottom+=t),n}function gt(e,t,n){if("div"==n)return t;var i=t.left;return t=t.top,"page"==n?(i-=ht(),t-=dt()):"local"!=n&&n||(i+=(n=e.display.sizer.getBoundingClientRect()).left,t+=n.top),{left:i-(e=e.display.lineSpace.getBoundingClientRect()).left,top:t-e.top}}function mt(e,t,n,i,r){i||(i=X(e.doc,t.line));var o=i;return t=t.ch,pt(e,o,i=st(e,ot(e,i),t,r),n)}function vt(n,e,i,r,o,s){function a(e,t){return e=st(n,o,e,t?"right":"left",s),t?e.left=e.right:e.right=e.left,pt(n,r,e,i)}function t(e,t,n){return a(n?e-1:e,1==l[t].level!=n)}r=r||X(n.doc,e.line),o||(o=ot(n,r));var l=O(r,n.doc.direction),u=e.ch;if(e=e.sticky,u>=r.text.length?(u=r.text.length,e="before"):u<=0&&(u=0,e="after"),!l)return a("before"==e?u-1:u,"before"==e);var c=L(l,u,e),h=co;return c=t(u,c,"before"==e),null!=h&&(c.other=t(u,h,"before"!=e)),c}function yt(e,t){var n=0;return t=oe(e.doc,t),e.options.lineWrapping||(n=Mt(e.display)*t.ch),{left:n,right:n,top:e=Ee(t=X(e.doc,t.line))+e.display.lineSpace.offsetTop,bottom:e+t.height}}function xt(e,t,n,i,r){return(e=J(e,t,n)).xRel=r,i&&(e.outside=!0),e}function bt(e,t,n){var i=e.doc;if((n+=e.display.viewOffset)<0)return xt(i.first,0,null,!0,-1);var r=K(i,n),o=i.first+i.size-1;if(o<r)return xt(i.first+i.size-1,X(i,o).text.length,null,!0,1);t<0&&(t=0);for(var s=X(i,r);;){var a=void 0,l=(o=kt(e,s,r,t,n)).ch+(0<o.xRel?1:0);if(s=Ao&&s.markedSpans)for(var u=0;u<s.length;++u){var c=s[u];c.marker.collapsed&&(null==c.from||c.from<l)&&(null==c.to||c.to>l)&&(!a||Ce(a,c.marker)<0)&&(a=c.marker)}if(!a)return o;if((o=a.find(1)).line==r)return o;s=X(i,r=o.line)}}function wt(t,e,n,i){i-=ft(e);var r=k(function(e){return st(t,n,e-1).bottom<=i},e=e.text.length,0);return{begin:r,end:e=k(function(e){return st(t,n,e).top>i},r,e)}}function Ct(e,t,n,i){return n||(n=ot(e,t)),wt(e,t,n,i=pt(e,t,st(e,n,i),"line").top)}function St(e,t,n,i){return!(e.bottom<=n)&&(e.top>n||(i?e.left:e.right)>t)}function kt(n,e,t,i,r){r-=Ee(e);var o=ot(n,e),s=ft(e),a=0,l=e.text.length,u=!0,c=O(e,n.doc.direction);c&&(a=(u=1!=(c=(n.options.lineWrapping?function(e,t,n,i,r,o,s){s=wt(e,t,i,s),n=s.begin,s=s.end,/\s/.test(t.text.charAt(s-1))&&s--;for(var a=t=null,l=0;l<r.length;l++){var u=r[l];if(!(u.from>=s||u.to<=n)){var c=st(e,i,1!=u.level?Math.min(s,u.to)-1:Math.max(n,u.from)).right;c=c<o?o-c+1e9:c-o,(!t||c<a)&&(t=u,a=c)}}return t||(t=r[r.length-1]),t.from<n&&(t={from:n,to:t.to,level:t.level}),t.to>s&&(t={from:t.from,to:s,level:t.level}),t}:function(n,i,r,o,s,a,l){var e=k(function(e){var t=1!=(e=s[e]).level;return St(vt(n,J(r,t?e.to:e.from,t?"before":"after"),"line",i,o),a,l,!0)},0,s.length-1),t=s[e];if(0<e){var u=1!=t.level;St(u=vt(n,J(r,u?t.from:t.to,u?"after":"before"),"line",i,o),a,l,!0)&&u.top>l&&(t=s[e-1])}return t})(n,e,t,o,c,i,r)).level)?c.from:c.to-1,l=u?c.to:c.from-1);var h=null,d=null;c=k(function(e){var t=st(n,o,e);return t.top+=s,t.bottom+=s,!!St(t,i,r,!1)&&(t.top<=r&&t.left<=i&&(h=e,d=t),!0)},a,l);var f=!1;return d?(a=i-d.left<d.right-i,c=h+((u=a==u)?0:1),u=u?"after":"before",a=a?d.left:d.right):(u||c!=l&&c!=a||c++,u=0==c?"after":c==e.text.length?"before":st(n,o,c-(u?1:0)).bottom+s<=r==u?"after":"before",a=(f=vt(n,J(t,c,u),"line",e,o)).left,f=r<f.top||r>=f.bottom),xt(t,c=S(e.text,c,1),u,f,i-a)}function Lt(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Oo){Oo=m("pre");for(var t=0;t<49;++t)Oo.appendChild(document.createTextNode("x")),Oo.appendChild(m("br"));Oo.appendChild(document.createTextNode("x"))}return A(e.measure,Oo),3<(t=Oo.offsetHeight/50)&&(e.cachedTextHeight=t),D(e.measure),t||1}function Mt(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=m("span","xxxxxxxxxx"),n=m("pre",[t]);return A(e.measure,n),2<(t=((t=t.getBoundingClientRect()).right-t.left)/10)&&(e.cachedCharWidth=t),t||10}function Tt(e){for(var t=e.display,n={},i={},r=t.gutters.clientLeft,o=t.gutters.firstChild,s=0;o;o=o.nextSibling,++s){var a=e.display.gutterSpecs[s].className;n[a]=o.offsetLeft+o.clientLeft+r,i[a]=o.clientWidth}return{fixedPos:Dt(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:t.wrapper.clientWidth}}function Dt(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function At(i){var r=Lt(i.display),o=i.options.lineWrapping,s=o&&Math.max(5,i.display.scroller.clientWidth/Mt(i.display)-3);return function(e){if(De(i.doc,e))return 0;var t=0;if(e.widgets)for(var n=0;n<e.widgets.length;n++)e.widgets[n].height&&(t+=e.widgets[n].height);return o?t+(Math.ceil(e.text.length/s)||1)*r:t+r}}function Et(e){var t=e.doc,n=At(e);t.iter(function(e){var t=n(e);t!=e.height&&q(e,t)})}function Nt(e,t,n,i){var r,o=e.display;if(!n&&"true"==(t.target||t.srcElement).getAttribute("cm-not-content"))return null;n=o.lineSpace.getBoundingClientRect();try{var s=t.clientX-n.left,a=t.clientY-n.top}catch(e){return null}return t=bt(e,s,a),i&&1==t.xRel&&(r=X(e.doc,t.line).text).length==t.ch&&(i=x(r,r.length,e.options.tabSize)-r.length,t=J(t.line,Math.max(0,Math.round((s-Je(e.display).left)/Mt(e.display))-i))),t}function Ot(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;e=e.display.view;for(var n=0;n<e.length;n++)if((t-=e[n].size)<0)return n}function Ft(e,t,n,i){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),i||(i=0);var r=e.display;if(i&&n<r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>t)&&(r.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=r.viewTo)Ao&&Me(e.doc,t)<r.viewTo&&Pt(e);else if(n<=r.viewFrom)Ao&&Te(e.doc,n+i)>r.viewFrom?Pt(e):(r.viewFrom+=i,r.viewTo+=i);else if(t<=r.viewFrom&&n>=r.viewTo)Pt(e);else if(t<=r.viewFrom){var o=It(e,n,n+i,1);o?(r.view=r.view.slice(o.index),r.viewFrom=o.lineN,r.viewTo+=i):Pt(e)}else if(n>=r.viewTo)(o=It(e,t,t,-1))?(r.view=r.view.slice(0,o.index),r.viewTo=o.lineN):Pt(e);else{o=It(e,t,t,-1);var s=It(e,n,n+i,1);o&&s?(r.view=r.view.slice(0,o.index).concat(Be(e,o.lineN,s.lineN)).concat(r.view.slice(s.index)),r.viewTo+=i):Pt(e)}(e=r.externalMeasured)&&(n<e.lineN?e.lineN+=i:t<e.lineN+e.size&&(r.externalMeasured=null))}function zt(e,t,n){e.curOp.viewChanged=!0;var i=e.display,r=e.display.externalMeasured;r&&t>=r.lineN&&t<r.lineN+r.size&&(i.externalMeasured=null),t<i.viewFrom||t>=i.viewTo||(null==(e=i.view[Ot(e,t)]).node||-1==v(e=e.changes||(e.changes=[]),n)&&e.push(n))}function Pt(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function It(e,t,n,i){var r=Ot(e,t),o=e.display.view;if(!Ao||n==e.doc.first+e.doc.size)return{index:r,lineN:n};for(var s=e.display.viewFrom,a=0;a<r;a++)s+=o[a].size;if(s!=t){if(0<i){if(r==o.length-1)return null;t=s+o[r].size-t,r++}else t=s-t;n+=t}for(;Me(e.doc,n)!=n;){if(r==(i<0?0:o.length-1))return null;n+=i*o[r-(i<0?1:0)].size,r+=i}return{index:r,lineN:n}}function Ht(e){e=e.display.view;for(var t=0,n=0;n<e.length;n++){var i=e[n];i.hidden||i.node&&!i.changes||++t}return t}function Wt(e){e.display.input.showSelection(e.display.input.prepareSelection())}function _t(e,t){void 0===t&&(t=!0);for(var n=e.doc,i={},r=i.cursors=document.createDocumentFragment(),o=i.selection=document.createDocumentFragment(),s=0;s<n.sel.ranges.length;s++)if(t||s!=n.sel.primIndex){var a=n.sel.ranges[s];if(!(a.from().line>=e.display.viewTo||a.to().line<e.display.viewFrom)){var l=a.empty();(l||e.options.showCursorWhenSelecting)&&Bt(e,a.head,r),l||jt(e,a,o)}}return i}function Bt(e,t,n){t=vt(e,t,"div",null,null,!e.options.singleCursorHeightPerLine);var i=n.appendChild(m("div"," ","CodeMirror-cursor"));i.style.left=t.left+"px",i.style.top=t.top+"px",i.style.height=Math.max(0,t.bottom-t.top)*e.options.cursorHeight+"px",t.other&&((e=n.appendChild(m("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"))).style.display="",e.style.left=t.other.left+"px",e.style.top=t.other.top+"px",e.style.height=.85*(t.other.bottom-t.other.top)+"px")}function Rt(e,t){return e.top-t.top||e.left-t.left}function jt(r,e,t){function y(e,t,n,i){t<0&&(t=0),t=Math.round(t),i=Math.round(i),s.appendChild(m("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==n?b-e:n)+"px;\n                             height: "+(i-t)+"px"))}function n(n,c,h){function d(e,t){return mt(r,J(n,e),"div",i,t)}function f(e,t,n){return e=Ct(r,i,null,e),t="ltr"==t==("after"==n)?"left":"right",d(n="after"==n?e.begin:e.end-(/\s/.test(i.text.charAt(e.end-1))?2:1),t)[t]}var p,g,i=X(o,n),m=i.text.length,v=O(i,o.direction);return function(e,t,n,i){if(!e)return i(t,n,"ltr",0);for(var r=!1,o=0;o<e.length;++o){var s=e[o];(s.from<n&&s.to>t||t==n&&s.to==t)&&(i(Math.max(s.from,t),Math.min(s.to,n),1==s.level?"rtl":"ltr",o),r=!0)}r||i(t,n,"ltr")}(v,c||0,null==h?m:h,function(e,t,n,i){var r="ltr"==n,o=d(e,r?"left":"right"),s=d(t-1,r?"right":"left"),a=null==c&&0==e,l=null==h&&t==m,u=0==i;i=!v||i==v.length-1,s.top-o.top<=3?y(t=(w?a:l)&&u?x:(r?o:s).left,o.top,((w?l:a)&&i?b:(r?s:o).right)-t,o.bottom):(l=r?(r=w&&a&&u?x:o.left,a=w?b:f(e,n,"before"),e=w?x:f(t,n,"after"),w&&l&&i?b:s.right):(r=w?f(e,n,"before"):x,a=!w&&a&&u?b:o.right,e=!w&&l&&i?x:s.left,w?f(t,n,"after"):b),y(r,o.top,a-r,o.bottom),o.bottom<s.top&&y(x,o.bottom,null,s.top),y(e,s.top,l-e,s.bottom)),(!p||Rt(o,p)<0)&&(p=o),Rt(s,p)<0&&(p=s),(!g||Rt(o,g)<0)&&(g=o),Rt(s,g)<0&&(g=s)}),{start:p,end:g}}var i=r.display,o=r.doc,s=document.createDocumentFragment(),a=Je(r.display),x=a.left,b=Math.max(i.sizerWidth,tt(r)-i.sizer.offsetLeft)-a.right,w="ltr"==o.direction;if(i=e.from(),e=e.to(),i.line==e.line)n(i.line,i.ch,e.ch);else{var l=X(o,i.line);a=X(o,e.line),a=Le(l)==Le(a),i=n(i.line,i.ch,a?l.text.length+1:null).end,e=n(e.line,a?0:null,e.ch).start,a&&(i.top<e.top-2?(y(i.right,i.top,null,i.bottom),y(x,e.top,e.left,e.bottom)):y(i.right,i.top,e.left-i.right,i.bottom)),i.bottom<e.top&&y(x,i.bottom,null,e.top)}t.appendChild(s)}function Ut(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",0<e.options.cursorBlinkRate?t.blinker=setInterval(function(){return t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function Gt(e){e.state.focused||(e.display.input.focus(),Vt(e))}function Xt(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,Yt(e))},100)}function Vt(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(F(e,"focus",e,t),e.state.focused=!0,i(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),Ar&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),Ut(e))}function Yt(e,t){e.state.delayingBlurEvent||(e.state.focused&&(F(e,"blur",e,t),e.state.focused=!1,Xr(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function qt(e){for(var t=e.display,n=t.lineDiv.offsetTop,i=0;i<t.view.length;i++){var r=t.view[i],o=e.options.lineWrapping,s=0;if(!r.hidden){if(Tr&&Dr<8){var a=(o=r.node.offsetTop+r.node.offsetHeight)-n;n=o}else{var l=r.node.getBoundingClientRect();a=l.bottom-l.top,!o&&r.text.firstChild&&(s=r.text.firstChild.getBoundingClientRect().right-l.left-1)}if((.005<(o=r.line.height-a)||o<-.005)&&(q(r.line,a),$t(r.line),r.rest))for(a=0;a<r.rest.length;a++)$t(r.rest[a]);s>e.display.sizerWidth&&((s=Math.ceil(s/Mt(e.display)))>e.display.maxLineLength&&(e.display.maxLineLength=s,e.display.maxLine=r.line,e.display.maxLineChanged=!0))}}}function $t(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],i=n.node.parentNode;i&&(n.height=i.offsetHeight)}}function Kt(e,t,n){var i=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;i=Math.floor(i-e.lineSpace.offsetTop);var r=n&&null!=n.bottom?n.bottom:i+e.wrapper.clientHeight;if(i=K(t,i),r=K(t,r),n&&n.ensure){var o=n.ensure.from.line;n=n.ensure.to.line,o<i?r=K(t,Ee(X(t,i=o))+e.wrapper.clientHeight):Math.min(n,t.lastLine())>=r&&(i=K(t,Ee(X(t,n))-e.wrapper.clientHeight),r=n)}return{from:i,to:Math.max(r,i+1)}}function Zt(e,t){var n=e.display,i=Lt(e.display);t.top<0&&(t.top=0);var r=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop,o=nt(e),s={};t.bottom-t.top>o&&(t.bottom=t.top+o);var a=e.doc.height+Qe(n),l=t.top<i;return i=t.bottom>a-i,t.top<r?s.scrollTop=l?0:t.top:t.bottom>r+o&&((o=Math.min(t.top,(i?a:t.bottom)-o))!=r&&(s.scrollTop=o)),r=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft,e=tt(e)-(e.options.fixedGutter?n.gutters.offsetWidth:0),(n=t.right-t.left>e)&&(t.right=t.left+e),t.left<10?s.scrollLeft=0:t.left<r?s.scrollLeft=Math.max(0,t.left-(n?0:10)):t.right>e+r-3&&(s.scrollLeft=t.right+(n?0:10)-e),s}function Qt(e,t){null!=t&&(tn(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Jt(e){tn(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function en(e,t,n){null==t&&null==n||tn(e),null!=t&&(e.curOp.scrollLeft=t),null!=n&&(e.curOp.scrollTop=n)}function tn(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,nn(e,yt(e,t.from),yt(e,t.to),t.margin))}function nn(e,t,n,i){en(e,(t=Zt(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-i,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+i})).scrollLeft,t.scrollTop)}function rn(e,t){Math.abs(e.doc.scrollTop-t)<2||(Sr||wn(e,{top:t}),on(e,t,!0),Sr&&wn(e),vn(e,100))}function on(e,t,n){t=Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t),e.display.scroller.scrollTop==t&&!n||(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function sn(e,t,n,i){t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!i||(e.doc.scrollLeft=t,kn(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function an(e){var t=e.display,n=t.gutters.offsetWidth,i=Math.round(e.doc.height+Qe(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:i,scrollHeight:i+et(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}function ln(e,t){t||(t=an(e));var n=e.display.barWidth,i=e.display.barHeight;for(un(e,t),t=0;t<4&&n!=e.display.barWidth||i!=e.display.barHeight;t++)n!=e.display.barWidth&&e.options.lineWrapping&&qt(e),un(e,an(e)),n=e.display.barWidth,i=e.display.barHeight}function un(e,t){var n=e.display,i=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=i.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=i.bottom)+"px",n.heightForcer.style.borderBottom=i.bottom+"px solid transparent",i.right&&i.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=i.bottom+"px",n.scrollbarFiller.style.width=i.right+"px"):n.scrollbarFiller.style.display="",i.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=i.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}function cn(n){n.display.scrollbars&&(n.display.scrollbars.clear(),n.display.scrollbars.addClass&&Xr(n.display.wrapper,n.display.scrollbars.addClass)),n.display.scrollbars=new _o[n.options.scrollbarStyle](function(e){n.display.wrapper.insertBefore(e,n.display.scrollbarFiller),po(e,"mousedown",function(){n.state.focused&&setTimeout(function(){return n.display.input.focus()},0)}),e.setAttribute("cm-not-content","true")},function(e,t){"horizontal"==t?sn(n,e):rn(n,e)},n),n.display.scrollbars.addClass&&i(n.display.wrapper,n.display.scrollbars.addClass)}function hn(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Bo},e=e.curOp,Po?Po.ops.push(e):e.ownsGroup=Po={ops:[e],delayedCallbacks:[]}}function dn(e){(e=e.curOp)&&function(e,t){if(e=e.ownsGroup)try{var n=e.delayedCallbacks,i=0;do{for(;i<n.length;i++)n[i].call(null);for(var r=0;r<e.ops.length;r++){var o=e.ops[r];if(o.cursorActivityHandlers)for(;o.cursorActivityCalled<o.cursorActivityHandlers.length;)o.cursorActivityHandlers[o.cursorActivityCalled++].call(null,o.cm)}}while(i<n.length)}finally{Po=null,t(e)}}(e,function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;for(e=e.ops,t=0;t<e.length;t++){var n=e[t],i=n.cm,r=i.display,o=i.display;!o.scrollbarsClipped&&o.scroller.offsetWidth&&(o.nativeBarWidth=o.scroller.offsetWidth-o.scroller.clientWidth,o.heightForcer.style.height=et(i)+"px",o.sizer.style.marginBottom=-o.nativeBarWidth+"px",o.sizer.style.borderRightWidth=et(i)+"px",o.scrollbarsClipped=!0),n.updateMaxLine&&Oe(i),n.mustUpdate=n.viewChanged||n.forceUpdate||null!=n.scrollTop||n.scrollToPos&&(n.scrollToPos.from.line<r.viewFrom||n.scrollToPos.to.line>=r.viewTo)||r.maxLineChanged&&i.options.lineWrapping,n.update=n.mustUpdate&&new Ro(i,n.mustUpdate&&{top:n.scrollTop,ensure:n.scrollToPos},n.forceUpdate)}for(t=0;t<e.length;t++)(n=e[t]).updatedDisplay=n.mustUpdate&&xn(n.cm,n.update);for(t=0;t<e.length;t++)r=(i=(n=e[t]).cm).display,n.updatedDisplay&&qt(i),n.barMeasure=an(i),r.maxLineChanged&&!i.options.lineWrapping&&(o=r.maxLine.text.length,o=st(i,ot(i,r.maxLine),o,void 0),n.adjustWidthTo=o.left+3,i.display.sizerWidth=n.adjustWidthTo,n.barMeasure.scrollWidth=Math.max(r.scroller.clientWidth,r.sizer.offsetLeft+n.adjustWidthTo+et(i)+i.display.barWidth),n.maxScrollLeft=Math.max(0,r.sizer.offsetLeft+n.adjustWidthTo-tt(i))),(n.updatedDisplay||n.selectionChanged)&&(n.preparedSelection=r.input.prepareSelection());for(t=0;t<e.length;t++)i=(n=e[t]).cm,null!=n.adjustWidthTo&&(i.display.sizer.style.minWidth=n.adjustWidthTo+"px",n.maxScrollLeft<i.doc.scrollLeft&&sn(i,Math.min(i.display.scroller.scrollLeft,n.maxScrollLeft),!0),i.display.maxLineChanged=!1),r=n.focus&&n.focus==y(),n.preparedSelection&&i.display.input.showSelection(n.preparedSelection,r),!n.updatedDisplay&&n.startHeight==i.doc.height||ln(i,n.barMeasure),n.updatedDisplay&&Sn(i,n.barMeasure),n.selectionChanged&&Ut(i),i.state.focused&&n.updateInput&&i.display.input.reset(n.typing),r&&Gt(n.cm);for(t=0;t<e.length;t++){var s=void 0;if(r=(i=(n=e[t]).cm).display,o=i.doc,n.updatedDisplay&&bn(i,n.update),null==r.wheelStartX||null==n.scrollTop&&null==n.scrollLeft&&!n.scrollToPos||(r.wheelStartX=r.wheelStartY=null),null!=n.scrollTop&&on(i,n.scrollTop,n.forceScroll),null!=n.scrollLeft&&sn(i,n.scrollLeft,!0,!0),n.scrollToPos){var a=oe(o,n.scrollToPos.from),l=oe(o,n.scrollToPos.to),u=n.scrollToPos.margin;null==u&&(u=0),i.options.lineWrapping||a!=l||(l="before"==(a=a.ch?J(a.line,"before"==a.sticky?a.ch-1:a.ch,"after"):a).sticky?J(a.line,a.ch+1,"before"):a);for(var c=0;c<5;c++){var h=!1;s=vt(i,a);var d=l&&l!=a?vt(i,l):s;d=Zt(i,s={left:Math.min(s.left,d.left),top:Math.min(s.top,d.top)-u,right:Math.max(s.left,d.left),bottom:Math.max(s.bottom,d.bottom)+u});var f=i.doc.scrollTop,p=i.doc.scrollLeft;if(null!=d.scrollTop&&(rn(i,d.scrollTop),1<Math.abs(i.doc.scrollTop-f)&&(h=!0)),null!=d.scrollLeft&&(sn(i,d.scrollLeft),1<Math.abs(i.doc.scrollLeft-p)&&(h=!0)),!h)break}l=s,T(i,"scrollCursorIntoView")||(c=(u=i.display).sizer.getBoundingClientRect(),a=null,l.top+c.top<0?a=!0:l.bottom+c.top>(window.innerHeight||document.documentElement.clientHeight)&&(a=!1),null==a||Pr||(l=m("div","​",null,"position: absolute;\n                         top: "+(l.top-u.viewOffset-i.display.lineSpace.offsetTop)+"px;\n                         height: "+(l.bottom-l.top+et(i)+u.barHeight)+"px;\n                         left: "+l.left+"px; width: "+Math.max(2,l.right-l.left)+"px;"),i.display.lineSpace.appendChild(l),l.scrollIntoView(a),i.display.lineSpace.removeChild(l)))}if(l=n.maybeHiddenMarkers,a=n.maybeUnhiddenMarkers,l)for(u=0;u<l.length;++u)l[u].lines.length||F(l[u],"hide");if(a)for(l=0;l<a.length;++l)a[l].lines.length&&F(a[l],"unhide");r.wrapper.offsetHeight&&(o.scrollTop=i.display.scroller.scrollTop),n.changeObjs&&F(i,"changes",i,n.changeObjs),n.update&&n.update.finish()}})}function fn(e,t){if(e.curOp)return t();hn(e);try{return t()}finally{dn(e)}}function pn(e,t){return function(){if(e.curOp)return t.apply(e,arguments);hn(e);try{return t.apply(e,arguments)}finally{dn(e)}}}function gn(e){return function(){if(this.curOp)return e.apply(this,arguments);hn(this);try{return e.apply(this,arguments)}finally{dn(this)}}}function mn(t){return function(){var e=this.cm;if(!e||e.curOp)return t.apply(this,arguments);hn(e);try{return t.apply(this,arguments)}finally{dn(e)}}}function vn(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,l(yn,e))}function yn(r){var o=r.doc;if(!(o.highlightFrontier>=r.display.viewTo)){var s=+new Date+r.options.workTime,a=ue(r,o.highlightFrontier),l=[];o.iter(a.line,Math.min(o.first+o.size,r.display.viewTo+500),function(e){if(a.line>=r.display.viewFrom){var t=e.styles,n=e.text.length>r.options.maxHighlightLength?j(o.mode,a.state):null,i=ae(r,e,a,!0);for(n&&(a.state=n),e.styles=i.styles,n=e.styleClasses,(i=i.classes)?e.styleClasses=i:n&&(e.styleClasses=null),i=!t||t.length!=e.styles.length||n!=i&&(!n||!i||n.bgClass!=i.bgClass||n.textClass!=i.textClass),n=0;!i&&n<t.length;++n)i=t[n]!=e.styles[n];i&&l.push(a.line),e.stateAfter=a.save()}else e.text.length<=r.options.maxHighlightLength&&ce(r,e.text,a),e.stateAfter=0==a.line%5?a.save():null;if(a.nextLine(),+new Date>s)return vn(r,r.options.workDelay),!0}),o.highlightFrontier=a.line,o.modeFrontier=Math.max(o.modeFrontier,a.line),l.length&&fn(r,function(){for(var e=0;e<l.length;e++)zt(r,l[e],"text")})}}function xn(e,t){var n=e.display,i=e.doc;if(t.editorIsHidden)return Pt(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==Ht(e))return!1;Ln(e)&&(Pt(e),t.dims=Tt(e));var r=i.first+i.size,o=Math.max(t.visible.from-e.options.viewportMargin,i.first),s=Math.min(r,t.visible.to+e.options.viewportMargin);return n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(i.first,n.viewFrom)),n.viewTo>s&&n.viewTo-s<20&&(s=Math.min(r,n.viewTo)),Ao&&(o=Me(e.doc,o),s=Te(e.doc,s)),i=o!=n.viewFrom||s!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth,0==(r=e.display).view.length||o>=r.viewTo||s<=r.viewFrom?(r.view=Be(e,o,s),r.viewFrom=o):(r.viewFrom>o?r.view=Be(e,o,r.viewFrom).concat(r.view):r.viewFrom<o&&(r.view=r.view.slice(Ot(e,o))),r.viewFrom=o,r.viewTo<s?r.view=r.view.concat(Be(e,r.viewTo,s)):r.viewTo>s&&(r.view=r.view.slice(0,Ot(e,s)))),r.viewTo=s,n.viewOffset=Ee(X(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px",s=Ht(e),!(!i&&0==s&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))&&(e.hasFocus()?o=null:(o=y())&&c(e.display.lineDiv,o)?(o={activeElt:o},window.getSelection&&((r=window.getSelection()).anchorNode&&r.extend&&c(e.display.lineDiv,r.anchorNode)&&(o.anchorNode=r.anchorNode,o.anchorOffset=r.anchorOffset,o.focusNode=r.focusNode,o.focusOffset=r.focusOffset))):o=null,4<s&&(n.lineDiv.style.display="none"),function(n,e,t){function i(e){var t=e.nextSibling;return Ar&&_r&&n.display.currentWheelTarget==e?e.style.display="none":e.parentNode.removeChild(e),t}var r=n.display,o=n.options.lineNumbers,s=r.lineDiv,a=s.firstChild,l=r.view;r=r.viewFrom;for(var u=0;u<l.length;u++){var c=l[u];if(!c.hidden)if(c.node&&c.node.parentNode==s){for(;a!=c.node;)a=i(a);a=o&&null!=e&&e<=r&&c.lineNumber,c.changes&&(-1<v(c.changes,"gutter")&&(a=!1),Ue(n,c,r,t)),a&&(D(c.lineNumber),c.lineNumber.appendChild(document.createTextNode(Q(n.options,r)))),a=c.node.nextSibling}else{var h=(p=r,g=t,void 0,m=Xe(d=n,f=c),f.text=f.node=m.pre,m.bgClass&&(f.bgClass=m.bgClass),m.textClass&&(f.textClass=m.textClass),Ve(d,f),Ye(d,f,p,g),qe(d,f,g),f.node);s.insertBefore(h,a)}r+=c.size}var d,f,p,g,m;for(;a;)a=i(a)}(e,n.updateLineNumbers,t.dims),4<s&&(n.lineDiv.style.display=""),n.renderedView=n.view,(s=o)&&s.activeElt&&s.activeElt!=y()&&(s.activeElt.focus(),s.anchorNode&&c(document.body,s.anchorNode)&&c(document.body,s.focusNode)&&(o=window.getSelection(),(r=document.createRange()).setEnd(s.anchorNode,s.anchorOffset),r.collapse(!1),o.removeAllRanges(),o.addRange(r),o.extend(s.focusNode,s.focusOffset))),D(n.cursorDiv),D(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,i&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,vn(e,400)),!(n.updateLineNumbers=null))}function bn(e,t){for(var n=t.viewport,i=!0;(i&&e.options.lineWrapping&&t.oldDisplayWidth!=tt(e)||(n&&null!=n.top&&(n={top:Math.min(e.doc.height+Qe(e.display)-nt(e),n.top)}),t.visible=Kt(e.display,e.doc,n),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&xn(e,t);i=!1)qt(e),i=an(e),Wt(e),ln(e,i),Sn(e,i),t.force=!1;t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function wn(e,t){if(xn(e,t=new Ro(e,t))){qt(e),bn(e,t);var n=an(e);Wt(e),ln(e,n),Sn(e,n),t.finish()}}function Cn(e){e.sizer.style.marginLeft=e.gutters.offsetWidth+"px"}function Sn(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+et(e)+"px"}function kn(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var i=Dt(t)-t.scroller.scrollLeft+e.doc.scrollLeft,r=t.gutters.offsetWidth,o=i+"px",s=0;s<n.length;s++)if(!n[s].hidden){e.options.fixedGutter&&(n[s].gutter&&(n[s].gutter.style.left=o),n[s].gutterBackground&&(n[s].gutterBackground.style.left=o));var a=n[s].alignable;if(a)for(var l=0;l<a.length;l++)a[l].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=i+r+"px")}}function Ln(e){if(!e.options.lineNumbers)return!1;var t=e.doc;t=Q(e.options,t.first+t.size-1);var n=e.display;if(t.length==n.lineNumChars)return!1;var i=n.measure.appendChild(m("div",[m("div",t)],"CodeMirror-linenumber CodeMirror-gutter-elt")),r=i.firstChild.offsetWidth;return i=i.offsetWidth-r,n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(r,n.lineGutter.offsetWidth-i)+1,n.lineNumWidth=n.lineNumInnerWidth+i,n.lineNumChars=n.lineNumInnerWidth?t.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",Cn(e.display),!0}function Mn(e,t){for(var n=[],i=!1,r=0;r<e.length;r++){var o=e[r],s=null;if("string"!=typeof o&&(s=o.style,o=o.className),"CodeMirror-linenumbers"==o){if(!t)continue;i=!0}n.push({className:o,style:s})}return t&&!i&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function Tn(e){var t=e.gutters,n=e.gutterSpecs;D(t),e.lineGutter=null;for(var i=0;i<n.length;++i){var r=n[i],o=r.className;r=r.style;var s=t.appendChild(m("div",null,"CodeMirror-gutter "+o));r&&(s.style.cssText=r),"CodeMirror-linenumbers"==o&&((e.lineGutter=s).style.width=(e.lineNumWidth||1)+"px")}t.style.display=n.length?"":"none",Cn(e)}function Dn(e){Tn(e.display),Ft(e),kn(e)}function An(e,t,n,i){this.input=n,this.scrollbarFiller=m("div",null,"CodeMirror-scrollbar-filler"),this.scrollbarFiller.setAttribute("cm-not-content","true"),this.gutterFiller=m("div",null,"CodeMirror-gutter-filler"),this.gutterFiller.setAttribute("cm-not-content","true"),this.lineDiv=E("div",null,"CodeMirror-code"),this.selectionDiv=m("div",null,null,"position: relative; z-index: 1"),this.cursorDiv=m("div",null,"CodeMirror-cursors"),this.measure=m("div",null,"CodeMirror-measure"),this.lineMeasure=m("div",null,"CodeMirror-measure"),this.lineSpace=E("div",[this.measure,this.lineMeasure,this.selectionDiv,this.cursorDiv,this.lineDiv],null,"position: relative; outline: none");var r=E("div",[this.lineSpace],"CodeMirror-lines");this.mover=m("div",[r],null,"position: relative"),this.sizer=m("div",[this.mover],"CodeMirror-sizer"),this.sizerWidth=null,this.heightForcer=m("div",null,null,"position: absolute; height: 30px; width: 1px;"),this.gutters=m("div",null,"CodeMirror-gutters"),this.lineGutter=null,this.scroller=m("div",[this.sizer,this.heightForcer,this.gutters],"CodeMirror-scroll"),this.scroller.setAttribute("tabIndex","-1"),this.wrapper=m("div",[this.scrollbarFiller,this.gutterFiller,this.scroller],"CodeMirror"),Tr&&Dr<8&&(this.gutters.style.zIndex=-1,this.scroller.style.paddingRight=0),Ar||Sr&&Wr||(this.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(this.wrapper):e(this.wrapper)),this.reportedViewFrom=this.reportedViewTo=this.viewFrom=this.viewTo=t.first,this.view=[],this.externalMeasured=this.renderedView=null,this.lastWrapHeight=this.lastWrapWidth=this.viewOffset=0,this.updateLineNumbers=null,this.nativeBarWidth=this.barHeight=this.barWidth=0,this.scrollbarsClipped=!1,this.lineNumWidth=this.lineNumInnerWidth=this.lineNumChars=null,this.alignWidgets=!1,this.maxLine=this.cachedCharWidth=this.cachedTextHeight=this.cachedPaddingH=null,this.maxLineLength=0,this.maxLineChanged=!1,this.wheelDX=this.wheelDY=this.wheelStartX=this.wheelStartY=null,this.shift=!1,this.activeTouch=this.selForContextMenu=null,this.gutterSpecs=Mn(i.gutters,i.lineNumbers),Tn(this),n.init(this)}function En(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function Nn(e){return(e=En(e)).x*=Uo,e.y*=Uo,e}function On(e,t){var n=En(t),i=n.x;n=n.y;var r=e.display,o=r.scroller,s=o.scrollWidth>o.clientWidth,a=o.scrollHeight>o.clientHeight;if(i&&s||n&&a){if(n&&_r&&Ar){s=t.target;var l=r.view;e:for(;s!=o;s=s.parentNode)for(var u=0;u<l.length;u++)if(l[u].node==s){e.display.currentWheelTarget=s;break e}}!i||Sr||Or||null==Uo?(n&&null!=Uo&&(t=n*Uo,s=(a=e.doc.scrollTop)+r.wrapper.clientHeight,t<0?a=Math.max(0,a+t-50):s=Math.min(e.doc.height,s+t+50),wn(e,{top:a,bottom:s})),jo<20&&(null==r.wheelStartX?(r.wheelStartX=o.scrollLeft,r.wheelStartY=o.scrollTop,r.wheelDX=i,r.wheelDY=n,setTimeout(function(){if(null!=r.wheelStartX){var e=o.scrollLeft-r.wheelStartX,t=o.scrollTop-r.wheelStartY;e=t&&r.wheelDY&&t/r.wheelDY||e&&r.wheelDX&&e/r.wheelDX,r.wheelStartX=r.wheelStartY=null,e&&(Uo=(Uo*jo+e)/(jo+1),++jo)}},200)):(r.wheelDX+=i,r.wheelDY+=n))):(n&&a&&rn(e,Math.max(0,o.scrollTop+n*Uo)),sn(e,Math.max(0,o.scrollLeft+i*Uo)),(!n||n&&a)&&z(t),r.wheelStartX=null)}}function Fn(e,t,n){e=e&&e.options.selectionsMayTouch,n=t[n],t.sort(function(e,t){return ee(e.from(),t.from())}),n=v(t,n);for(var i=1;i<t.length;i++){var r=t[i],o=t[i-1],s=ee(o.to(),r.from());if(e&&!r.empty()?0<s:0<=s){s=re(o.from(),r.from());var a=ie(o.to(),r.to());r=o.empty()?r.from()==r.head:o.from()==o.head,i<=n&&--n,t.splice(--i,2,new Xo(r?a:s,r?s:a))}}return new Go(t,n)}function zn(e,t){return new Go([new Xo(e,t||e)],0)}function Pn(e){return e.text?J(e.from.line+e.text.length-1,g(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function In(e,t){if(ee(e,t.from)<0)return e;if(ee(e,t.to)<=0)return Pn(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,i=e.ch;return e.line==t.to.line&&(i+=Pn(t).ch-t.to.ch),J(n,i)}function Hn(e,t){for(var n=[],i=0;i<e.sel.ranges.length;i++){var r=e.sel.ranges[i];n.push(new Xo(In(r.anchor,t),In(r.head,t)))}return Fn(e.cm,n,e.sel.primIndex)}function Wn(e,t,n){return e.line==t.line?J(n.line,e.ch-t.ch+n.ch):J(n.line+(e.line-t.line),e.ch)}function _n(e){e.doc.mode=B(e.options,e.doc.modeOption),Bn(e)}function Bn(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,vn(e,100),e.state.modeGen++,e.curOp&&Ft(e)}function Rn(e,t){return 0==t.from.ch&&0==t.to.ch&&""==g(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function jn(e,i,r,o){function t(e,t,n){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),be(e),we(e,n),(t=o?o(e):1)!=e.height&&q(e,t),Re(e,"change",e,i)}function n(e,t){for(var n=[];e<t;++e)n.push(new Eo(l[e],r?r[e]:null,o));return n}var s=i.from,a=i.to,l=i.text,u=X(e,s.line),c=X(e,a.line),h=g(l),d=r?r[l.length-1]:null,f=a.line-s.line;i.full?(e.insert(0,n(0,l.length)),e.remove(l.length,e.size-l.length)):Rn(e,i)?(a=n(0,l.length-1),t(c,c.text,d),f&&e.remove(s.line,f),a.length&&e.insert(s.line,a)):u==c?1==l.length?t(u,u.text.slice(0,s.ch)+h+u.text.slice(a.ch),d):((f=n(1,l.length-1)).push(new Eo(h+u.text.slice(a.ch),d,o)),t(u,u.text.slice(0,s.ch)+l[0],r?r[0]:null),e.insert(s.line+1,f)):1==l.length?(t(u,u.text.slice(0,s.ch)+l[0]+c.text.slice(a.ch),r?r[0]:null),e.remove(s.line+1,f)):(t(u,u.text.slice(0,s.ch)+l[0],r?r[0]:null),t(c,h+c.text.slice(a.ch),d),d=n(1,l.length-1),1<f&&e.remove(s.line+1,f-1),e.insert(s.line+1,d)),Re(e,"change",e,i)}function Un(e,a,l){!function e(t,n,i){if(t.linked)for(var r=0;r<t.linked.length;++r){var o=t.linked[r];if(o.doc!=n){var s=i&&o.sharedHist;l&&!s||(a(o.doc,s),e(o.doc,t,s))}}}(e,null,!0)}function Gn(e,t){if(t.cm)throw Error("This document is already in use.");Et((e.doc=t).cm=e),_n(e),Xn(e),e.options.lineWrapping||Oe(e),e.options.mode=t.modeOption,Ft(e)}function Xn(e){("rtl"==e.doc.direction?i:Xr)(e.display.lineDiv,"CodeMirror-rtl")}function Vn(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOrigin=this.lastSelOrigin=this.lastOp=this.lastSelOp=null,this.generation=this.maxGeneration=e||1}function Yn(e,t){var n={from:ne(t.from),to:Pn(t),text:V(e,t.from,t.to)};return Zn(e,n,t.from.line,t.to.line+1),Un(e,function(e){return Zn(e,n,t.from.line,t.to.line+1)},!0),n}function qn(e){for(;e.length&&g(e).ranges;)e.pop()}function $n(e,t,n,i){var r=e.history;r.undone.length=0;var o,s=+new Date;if(o=r.lastOp==i||r.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&r.lastModTime>s-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0))){if(r.lastOp==i){qn(r.done);var a=g(r.done)}else a=r.done.length&&!g(r.done).ranges?g(r.done):1<r.done.length&&!r.done[r.done.length-2].ranges?(r.done.pop(),g(r.done)):void 0;o=a}if(o){var l=g(a.changes);0==ee(t.from,t.to)&&0==ee(t.from,l.to)?l.to=Pn(t):a.changes.push(Yn(e,t))}else for((a=g(r.done))&&a.ranges||Kn(e.sel,r.done),a={changes:[Yn(e,t)],generation:r.generation},r.done.push(a);r.done.length>r.undoDepth;)r.done.shift(),r.done[0].ranges||r.done.shift();r.done.push(n),r.generation=++r.maxGeneration,r.lastModTime=r.lastSelTime=s,r.lastOp=r.lastSelOp=i,r.lastOrigin=r.lastSelOrigin=t.origin,l||F(e,"historyAdded")}function Kn(e,t){var n=g(t);n&&n.ranges&&n.equals(e)||t.push(e)}function Zn(t,n,e,i){var r=n["spans_"+t.id],o=0;t.iter(Math.max(t.first,e),Math.min(t.first+t.size,i),function(e){e.markedSpans&&((r||(r=n["spans_"+t.id]={}))[o]=e.markedSpans),++o})}function Qn(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function Jn(e,t){var n;if(n=t["spans_"+e.id]){for(var i=[],r=0;r<t.text.length;++r)i.push(Qn(n[r]));n=i}else n=null;if(e=ye(e,t),!n)return e;if(!e)return n;for(t=0;t<n.length;++t)if(i=n[t],r=e[t],i&&r){var o=0;e:for(;o<r.length;++o){for(var s=r[o],a=0;a<i.length;++a)if(i[a].marker==s.marker)continue e;i.push(s)}}else r&&(n[t]=r);return n}function ei(e,t,n){for(var i=[],r=0;r<e.length;++r){var o=e[r];if(o.ranges)i.push(n?Go.prototype.deepCopy.call(o):o);else{o=o.changes;var s=[];i.push({changes:s});for(var a=0;a<o.length;++a){var l,u=o[a];if(s.push({from:u.from,to:u.to,text:u.text}),t)for(var c in u)(l=c.match(/^spans_(\d+)$/))&&-1<v(t,Number(l[1]))&&(g(s)[c]=u[c],delete u[c])}}}return i}function ti(e,t,n,i){return i?(e=e.anchor,n&&((i=ee(t,e)<0)!=ee(n,e)<0?(e=t,t=n):i!=ee(t,n)<0&&(t=n)),new Xo(e,t)):new Xo(n||t,t)}function ni(e,t,n,i,r){null==r&&(r=e.cm&&(e.cm.display.shift||e.extend)),si(e,new Go([ti(e.sel.primary(),t,n,r)],0),i)}function ii(e,t,n){for(var i=[],r=e.cm&&(e.cm.display.shift||e.extend),o=0;o<e.sel.ranges.length;o++)i[o]=ti(e.sel.ranges[o],t[o],null,r);si(e,t=Fn(e.cm,i,e.sel.primIndex),n)}function ri(e,t,n,i){var r=e.sel.ranges.slice(0);r[t]=n,si(e,Fn(e.cm,r,e.sel.primIndex),i)}function oi(e,t,n){var i=e.history.done,r=g(i);r&&r.ranges?ai(e,i[i.length-1]=t,n):si(e,t,n)}function si(e,t,n){ai(e,t,n),t=e.sel;var i,r=e.cm?e.cm.curOp.id:NaN,o=e.history,s=n&&n.origin;if(!(i=r==o.lastSelOp)&&(i=s&&o.lastSelOrigin==s)&&!(i=o.lastModTime==o.lastSelTime&&o.lastOrigin==s)){i=g(o.done);var a=s.charAt(0);i="*"==a||"+"==a&&i.ranges.length==t.ranges.length&&i.somethingSelected()==t.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}i?o.done[o.done.length-1]=t:Kn(t,o.done),o.lastSelTime=+new Date,o.lastSelOrigin=s,o.lastSelOp=r,n&&!1!==n.clearRedo&&qn(o.undone)}function ai(e,t,n){(d(e,"beforeSelectionChange")||e.cm&&d(e.cm,"beforeSelectionChange"))&&(t=function(n,e,t){return t={ranges:e.ranges,update:function(e){this.ranges=[];for(var t=0;t<e.length;t++)this.ranges[t]=new Xo(oe(n,e[t].anchor),oe(n,e[t].head))},origin:t&&t.origin},F(n,"beforeSelectionChange",n,t),n.cm&&F(n.cm,"beforeSelectionChange",n.cm,t),t.ranges!=e.ranges?Fn(n.cm,t.ranges,t.ranges.length-1):e}(e,t,n));var i=n&&n.bias||(ee(t.primary().head,e.sel.primary().head)<0?-1:1);li(e,ci(e,t,i,!0)),n&&!1===n.scroll||!e.cm||Jt(e.cm)}function li(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,h(e.cm)),Re(e,"cursorActivity",e))}function ui(e){li(e,ci(e,e.sel,null,!1))}function ci(e,t,n,i){for(var r,o=0;o<t.ranges.length;o++){var s=t.ranges[o],a=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],l=di(e,s.anchor,a&&a.anchor,n,i);a=di(e,s.head,a&&a.head,n,i),!r&&l==s.anchor&&a==s.head||(r||(r=t.ranges.slice(0,o)),r[o]=new Xo(l,a))}return r?Fn(e.cm,r,t.primIndex):t}function hi(e,t,n,i,r){var o=X(e,t.line);if(o.markedSpans)for(var s=0;s<o.markedSpans.length;++s){var a=o.markedSpans[s],l=a.marker;if((null==a.from||(l.inclusiveLeft?a.from<=t.ch:a.from<t.ch))&&(null==a.to||(l.inclusiveRight?a.to>=t.ch:a.to>t.ch))){if(r&&(F(l,"beforeCursorEnter"),l.explicitlyCleared)){if(o.markedSpans){--s;continue}break}if(l.atomic)return n&&(s=l.find(i<0?1:-1),a=void 0,(i<0?l.inclusiveRight:l.inclusiveLeft)&&(s=fi(e,s,-i,s&&s.line==t.line?o:null)),s&&s.line==t.line&&(a=ee(s,n))&&(i<0?a<0:0<a))?hi(e,s,t,i,r):(n=l.find(i<0?-1:1),(i<0?l.inclusiveLeft:l.inclusiveRight)&&(n=fi(e,n,i,n.line==t.line?o:null)),n?hi(e,n,t,i,r):null)}}return t}function di(e,t,n,i,r){return(t=hi(e,t,n,i=i||1,r)||!r&&hi(e,t,n,i,!0)||hi(e,t,n,-i,r)||!r&&hi(e,t,n,-i,!0))||(e.cantEdit=!0,J(e.first,0))}function fi(e,t,n,i){return n<0&&0==t.ch?t.line>e.first?oe(e,J(t.line-1)):null:0<n&&t.ch==(i||X(e,t.line)).text.length?t.line<e.first+e.size-1?J(t.line+1,0):null:new J(t.line,t.ch+n)}function pi(e){e.setSelection(J(e.firstLine(),0),J(e.lastLine()),ro)}function gi(r,e,t){var o={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){return o.canceled=!0}};return t&&(o.update=function(e,t,n,i){e&&(o.from=oe(r,e)),t&&(o.to=oe(r,t)),n&&(o.text=n),void 0!==i&&(o.origin=i)}),F(r,"beforeChange",r,o),r.cm&&F(r.cm,"beforeChange",r.cm,o),o.canceled?(r.cm&&(r.cm.curOp.updateInput=2),null):{from:o.from,to:o.to,text:o.text,origin:o.origin}}function mi(e,t,n){if(e.cm){if(!e.cm.curOp)return pn(e.cm,mi)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(d(e,"beforeChange")||e.cm&&d(e.cm,"beforeChange"))||(t=gi(e,t,!0)))if(n=Do&&!n&&function(e,t,n){var i=null;if(e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||i&&-1!=v(i,n)||(i||(i=[])).push(n)}}),!i)return null;for(e=[{from:t,to:n}],t=0;t<i.length;++t)for(var r=(n=i[t]).find(0),o=0;o<e.length;++o){var s=e[o];if(!(ee(s.to,r.from)<0||0<ee(s.from,r.to))){var a=[o,1],l=ee(s.from,r.from),u=ee(s.to,r.to);(l<0||!n.inclusiveLeft&&!l)&&a.push({from:s.from,to:r.from}),(0<u||!n.inclusiveRight&&!u)&&a.push({from:r.to,to:s.to}),e.splice.apply(e,a),o+=a.length-3}}return e}(e,t.from,t.to))for(var i=n.length-1;0<=i;--i)vi(e,{from:n[i].from,to:n[i].to,text:i?[""]:t.text,origin:t.origin});else vi(e,t)}function vi(e,n){if(1!=n.text.length||""!=n.text[0]||0!=ee(n.from,n.to)){var t=Hn(e,n);$n(e,n,t,e.cm?e.cm.curOp.id:NaN),bi(e,n,t,ye(e,n));var i=[];Un(e,function(e,t){t||-1!=v(i,e.history)||(ki(e.history,n),i.push(e.history)),bi(e,n,null,ye(e,n))})}}function yi(r,o,e){var t=r.cm&&r.cm.state.suppressEdits;if(!t||e){for(var s,n=r.history,i=r.sel,a="undo"==o?n.done:n.undone,l="undo"==o?n.undone:n.done,u=0;u<a.length&&(s=a[u],e?!s.ranges||s.equals(r.sel):s.ranges);u++);if(u!=a.length){for(n.lastOrigin=n.lastSelOrigin=null;;){if(!(s=a.pop()).ranges){if(t)return void a.push(s);break}if(Kn(s,l),e&&!s.equals(r.sel))return void si(r,s,{clearRedo:!1});i=s}var c=[];Kn(i,l),l.push({changes:c,generation:n.generation}),n.generation=s.generation||++n.maxGeneration;var h=d(r,"beforeChange")||r.cm&&d(r.cm,"beforeChange");for(e=function(e){var n=s.changes[e];if(n.origin=o,h&&!gi(r,n,!1))return a.length=0,{};c.push(Yn(r,n));var t=e?Hn(r,n):g(a);bi(r,n,t,Jn(r,n)),!e&&r.cm&&r.cm.scrollIntoView({from:n.from,to:Pn(n)});var i=[];Un(r,function(e,t){t||-1!=v(i,e.history)||(ki(e.history,n),i.push(e.history)),bi(e,n,null,Jn(e,n))})},t=s.changes.length-1;0<=t;--t)if(n=e(t))return n.v}}}function xi(e,t){if(0!=t&&(e.first+=t,e.sel=new Go(C(e.sel.ranges,function(e){return new Xo(J(e.anchor.line+t,e.anchor.ch),J(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){Ft(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,i=n.viewFrom;i<n.viewTo;i++)zt(e.cm,i,"gutter")}}function bi(e,t,n,i){if(e.cm&&!e.cm.curOp)return pn(e.cm,bi)(e,t,n,i);if(t.to.line<e.first)xi(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var r=t.text.length-1-(e.first-t.from.line);xi(e,r),t={from:J(e.first,0),to:J(t.to.line+r,t.to.ch),text:[g(t.text)],origin:t.origin}}r=e.lastLine(),t.to.line>r&&(t={from:t.from,to:J(r,X(e,r).text.length),text:[t.text[0]],origin:t.origin}),t.removed=V(e,t.from,t.to),n||(n=Hn(e,t)),e.cm?function(e,t,n){var i=e.doc,r=e.display,o=t.from,s=t.to,a=!1,l=o.line;e.options.lineWrapping||(l=$(Le(X(i,o.line))),i.iter(l,s.line+1,function(e){if(e==r.maxLine)return a=!0})),-1<i.sel.contains(t.from,t.to)&&h(e),jn(i,t,n,At(e)),e.options.lineWrapping||(i.iter(l,o.line+t.text.length,function(e){var t=Ne(e);t>r.maxLineLength&&(r.maxLine=e,r.maxLineLength=t,r.maxLineChanged=!0,a=!1)}),a&&(e.curOp.updateMaxLine=!0)),function(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,i=t-1;n<i;i--){var r=X(e,i).stateAfter;if(r&&(!(r instanceof Lo)||i+r.lookAhead<t)){n=i+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}}(i,o.line),vn(e,400),n=t.text.length-(s.line-o.line)-1,t.full?Ft(e):o.line!=s.line||1!=t.text.length||Rn(e.doc,t)?Ft(e,o.line,s.line+1,n):zt(e,o.line,"text"),n=d(e,"changes"),((i=d(e,"change"))||n)&&(t={from:o,to:s,text:t.text,removed:t.removed,origin:t.origin},i&&Re(e,"change",e,t),n&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(t));e.display.selForContextMenu=null}(e.cm,t,i):jn(e,t,i),ai(e,n,ro)}}function wi(e,t,n,i,r){i||(i=n),ee(i,n)<0&&(n=(i=[i,n])[0],i=i[1]),"string"==typeof t&&(t=e.splitLines(t)),mi(e,{from:n,to:i,text:t,origin:r})}function Ci(e,t,n,i){n<e.line?e.line+=i:t<e.line&&(e.line=t,e.ch=0)}function Si(e,t,n,i){for(var r=0;r<e.length;++r){var o=e[r],s=!0;if(o.ranges)for(o.copied||((o=e[r]=o.deepCopy()).copied=!0),s=0;s<o.ranges.length;s++)Ci(o.ranges[s].anchor,t,n,i),Ci(o.ranges[s].head,t,n,i);else{for(var a=0;a<o.changes.length;++a){var l=o.changes[a];if(n<l.from.line)l.from=J(l.from.line+i,l.from.ch),l.to=J(l.to.line+i,l.to.ch);else if(t<=l.to.line){s=!1;break}}s||(e.splice(0,r+1),r=0)}}}function ki(e,t){var n=t.from.line,i=t.to.line;t=t.text.length-(i-n)-1,Si(e.done,n,i,t),Si(e.undone,n,i,t)}function Li(e,t,n,i){var r=t,o=t;return"number"==typeof t?o=X(e,Math.max(e.first,Math.min(t,e.first+e.size-1))):r=$(t),null==r?null:(i(o,r)&&e.cm&&zt(e.cm,r,n),o)}function Mi(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}function Ti(e){this.children=e;for(var t=0,n=0,i=0;i<e.length;++i){var r=e[i];t+=r.chunkSize(),n+=r.height,r.parent=this}this.size=t,this.height=n,this.parent=null}function Di(t,n,i,e,r){if(e&&e.shared)return function(e,n,i,r,o){(r=u(r)).shared=!1;var s=[Di(e,n,i,r,o)],a=s[0],l=r.widgetNode;return Un(e,function(e){l&&(r.widgetNode=l.cloneNode(!0)),s.push(Di(e,oe(e,n),oe(e,i),r,o));for(var t=0;t<e.linked.length;++t)if(e.linked[t].isParent)return;a=g(s)}),new $o(s,a)}(t,n,i,e,r);if(t.cm&&!t.cm.curOp)return pn(t.cm,Di)(t,n,i,e,r);var o=new qo(t,r);if(r=ee(n,i),e&&u(e,o,!1),0<r||0==r&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=E("span",[o.replacedWith],"CodeMirror-widget"),e.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),e.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(ke(t,n.line,n,i,o)||n.line!=i.line&&ke(t,i.line,n,i,o))throw Error("Inserting collapsed marker partially overlapping an existing one");Ao=!0}o.addToHistory&&$n(t,{from:n,to:i,origin:"markText"},t.sel,NaN);var s,a=n.line,l=t.cm;if(t.iter(a,i.line+1,function(e){l&&o.collapsed&&!l.options.lineWrapping&&Le(e)==l.display.maxLine&&(s=!0),o.collapsed&&a!=n.line&&q(e,0);var t=new me(o,a==n.line?n.ch:null,a==i.line?i.ch:null);e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e),++a}),o.collapsed&&t.iter(n.line,i.line+1,function(e){De(t,e)&&q(e,0)}),o.clearOnEnter&&po(o,"beforeCursorEnter",function(){return o.clear()}),o.readOnly&&(Do=!0,(t.history.done.length||t.history.undone.length)&&t.clearHistory()),o.collapsed&&(o.id=++Yo,o.atomic=!0),l){if(s&&(l.curOp.updateMaxLine=!0),o.collapsed)Ft(l,n.line,i.line+1);else if(o.className||o.startStyle||o.endStyle||o.css||o.attributes||o.title)for(e=n.line;e<=i.line;e++)zt(l,e,"text");o.atomic&&ui(l.doc),Re(l,"markerAdded",l,o)}return o}function Ai(e){return e.findMarks(J(e.first,0),e.clipPos(J(e.lastLine())),function(e){return e.parent})}function Ei(r){function e(e){var t=[(e=r[e]).primary.doc];Un(e.primary.doc,function(e){return t.push(e)});for(var n=0;n<e.markers.length;n++){var i=e.markers[n];-1==v(t,i.doc)&&(i.parent=null,e.markers.splice(n--,1))}}for(var t=0;t<r.length;t++)e(t)}function Ni(e){var i=this;if(Oi(i),!T(i,e)&&!Ze(i.display,e)){z(e),Tr&&(Qo=+new Date);var r=Nt(i,e,!0),t=e.dataTransfer.files;if(r&&!i.isReadOnly())if(t&&t.length&&window.FileReader&&window.File)for(var o=t.length,s=Array(o),a=0,n=function(e,t){if(!i.options.allowDropFileTypes||-1!=v(i.options.allowDropFileTypes,e.type)){var n=new FileReader;n.onload=pn(i,function(){var e=n.result;/[\x00-\x08\x0e-\x1f]{2}/.test(e)&&(e=""),s[t]=e,++a==o&&(e={from:r=oe(i.doc,r),to:r,text:i.doc.splitLines(s.join(i.doc.lineSeparator())),origin:"paste"},mi(i.doc,e),oi(i.doc,zn(r,Pn(e))))}),n.readAsText(e)}},l=0;l<o;++l)n(t[l],l);else if(i.state.draggingText&&-1<i.doc.sel.contains(r))i.state.draggingText(e),setTimeout(function(){return i.display.input.focus()},20);else try{if(n=e.dataTransfer.getData("Text")){if(i.state.draggingText&&!i.state.draggingText.copy&&(l=i.listSelections()),ai(i.doc,zn(r,r)),l)for(t=0;t<l.length;++t)wi(i.doc,"",l[t].anchor,l[t].head,"drag");i.replaceSelection(n,"around","paste"),i.display.input.focus()}}catch(e){}}}function Oi(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Fi(t){if(document.getElementsByClassName){for(var e=document.getElementsByClassName("CodeMirror"),n=[],i=0;i<e.length;i++){var r=e[i].CodeMirror;r&&n.push(r)}n.length&&n[0].operation(function(){for(var e=0;e<n.length;e++)t(n[e])})}}function zi(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}function Pi(e){var t=e.split(/-(?!$)/);e=t[t.length-1];for(var n,i,r,o,s=0;s<t.length-1;s++){var a=t[s];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))n=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else{if(!/^s(hift)?$/i.test(a))throw Error("Unrecognized modifier name: "+a);r=!0}}return n&&(e="Alt-"+e),i&&(e="Ctrl-"+e),o&&(e="Cmd-"+e),r&&(e="Shift-"+e),e}function Ii(e){var t,n={};for(t in e)if(e.hasOwnProperty(t)){var i=e[t];if(!/^(name|fallthrough|(de|at)tach)$/.test(t)){if("..."!=i)for(var r=C(t.split(" "),Pi),o=0;o<r.length;o++){if(o==r.length-1)var s=r.join(" "),a=i;else s=r.slice(0,o+1).join(" "),a="...";var l=n[s];if(l){if(l!=a)throw Error("Inconsistent bindings for "+s)}else n[s]=a}delete e[t]}}for(var u in n)e[u]=n[u];return e}function Hi(e,t,n,i){var r=(t=Ri(t)).call?t.call(e,i):t[e];if(!1===r)return"nothing";if("..."===r)return"multi";if(null!=r&&n(r))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Hi(e,t.fallthrough,n,i);for(r=0;r<t.fallthrough.length;r++){var o=Hi(e,t.fallthrough[r],n,i);if(o)return o}}}function Wi(e){return"Ctrl"==(e="string"==typeof e?e:es[e.keyCode])||"Alt"==e||"Shift"==e||"Mod"==e}function _i(e,t,n){var i=e;return t.altKey&&"Alt"!=i&&(e="Alt-"+e),(Ur?t.metaKey:t.ctrlKey)&&"Ctrl"!=i&&(e="Ctrl-"+e),(Ur?t.ctrlKey:t.metaKey)&&"Cmd"!=i&&(e="Cmd-"+e),!n&&t.shiftKey&&"Shift"!=i&&(e="Shift-"+e),e}function Bi(e,t){if(Or&&34==e.keyCode&&e.char)return!1;var n=es[e.keyCode];return null!=n&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(n=e.code),_i(n,e,t))}function Ri(e){return"string"==typeof e?rs[e]:e}function ji(t,e){for(var n=t.doc.sel.ranges,i=[],r=0;r<n.length;r++){for(var o=e(n[r]);i.length&&ee(o.from,g(i).to)<=0;){var s=i.pop();if(ee(s.from,o.from)<0){o.from=s.from;break}}i.push(o)}fn(t,function(){for(var e=i.length-1;0<=e;e--)wi(t.doc,"",i[e].from,i[e].to,"+delete");Jt(t)})}function Ui(e,t,n){return(t=S(e.text,t+n,n))<0||t>e.text.length?null:t}function Gi(e,t,n){return null==(e=Ui(e,t.ch,n))?null:new J(t.line,e,n<0?"after":"before")}function Xi(e,t,n,i,r){if(e&&(e=O(n,t.doc.direction))){var o=r<0==(1==(e=r<0?g(e):e[0]).level)?"after":"before";if(0<e.level||"rtl"==t.doc.direction){var s=ot(t,n),a=r<0?n.text.length-1:0,l=st(t,s,a).top;a=k(function(e){return st(t,s,e).top==l},r<0==(1==e.level)?e.from:e.to-1,a),"before"==o&&(a=Ui(n,a,1))}else a=r<0?e.to:e.from;return new J(i,a,o)}return new J(i,r<0?n.text.length:0,r<0?"before":"after")}function Vi(e,t){var n=X(e.doc,t),i=Le(n);return i!=n&&(t=$(i)),Xi(!0,e,i,t,1)}function Yi(e,t){var n=Vi(e,t.line),i=X(e.doc,n.line);return(e=O(i,e.doc.direction))&&0!=e[0].level?n:(i=Math.max(0,i.text.search(/\S/)),J(n.line,t.line==n.line&&t.ch<=i&&t.ch?0:i,n.sticky))}function qi(e,t,n){if("string"==typeof t&&!(t=os[t]))return!1;e.display.input.ensurePolled();var i=e.display.shift,r=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),r=t(e)!=io}finally{e.display.shift=i,e.state.suppressEdits=!1}return r}function $i(e,t,n,i){var r=e.state.keySeq;if(r){if(Wi(t))return"handled";if(/'$/.test(t)?e.state.keySeq=null:ss.set(50,function(){e.state.keySeq==r&&(e.state.keySeq=null,e.display.input.reset())}),Ki(e,r+" "+t,n,i))return!0}return Ki(e,t,n,i)}function Ki(e,t,n,i){e:{for(var r=0;r<e.state.keyMaps.length;r++){var o=Hi(t,e.state.keyMaps[r],i,e);if(o){i=o;break e}}i=e.options.extraKeys&&Hi(t,e.options.extraKeys,i,e)||Hi(t,e.options.keyMap,i,e)}return"multi"==i&&(e.state.keySeq=t),"handled"==i&&Re(e,"keyHandled",e,t,n),"handled"!=i&&"multi"!=i||(z(n),Ut(e)),!!i}function Zi(t,e){var n=Bi(e,!0);return!!n&&(e.shiftKey&&!t.state.keySeq?$i(t,"Shift-"+n,e,function(e){return qi(t,e,!0)})||$i(t,n,e,function(e){if("string"==typeof e?/^go[A-Z]/.test(e):e.motion)return qi(t,e)}):$i(t,n,e,function(e){return qi(t,e)}))}function Qi(e){if(this.curOp.focus=y(),!T(this,e)){Tr&&Dr<11&&27==e.keyCode&&(e.returnValue=!1);var t=e.keyCode;this.display.shift=16==t||e.shiftKey;var n=Zi(this,e);Or&&(as=n?t:null,!n&&88==t&&!yo&&(_r?e.metaKey:e.ctrlKey)&&this.replaceSelection("",null,"cut")),18!=t||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||function(e){function t(e){18!=e.keyCode&&e.altKey||(Xr(n,"CodeMirror-crosshair"),M(document,"keyup",t),M(document,"mouseover",t))}var n=e.display.lineDiv;i(n,"CodeMirror-crosshair"),po(document,"keyup",t),po(document,"mouseover",t)}(this)}}function Ji(e){16==e.keyCode&&(this.doc.sel.shift=!1),T(this,e)}function er(e){if(!(Ze(this.display,e)||T(this,e)||e.ctrlKey&&!e.altKey||_r&&e.metaKey)){var t=e.keyCode,n=e.charCode;Or&&t==as?(as=null,z(e)):Or&&(!e.which||e.which<10)&&Zi(this,e)||("\b"==(t=String.fromCharCode(null==n?t:n))||function(t,e,n){return $i(t,"'"+n+"'",e,function(e){return qi(t,e,!0)})}(this,e,t)||this.display.input.onKeyPress(e))}}function tr(e){var t=this.display;if(!(T(this,e)||t.activeTouch&&t.input.supportsTouch()))if(t.input.ensurePolled(),t.shift=e.shiftKey,Ze(t,e))Ar||(t.scroller.draggable=!1,setTimeout(function(){return t.scroller.draggable=!0},100));else if(!ir(this,e,"gutterClick",!0)){var n=Nt(this,e),i=H(e),r=n?function(e,t){var n=+new Date;return cs&&cs.compare(n,e,t)?(us=cs=null,"triple"):us&&us.compare(n,e,t)?(cs=new ls(n,e,t),us=null,"double"):(us=new ls(n,e,t),cs=null,"single")}(n,i):"single";window.focus(),1==i&&this.state.selectingText&&this.state.selectingText(e),n&&function(n,e,i,t,r){var o="Click";return"double"==t?o="Double"+o:"triple"==t&&(o="Triple"+o),$i(n,_i((1==e?"Left":2==e?"Middle":"Right")+o,r),r,function(e){if("string"==typeof e&&(e=os[e]),!e)return!1;var t=!1;try{n.isReadOnly()&&(n.state.suppressEdits=!0),t=e(n,i)!=io}finally{n.state.suppressEdits=!1}return t})}(this,i,n,r,e)||(1==i?n?function(e,t,n,i){Tr?setTimeout(l(Gt,e),0):e.curOp.focus=y();var r=e.getOption("configureMouse");null==(r=r?r(e,n,i):{}).unit&&(r.unit=(Br?i.shiftKey&&i.metaKey:i.altKey)?"rectangle":"single"==n?"char":"double"==n?"word":"line"),null!=r.extend&&!e.doc.extend||(r.extend=e.doc.extend||i.shiftKey);null==r.addNew&&(r.addNew=_r?i.metaKey:i.ctrlKey),null==r.moveOnDrag&&(r.moveOnDrag=!(_r?i.altKey:i.ctrlKey));var o,s=e.doc.sel;e.options.dragDrop&&go&&!e.isReadOnly()&&"single"==n&&-1<(o=s.contains(t))&&(ee((o=s.ranges[o]).from(),t)<0||0<t.xRel)&&(0<ee(o.to(),t)||t.xRel<0)?function(t,n,i,r){var o=t.display,s=!1,a=pn(t,function(e){Ar&&(o.scroller.draggable=!1),t.state.draggingText=!1,M(o.wrapper.ownerDocument,"mouseup",a),M(o.wrapper.ownerDocument,"mousemove",l),M(o.scroller,"dragstart",u),M(o.scroller,"drop",a),s||(z(e),r.addNew||ni(t.doc,i,null,null,r.extend),Ar||Tr&&9==Dr?setTimeout(function(){o.wrapper.ownerDocument.body.focus(),o.input.focus()},20):o.input.focus())}),l=function(e){s=s||10<=Math.abs(n.clientX-e.clientX)+Math.abs(n.clientY-e.clientY)},u=function(){return s=!0};Ar&&(o.scroller.draggable=!0),(t.state.draggingText=a).copy=!r.moveOnDrag,o.scroller.dragDrop&&o.scroller.dragDrop(),po(o.wrapper.ownerDocument,"mouseup",a),po(o.wrapper.ownerDocument,"mousemove",l),po(o.scroller,"dragstart",u),po(o.scroller,"drop",a),Xt(t),setTimeout(function(){return o.input.focus()},20)}(e,i,t,r):function(u,e,c,h){function s(e){if(0!=ee(m,e))if(m=e,"rectangle"==h.unit){var t=[],n=u.options.tabSize,i=x(X(d,c.line).text,c.ch,n),r=x(X(d,e.line).text,e.ch,n),o=Math.min(i,r);i=Math.max(i,r),r=Math.min(c.line,e.line);for(var s=Math.min(u.lastLine(),Math.max(c.line,e.line));r<=s;r++){var a=X(d,r).text,l=b(a,o,n);o==i?t.push(new Xo(J(r,l),J(r,l))):a.length>l&&t.push(new Xo(J(r,l),J(r,b(a,i,n))))}t.length||t.push(new Xo(c,c)),si(d,Fn(u,f.ranges.slice(0,p).concat(t),p),{origin:"*mouse",scroll:!1}),u.scrollIntoView(e)}else t=g,o=nr(u,e,h.unit),e=t.anchor,e=0<ee(o.anchor,e)?(n=o.head,re(t.from(),o.anchor)):(n=o.anchor,ie(t.to(),o.head)),(t=f.ranges.slice(0))[p]=function(e,t){var n=t.anchor,i=t.head,r=X(e.doc,n.line);if(0==ee(n,i)&&n.sticky==i.sticky)return t;if(!(r=O(r)))return t;var o=L(r,n.ch,n.sticky),s=r[o];if(s.from!=n.ch&&s.to!=n.ch)return t;var a=o+(s.from==n.ch==(1!=s.level)?0:1);return 0==a||a==r.length?t:(e=i.line!=n.line?0<(i.line-n.line)*("ltr"==e.doc.direction?1:-1):(e=L(r,i.ch,i.sticky),o=e-o||(i.ch-n.ch)*(1==s.level?-1:1),e==a-1||e==a?o<0:0<o),r=r[a+(e?-1:0)],r=(a=e==(1==r.level))?r.from:r.to,a=a?"after":"before",n.ch==r&&n.sticky==a?t:new Xo(new J(n.line,r,a),i))}(u,new Xo(oe(d,e),n)),si(d,Fn(u,t,p),oo)}function t(e){u.state.selectingText=!1,v=1/0,e&&(z(e),a.input.focus()),M(a.wrapper.ownerDocument,"mousemove",i),M(a.wrapper.ownerDocument,"mouseup",r),d.history.lastSelOrigin=null}var a=u.display,d=u.doc;z(e);var f=d.sel,n=f.ranges;if(h.addNew&&!h.extend)var p=d.sel.contains(c),g=-1<p?n[p]:new Xo(c,c);else g=d.sel.primary(),p=d.sel.primIndex;"rectangle"==h.unit?(h.addNew||(g=new Xo(c,c)),c=Nt(u,e,!0,!0),p=-1):(e=nr(u,c,h.unit),g=h.extend?ti(g,e.anchor,e.head,h.extend):e),h.addNew?-1==p?(p=n.length,si(d,Fn(u,n.concat([g]),p),{scroll:!1,origin:"*mouse"})):1<n.length&&n[p].empty()&&"char"==h.unit&&!h.extend?(si(d,Fn(u,n.slice(0,p).concat(n.slice(p+1)),0),{scroll:!1,origin:"*mouse"}),f=d.sel):ri(d,p,g,oo):(si(d,new Go([g],p=0),oo),f=d.sel);var m=c,l=a.wrapper.getBoundingClientRect(),v=0,i=pn(u,function(e){0!==e.buttons&&H(e)?function e(t){var n=++v,i=Nt(u,t,!0,"rectangle"==h.unit);if(i)if(0!=ee(i,m)){u.curOp.focus=y(),s(i);var r=Kt(a,d);(i.line>=r.to||i.line<r.from)&&setTimeout(pn(u,function(){v==n&&e(t)}),150)}else{var o=t.clientY<l.top?-20:t.clientY>l.bottom?20:0;o&&setTimeout(pn(u,function(){v==n&&(a.scroller.scrollTop+=o,e(t))}),50)}}(e):t(e)}),r=pn(u,t);u.state.selectingText=r,po(a.wrapper.ownerDocument,"mousemove",i),po(a.wrapper.ownerDocument,"mouseup",r)}(e,i,t,r)}(this,n,r,e):(e.target||e.srcElement)==t.scroller&&z(e):2==i?(n&&ni(this.doc,n),setTimeout(function(){return t.input.focus()},20)):3==i&&(Gr?this.display.input.onContextMenu(e):Xt(this)))}}function nr(e,t,n){return"char"==n?new Xo(t,t):"word"==n?e.findWordAt(t):"line"==n?new Xo(J(t.line,0),oe(e.doc,J(t.line+1,0))):(e=n(e,t),new Xo(e.from,e.to))}function ir(e,t,n,i){if(t.touches)var r=t.touches[0].clientX,o=t.touches[0].clientY;else try{r=t.clientX,o=t.clientY}catch(e){return!1}if(r>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;i&&z(t);var s=(i=e.display).lineDiv.getBoundingClientRect();if(o>s.bottom||!d(e,n))return P(t);for(o-=s.top-i.viewOffset,s=0;s<e.display.gutterSpecs.length;++s){var a=i.gutters.childNodes[s];if(a&&a.getBoundingClientRect().right>=r)return F(e,n,e,r=K(e.doc,o),e.display.gutterSpecs[s].className,t),P(t)}}function rr(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),ct(e)}function or(e,t,n){!t!=!(n&&n!=hs)&&(n=e.display.dragFunctions,(t=t?po:M)(e.display.scroller,"dragstart",n.start),t(e.display.scroller,"dragenter",n.enter),t(e.display.scroller,"dragover",n.over),t(e.display.scroller,"dragleave",n.leave),t(e.display.scroller,"drop",n.drop))}function sr(e){e.options.lineWrapping?(i(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(Xr(e.display.wrapper,"CodeMirror-wrap"),Oe(e)),Et(e),Ft(e),ct(e),setTimeout(function(){return ln(e)},100)}function ar(e,t){var n=this;if(!(this instanceof ar))return new ar(e,t);this.options=t=t?u(t):{},u(ds,t,!1);var i=t.value;"string"==typeof i?i=new Zo(i,t.mode,null,t.lineSeparator,t.direction):t.mode&&(i.modeOption=t.mode),this.doc=i;var r=new ar.inputStyles[t.inputStyle](this);for(var o in rr((e=this.display=new An(e,i,r,t)).wrapper.CodeMirror=this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),cn(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new qr,keySeq:null,specialChars:null},t.autofocus&&!Wr&&e.input.focus(),Tr&&Dr<11&&setTimeout(function(){return n.display.input.reset(!0)},20),function(i){function r(){s.activeTouch&&(n=setTimeout(function(){return s.activeTouch=null},1e3),(a=s.activeTouch).end=+new Date)}function o(e,t){if(null==t.left)return!0;var n=t.left-e.left;return 400<n*n+(e=t.top-e.top)*e}var s=i.display;po(s.scroller,"mousedown",pn(i,tr)),po(s.scroller,"dblclick",Tr&&Dr<11?pn(i,function(e){if(!T(i,e)){var t=Nt(i,e);!t||ir(i,e,"gutterClick",!0)||Ze(i.display,e)||(z(e),e=i.findWordAt(t),ni(i.doc,e.anchor,e.head))}}):function(e){return T(i,e)||z(e)}),po(s.scroller,"contextmenu",function(e){var t;(t=Ze(i.display,e))||(t=!!d(i,"gutterContextMenu")&&ir(i,e,"gutterContextMenu",!1)),t||T(i,e,"contextmenu")||Gr||i.display.input.onContextMenu(e)});var n,a={end:0};po(s.scroller,"touchstart",function(e){var t;(t=!T(i,e))&&(t=!(t=1==e.touches.length&&((t=e.touches[0]).radiusX<=1&&t.radiusY<=1))),t&&!ir(i,e,"gutterClick",!0)&&(s.input.ensurePolled(),clearTimeout(n),t=+new Date,s.activeTouch={start:t,moved:!1,prev:t-a.end<=300?a:null},1==e.touches.length&&(s.activeTouch.left=e.touches[0].pageX,s.activeTouch.top=e.touches[0].pageY))}),po(s.scroller,"touchmove",function(){s.activeTouch&&(s.activeTouch.moved=!0)}),po(s.scroller,"touchend",function(e){var t=s.activeTouch;if(t&&!Ze(s,e)&&null!=t.left&&!t.moved&&new Date-t.start<300){var n=i.coordsChar(s.activeTouch,"page");t=!t.prev||o(t,t.prev)?new Xo(n,n):!t.prev.prev||o(t,t.prev.prev)?i.findWordAt(n):new Xo(J(n.line,0),oe(i.doc,J(n.line+1,0))),i.setSelection(t.anchor,t.head),i.focus(),z(e)}r()}),po(s.scroller,"touchcancel",r),po(s.scroller,"scroll",function(){s.scroller.clientHeight&&(rn(i,s.scroller.scrollTop),sn(i,s.scroller.scrollLeft,!0),F(i,"scroll",i))}),po(s.scroller,"mousewheel",function(e){return On(i,e)}),po(s.scroller,"DOMMouseScroll",function(e){return On(i,e)}),po(s.wrapper,"scroll",function(){return s.wrapper.scrollTop=s.wrapper.scrollLeft=0}),s.dragFunctions={enter:function(e){T(i,e)||I(e)},over:function(e){if(!T(i,e)){var t=Nt(i,e);if(t){var n=document.createDocumentFragment();Bt(i,t,n),i.display.dragCursor||(i.display.dragCursor=m("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),i.display.lineSpace.insertBefore(i.display.dragCursor,i.display.cursorDiv)),A(i.display.dragCursor,n)}I(e)}},start:function(e){if(Tr&&(!i.state.draggingText||+new Date-Qo<100))I(e);else if(!T(i,e)&&!Ze(i.display,e)&&(e.dataTransfer.setData("Text",i.getSelection()),e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setDragImage&&!Fr)){var t=m("img",null,null,"position: fixed; left: 0; top: 0;");t.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",Or&&(t.width=t.height=1,i.display.wrapper.appendChild(t),t._top=t.offsetTop),e.dataTransfer.setDragImage(t,0,0),Or&&t.parentNode.removeChild(t)}},drop:pn(i,Ni),leave:function(e){T(i,e)||Oi(i)}};var e=s.input.getField();po(e,"keyup",function(e){return Ji.call(i,e)}),po(e,"keydown",pn(i,Qi)),po(e,"keypress",pn(i,er)),po(e,"focus",function(e){return Vt(i,e)}),po(e,"blur",function(e){return Yt(i,e)})}(this),Jo||(function(){var e;po(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,Fi(zi)},100))}),po(window,"blur",function(){return Fi(Yt)})}(),Jo=!0),hn(this),this.curOp.forceUpdate=!0,Gn(this,i),t.autofocus&&!Wr||this.hasFocus()?setTimeout(l(Vt,this),20):Yt(this),fs)fs.hasOwnProperty(o)&&fs[o](this,t[o],hs);for(Ln(this),t.finishInit&&t.finishInit(this),i=0;i<ps.length;++i)ps[i](this);dn(this),Ar&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(e.lineDiv).textRendering&&(e.lineDiv.style.textRendering="auto")}function lr(e,t,n,i){var r,o=e.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?r=ue(e,t).state:n="prev");var s=e.options.tabSize,a=X(o,t),l=x(a.text,null,s);a.stateAfter&&(a.stateAfter=null);var u=a.text.match(/^\s*/)[0];if(i||/\S/.test(a.text)){if("smart"==n&&((c=o.mode.indent(r,a.text.slice(u.length),a.text))==io||150<c)){if(!i)return;n="prev"}}else{var c=0;n="not"}if("prev"==n?c=t>o.first?x(X(o,t-1).text,null,s):0:"add"==n?c=l+e.options.indentUnit:"subtract"==n?c=l-e.options.indentUnit:"number"==typeof n&&(c=l+n),c=Math.max(0,c),n="",i=0,e.options.indentWithTabs)for(e=Math.floor(c/s);e;--e)i+=s,n+="\t";if(i<c&&(n+=w(c-i)),n!=u)return wi(o,n,J(t,0),J(t,u.length),"+input"),!(a.stateAfter=null);for(s=0;s<o.sel.ranges.length;s++)if((a=o.sel.ranges[s]).head.line==t&&a.head.ch<u.length){t=J(t,u.length),ri(o,s,new Xo(t,t));break}}function ur(e,t,n,i,r){var o=e.doc;e.display.shift=!1,i||(i=o.sel);var s=+new Date-200,a="paste"==r||e.state.pasteIncoming>s,l=mo(t),u=null;if(a&&1<i.ranges.length)if(ms&&ms.text.join("\n")==t){if(0==i.ranges.length%ms.text.length){u=[];for(var c=0;c<ms.text.length;c++)u.push(o.splitLines(ms.text[c]))}}else l.length==i.ranges.length&&e.options.pasteLinesPerSelection&&(u=C(l,function(e){return[e]}));c=e.curOp.updateInput;for(var h=i.ranges.length-1;0<=h;h--){var d=i.ranges[h],f=d.from(),p=d.to();d.empty()&&(n&&0<n?f=J(f.line,f.ch-n):e.state.overwrite&&!a?p=J(p.line,Math.min(X(o,p.line).text.length,p.ch+g(l).length)):a&&ms&&ms.lineWise&&ms.text.join("\n")==t&&(f=p=J(f.line,0))),d={from:f,to:p,text:u?u[h%u.length]:l,origin:r||(a?"paste":e.state.cutIncoming>s?"cut":"+input")},mi(e.doc,d),Re(e,"inputRead",e,d)}t&&!a&&hr(e,t),Jt(e),e.curOp.updateInput<2&&(e.curOp.updateInput=c),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function cr(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||fn(t,function(){return ur(t,n,0,null,"paste")}),!0}function hr(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,i=n.ranges.length-1;0<=i;i--){var r=n.ranges[i];if(!(100<r.head.ch||i&&n.ranges[i-1].head.line==r.head.line)){var o=e.getModeAt(r.head),s=!1;if(o.electricChars){for(var a=0;a<o.electricChars.length;a++)if(-1<t.indexOf(o.electricChars.charAt(a))){s=lr(e,r.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(X(e.doc,r.head.line).text.slice(0,r.head.ch))&&(s=lr(e,r.head.line,"smart"));s&&Re(e,"electricInput",e,r.head.line)}}}function dr(e){for(var t=[],n=[],i=0;i<e.doc.sel.ranges.length;i++){var r=e.doc.sel.ranges[i].head.line;r={anchor:J(r,0),head:J(r+1,0)},n.push(r),t.push(e.getRange(r.anchor,r.head))}return{text:t,ranges:n}}function fr(e,t,n,i){e.setAttribute("autocorrect",n?"":"off"),e.setAttribute("autocapitalize",i?"":"off"),e.setAttribute("spellcheck",!!t)}function pr(){var e=m("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=m("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return Ar?e.style.width="1000px":e.setAttribute("wrap","off"),Ir&&(e.style.border="1px solid black"),fr(e),t}function gr(n,i,r,e,o){function t(e){var t=o?function(t,n,a,e){var l=O(n,t.doc.direction);if(!l)return Gi(n,a,e);a.ch>=n.text.length?(a.ch=n.text.length,a.sticky="before"):a.ch<=0&&(a.ch=0,a.sticky="after");var i=L(l,a.ch,a.sticky),r=l[i];if("ltr"==t.doc.direction&&0==r.level%2&&(0<e?r.to>a.ch:r.from<a.ch))return Gi(n,a,e);function u(e,t){return Ui(n,e instanceof J?e.ch:e,t)}function o(e){return t.options.lineWrapping?(s=s||ot(t,n),Ct(t,n,s,e)):{begin:0,end:n.text.length}}var s,c=o("before"==a.sticky?u(a,-1):a.ch);if("rtl"==t.doc.direction||1==r.level){var h=1==r.level==e<0,d=u(a,h?1:-1);if(null!=d&&(h?d<=r.to&&d<=c.end:d>=r.from&&d>=c.begin))return new J(a.line,d,h?"before":"after")}return(i=(r=function(e,t,n){function i(e,t){return t?new J(a.line,u(e,1),"before"):new J(a.line,e,"after")}for(;0<=e&&e<l.length;e+=t){var r=l[e],o=0<t==(1!=r.level),s=o?n.begin:u(n.end,-1);if(r.from<=s&&s<r.to)return i(s,o);if(s=o?r.from:u(r.to,-1),n.begin<=s&&s<n.end)return i(s,o)}})(i+e,e,c))?i:null==(c=0<e?c.end:u(c.begin,-1))||0<e&&c==n.text.length||!(i=r(0<e?0:l.length-1,e,o(c)))?null:i}(n.cm,l,i,r):Gi(l,i,r);if(null==t){if((e=!e)&&(e=!((e=i.line+r)<n.first||e>=n.first+n.size)&&(i=new J(e,i.ch,i.sticky),l=X(n,e))),!e)return!1;i=Xi(o,n.cm,l,i.line,r)}else i=t;return!0}var s=i,a=r,l=X(n,i.line);if("char"==e)t();else if("column"==e)t(!0);else if("word"==e||"group"==e){var u=null;e="group"==e;for(var c=n.cm&&n.cm.getHelper(i,"wordChars"),h=!0;!(r<0)||t(!h);h=!1){var d=l.text.charAt(i.ch)||"\n";if(d=f(d,c)?"w":e&&"\n"==d?"n":!e||/\s/.test(d)?null:"p",!e||h||d||(d="s"),u&&u!=d){r<0&&(r=1,t(),i.sticky="after");break}if(d&&(u=d),0<r&&!t(!h))break}}return te(s,a=di(n,i,s,a,!0))&&(a.hitSide=!0),a}function mr(e,t,n,i){var r=e.doc,o=t.left;if("page"==i){var s=Math.max(Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight)-.5*Lt(e.display),3);s=(0<n?t.bottom:t.top)+n*s}else"line"==i&&(s=0<n?t.bottom+3:t.top-3);for(;(t=bt(e,o,s)).outside;){if(n<0?s<=0:s>=r.height){t.hitSide=!0;break}s+=5*n}return t}function vr(e,t){var n=rt(e,t.line);if(!n||n.hidden)return null;var i=X(e.doc,t.line);return n=it(n,i,t.line),e=O(i,e.doc.direction),i="left",e&&(i=L(e,t.ch)%2?"right":"left"),(t=at(n.map,t.ch,i)).offset="right"==t.collapse?t.end:t.start,t}function yr(e,t){return t&&(e.bad=!0),e}function xr(e,t,n){if(t==e.display.lineDiv){var i=e.display.lineDiv.childNodes[n];if(!i)return yr(e.clipPos(J(e.display.viewTo-1)),!0);t=null,n=0}else for(i=t;;i=i.parentNode){if(!i||i==e.display.lineDiv)return null;if(i.parentNode&&i.parentNode==e.display.lineDiv)break}for(var r=0;r<e.display.view.length;r++){var o=e.display.view[r];if(o.node==i)return br(o,t,n)}}function br(a,e,t){function n(e,t,n){for(var i=-1;i<(u?u.length:0);i++)for(var r=i<0?l.map:u[i],o=0;o<r.length;o+=3){var s=r[o+2];if(s==e||s==t)return t=$(i<0?a.line:a.rest[i]),i=r[o]+n,(n<0||s!=e)&&(i=r[o+(n?1:0)]),J(t,i)}}var i=a.text.firstChild,r=!1;if(!e||!c(i,e))return yr(J($(a.line),0),!0);if(e==i&&(r=!0,e=i.childNodes[t],t=0,!e))return yr(J($(t=a.rest?g(a.rest):a.line),t.text.length),r);var o=3==e.nodeType?e:null,s=e;for(o||1!=e.childNodes.length||3!=e.firstChild.nodeType||(o=e.firstChild,t&&(t=o.nodeValue.length));s.parentNode!=i;)s=s.parentNode;var l=a.measure,u=l.maps;if(e=n(o,s,t))return yr(e,r);for(i=s.nextSibling,o=o?o.nodeValue.length-t:0;i;i=i.nextSibling){if(e=n(i,i.firstChild,0))return yr(J(e.line,e.ch-o),r);o+=i.textContent.length}for(s=s.previousSibling;s;s=s.previousSibling){if(e=n(s,s.firstChild,-1))return yr(J(e.line,e.ch+t),r);t+=s.textContent.length}}var wr=navigator.userAgent,Cr=navigator.platform,Sr=/gecko\/\d/i.test(wr),kr=/MSIE \d/.test(wr),Lr=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(wr),Mr=/Edge\/(\d+)/.exec(wr),Tr=kr||Lr||Mr,Dr=Tr&&(kr?document.documentMode||6:+(Mr||Lr)[1]),Ar=!Mr&&/WebKit\//.test(wr),Er=Ar&&/Qt\/\d+\.\d+/.test(wr),Nr=!Mr&&/Chrome\//.test(wr),Or=/Opera\//.test(wr),Fr=/Apple Computer/.test(navigator.vendor),zr=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(wr),Pr=/PhantomJS/.test(wr),Ir=!Mr&&/AppleWebKit/.test(wr)&&/Mobile\/\w+/.test(wr),Hr=/Android/.test(wr),Wr=Ir||Hr||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(wr),_r=Ir||/Mac/.test(Cr),Br=/\bCrOS\b/.test(wr),Rr=/win/i.test(Cr),jr=Or&&wr.match(/Version\/(\d*\.\d*)/);jr&&(jr=Number(jr[1])),jr&&15<=jr&&(Ar=!(Or=!1));var Ur=_r&&(Er||Or&&(null==jr||jr<12.11)),Gr=Sr||Tr&&9<=Dr,Xr=function(e,t){var n=e.className;if(t=a(t).exec(n)){var i=n.slice(t.index+t[0].length);e.className=n.slice(0,t.index)+(i?t[1]+i:"")}},Vr=document.createRange?function(e,t,n,i){var r=document.createRange();return r.setEnd(i||e,n),r.setStart(e,t),r}:function(e,t,n){var i=document.body.createTextRange();try{i.moveToElementText(e.parentNode)}catch(e){return i}return i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",t),i},Yr=function(e){e.select()};Ir?Yr=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:Tr&&(Yr=function(e){try{e.select()}catch(e){}});var qr=function(){this.id=null};qr.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var $r,Kr,Zr,Qr,Jr,eo,to,no,io={toString:function(){return"CodeMirror.Pass"}},ro={scroll:!1},oo={origin:"*mouse"},so={origin:"+move"},ao=[""],lo=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,uo=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,co=null,ho=(Qr=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,Jr=/[stwN]/,eo=/[LRr]/,to=/[Lb1n]/,no=/[1n]/,function(e,t){var n,i,r="ltr"==t?"L":"R";if(0==e.length||"ltr"==t&&!Qr.test(e))return!1;for(var o=e.length,s=[],a=0;a<o;++a)s.push((n=e.charCodeAt(a))<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(n):1424<=n&&n<=1524?"R":1536<=n&&n<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(n-1536):1774<=n&&n<=2220?"r":8192<=n&&n<=8203?"w":8204==n?"b":"L");a=0;for(var l=r;a<o;++a){var u=s[a];"m"==u?s[a]=l:l=u}for(a=0,l=r;a<o;++a)"1"==(u=s[a])&&"r"==l?s[a]="n":eo.test(u)&&"r"==(l=u)&&(s[a]="R");for(a=1,l=s[0];a<o-1;++a)"+"==(u=s[a])&&"1"==l&&"1"==s[a+1]?s[a]="1":","!=u||l!=s[a+1]||"1"!=l&&"n"!=l||(s[a]=l),l=u;for(a=0;a<o;++a)if(","==(l=s[a]))s[a]="N";else if("%"==l){for(l=a+1;l<o&&"%"==s[l];++l);for(u=a&&"!"==s[a-1]||l<o&&"1"==s[l]?"1":"N";a<l;++a)s[a]=u;a=l-1}for(a=0,l=r;a<o;++a)u=s[a],"L"==l&&"1"==u?s[a]="L":eo.test(u)&&(l=u);for(l=0;l<o;++l)if(Jr.test(s[l])){for(a=l+1;a<o&&Jr.test(s[a]);++a);for(u=(u="L"==(l?s[l-1]:r))==("L"==(a<o?s[a]:r))?u?"L":"R":r;l<a;++l)s[l]=u;l=a-1}for(r=[],a=0;a<o;)if(to.test(s[a])){for(l=a,++a;a<o&&to.test(s[a]);++a);r.push(new ko(0,l,a))}else{var c=a;for(l=r.length,++a;a<o&&"L"!=s[a];++a);for(u=c;u<a;)if(no.test(s[u])){for(c<u&&r.splice(l,0,new ko(1,c,u)),c=u,++u;u<a&&no.test(s[u]);++u);r.splice(l,0,new ko(2,c,u)),c=u}else++u;c<a&&r.splice(l,0,new ko(1,c,a))}return"ltr"==t&&(1==r[0].level&&(i=e.match(/^\s+/))&&(r[0].from=i[0].length,r.unshift(new ko(0,0,i[0].length))),1==g(r).level&&(i=e.match(/\s+$/))&&(g(r).to-=i[0].length,r.push(new ko(0,o-i[0].length,o)))),"rtl"==t?r.reverse():r}),fo=[],po=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):(e=e._handlers||(e._handlers={}))[t]=(e[t]||fo).concat(n)},go=function(){if(Tr&&Dr<9)return!1;var e=m("div");return"draggable"in e||"dragDrop"in e}(),mo=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],i=e.length;t<=i;){var r=e.indexOf("\n",t);-1==r&&(r=e.length);var o=e.slice(t,"\r"==e.charAt(r-1)?r-1:r),s=o.indexOf("\r");-1!=s?(n.push(o.slice(0,s)),t+=s+1):(n.push(o),t=r+1)}return n}:function(e){return e.split(/\r\n?|\n/)},vo=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},yo="oncopy"in(Zr=m("div"))||(Zr.setAttribute("oncopy","return;"),"function"==typeof Zr.oncopy),xo=null,bo={},wo={},Co={},So=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lineStart=this.lastColumnPos=this.lastColumnValue=0,this.lineOracle=n};function ko(e,t,n){this.level=e,this.from=t,this.to=n}So.prototype.eol=function(){return this.pos>=this.string.length},So.prototype.sol=function(){return this.pos==this.lineStart},So.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},So.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},So.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},So.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},So.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},So.prototype.skipToEnd=function(){this.pos=this.string.length},So.prototype.skipTo=function(e){if(-1<(e=this.string.indexOf(e,this.pos)))return this.pos=e,!0},So.prototype.backUp=function(e){this.pos-=e},So.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=x(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?x(this.string,this.lineStart,this.tabSize):0)},So.prototype.indentation=function(){return x(this.string,null,this.tabSize)-(this.lineStart?x(this.string,this.lineStart,this.tabSize):0)},So.prototype.match=function(e,t,n){if("string"!=typeof e)return(e=this.string.slice(this.pos).match(e))&&0<e.index?null:(e&&!1!==t&&(this.pos+=e[0].length),e);function i(e){return n?e.toLowerCase():e}return i(this.string.substr(this.pos,e.length))==i(e)?(!1!==t&&(this.pos+=e.length),!0):void 0},So.prototype.current=function(){return this.string.slice(this.start,this.pos)},So.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},So.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},So.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var Lo=function(e,t){this.state=e,this.lookAhead=t},Mo=function(e,t,n,i){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=i||0,this.baseTokens=null,this.baseTokenPos=1};Mo.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},Mo.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},Mo.prototype.nextLine=function(){this.line++,0<this.maxLookAhead&&this.maxLookAhead--},Mo.fromSaved=function(e,t,n){return t instanceof Lo?new Mo(e,j(e.mode,t.state),n,t.lookAhead):new Mo(e,j(e.mode,t),n)},Mo.prototype.save=function(e){return e=!1!==e?j(this.doc.mode,this.state):this.state,0<this.maxLookAhead?new Lo(e,this.maxLookAhead):e};function To(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n}var Do=!1,Ao=!1,Eo=function(e,t,n){this.text=e,we(this,t),this.height=n?n(this):1};Eo.prototype.lineNo=function(){return $(this)},e(Eo);function No(e,t,n){this.cm=n;var i=this.vert=m("div",[m("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),r=this.horiz=m("div",[m("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");i.tabIndex=r.tabIndex=-1,e(i),e(r),po(i,"scroll",function(){i.clientHeight&&t(i.scrollTop,"vertical")}),po(r,"scroll",function(){r.clientWidth&&t(r.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,Tr&&Dr<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}var Oo,Fo={},zo={},Po=null,Io=null,Ho={left:0,right:0,top:0,bottom:0};No.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,i=e.nativeBarWidth;return n?(this.vert.style.display="block",this.vert.style.bottom=t?i+"px":"0",this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+(e.viewHeight-(t?i:0)))+"px"):(this.vert.style.display="",this.vert.firstChild.style.height="0"),t?(this.horiz.style.display="block",this.horiz.style.right=n?i+"px":"0",this.horiz.style.left=e.barLeft+"px",this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+(e.viewWidth-e.barLeft-(n?i:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedZeroWidth&&0<e.clientHeight&&(0==i&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?i:0,bottom:t?i:0}},No.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},No.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},No.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=_r&&!zr?"12px":"18px",this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new qr,this.disableVert=new qr},No.prototype.enableZeroWidthBar=function(n,i,r){n.style.pointerEvents="auto",i.set(1e3,function e(){var t=n.getBoundingClientRect();("vert"==r?document.elementFromPoint(t.right-1,(t.top+t.bottom)/2):document.elementFromPoint((t.right+t.left)/2,t.bottom-1))!=n?n.style.pointerEvents="none":i.set(1e3,e)})},No.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};function Wo(){}Wo.prototype.update=function(){return{bottom:0,right:0}},Wo.prototype.setScrollLeft=function(){},Wo.prototype.setScrollTop=function(){},Wo.prototype.clear=function(){};var _o={native:No,null:Wo},Bo=0,Ro=function(e,t,n){var i=e.display;this.viewport=t,this.visible=Kt(i,e.doc,t),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.wrapperWidth=i.wrapper.clientWidth,this.oldDisplayWidth=tt(e),this.force=n,this.dims=Tt(e),this.events=[]};Ro.prototype.signal=function(e,t){d(e,t)&&this.events.push(arguments)},Ro.prototype.finish=function(){for(var e=0;e<this.events.length;e++)F.apply(null,this.events[e])};var jo=0,Uo=null;Tr?Uo=-.53:Sr?Uo=15:Nr?Uo=-.7:Fr&&(Uo=-1/3);var Go=function(e,t){this.ranges=e,this.primIndex=t};Go.prototype.primary=function(){return this.ranges[this.primIndex]},Go.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],i=e.ranges[t];if(!te(n.anchor,i.anchor)||!te(n.head,i.head))return!1}return!0},Go.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new Xo(ne(this.ranges[t].anchor),ne(this.ranges[t].head));return new Go(e,this.primIndex)},Go.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},Go.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var i=this.ranges[n];if(0<=ee(t,i.from())&&ee(e,i.to())<=0)return n}return-1};var Xo=function(e,t){this.anchor=e,this.head=t};Xo.prototype.from=function(){return re(this.anchor,this.head)},Xo.prototype.to=function(){return ie(this.anchor,this.head)},Xo.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Mi.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,i=e+t;n<i;++n){var r=this.lines[n];this.height-=r.height;var o=r;o.parent=null,be(o),Re(r,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){for(this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e)),e=0;e<t.length;++e)t[e].parent=this},iterN:function(e,t,n){for(t=e+t;e<t;++e)if(n(this.lines[e]))return!0}},Ti.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var i=this.children[n],r=i.chunkSize();if(e<r){var o=Math.min(t,r-e),s=i.height;if(i.removeInner(e,o),this.height-=s-i.height,r==o&&(this.children.splice(n--,1),i.parent=null),0==(t-=o))break;e=0}else e-=r}this.size-t<25&&(1<this.children.length||!(this.children[0]instanceof Mi))&&(e=[],this.collapse(e),this.children=[new Mi(e)],this.children[0].parent=this)},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(e<=o){if(r.insertInner(e,t,n),r.lines&&50<r.lines.length){for(t=e=r.lines.length%25+25;t<r.lines.length;)n=new Mi(r.lines.slice(t,t+=25)),r.height-=n.height,this.children.splice(++i,0,n),n.parent=this;r.lines=r.lines.slice(0,e),this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5);if(t=new Ti(t),e.parent){e.size-=t.size,e.height-=t.height;var n=v(e.parent.children,e);e.parent.children.splice(n+1,0,t)}else((n=new Ti(e.children)).parent=e).children=[n,t],e=n;t.parent=e.parent}while(10<e.children.length);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(e<o){if(o=Math.min(t,o-e),r.iterN(e,o,n))return!0;if(0==(t-=o))break;e=0}else e-=o}}};function Vo(e,t,n){if(n)for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);this.doc=e,this.node=t}Vo.prototype.clear=function(){var t=this.doc.cm,e=this.line.widgets,n=this.line,i=$(n);if(null!=i&&e){for(var r=0;r<e.length;++r)e[r]==this&&e.splice(r--,1);e.length||(n.widgets=null);var o=Ke(this);q(n,Math.max(0,n.height-o)),t&&(fn(t,function(){var e=-o;Ee(n)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&Qt(t,e),zt(t,i,"widget")}),Re(t,"lineWidgetCleared",t,this,i))}},Vo.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,i=this.line;this.height=null;var r=Ke(this)-t;r&&(De(this.doc,i)||q(i,i.height+r),n&&fn(n,function(){n.curOp.forceUpdate=!0,Ee(i)<(n.curOp&&n.curOp.scrollTop||n.doc.scrollTop)&&Qt(n,r),Re(n,"lineWidgetChanged",n,e,$(i))}))},e(Vo);var Yo=0,qo=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++Yo};qo.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&hn(e),d(this,"clear")){var n=this.find();n&&Re(this,"clear",n.from,n.to)}for(var i=n=null,r=0;r<this.lines.length;++r){var o=this.lines[r],s=ve(o.markedSpans,this);e&&!this.collapsed?zt(e,$(o),"text"):e&&(null!=s.to&&(i=$(o)),null!=s.from&&(n=$(o)));for(var a=o,l=void 0,u=o.markedSpans,c=s,h=0;h<u.length;++h)u[h]!=c&&(l||(l=[])).push(u[h]);a.markedSpans=l,null==s.from&&this.collapsed&&!De(this.doc,o)&&e&&q(o,Lt(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(r=0;r<this.lines.length;++r)(s=Ne(o=Le(this.lines[r])))>e.display.maxLineLength&&(e.display.maxLine=o,e.display.maxLineLength=s,e.display.maxLineChanged=!0);null!=n&&e&&this.collapsed&&Ft(e,n,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&ui(e.doc)),e&&Re(e,"markerCleared",e,this,n,i),t&&dn(e),this.parent&&this.parent.clear()}},qo.prototype.find=function(e,t){null==e&&"bookmark"==this.type&&(e=1);for(var n,i,r=0;r<this.lines.length;++r){var o=this.lines[r],s=ve(o.markedSpans,this);if(null!=s.from&&(n=J(t?o:$(o),s.from),-1==e))return n;if(null!=s.to&&(i=J(t?o:$(o),s.to),1==e))return i}return n&&{from:n,to:i}},qo.prototype.changed=function(){var n=this,i=this.find(-1,!0),r=this,o=this.doc.cm;i&&o&&fn(o,function(){var e=i.line,t=$(i.line);(t=rt(o,t))&&(lt(t),o.curOp.selectionChanged=o.curOp.forceUpdate=!0),o.curOp.updateMaxLine=!0,De(r.doc,e)||null==r.height||(t=r.height,r.height=null,(t=Ke(r)-t)&&q(e,e.height+t)),Re(o,"markerChanged",o,n)})},qo.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=v(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},qo.prototype.detachLine=function(e){this.lines.splice(v(this.lines,e),1),!this.lines.length&&this.doc.cm&&((e=this.doc.cm.curOp).maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)},e(qo);var $o=function(e,t){for(this.markers=e,this.primary=t,t=0;t<e.length;++t)e[t].parent=this};$o.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Re(this,"clear")}},$o.prototype.find=function(e,t){return this.primary.find(e,t)},e($o);var Ko=0,Zo=function(e,t,n,i,r){if(!(this instanceof Zo))return new Zo(e,t,n,i,r);null==n&&(n=0),Ti.call(this,[new Mi([new Eo("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n,n=J(n,0),this.sel=zn(n),this.history=new Vn(null),this.id=++Ko,this.modeOption=t,this.lineSep=i,this.direction="rtl"==r?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),jn(this,{from:n,to:n,text:e}),si(this,zn(n),ro)};Zo.prototype=r(Ti.prototype,{constructor:Zo,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,i=0;i<t.length;++i)n+=t[i].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Y(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:mn(function(e){var t=J(this.first,0),n=this.first+this.size-1;mi(this,{from:t,to:J(n,X(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&en(this.cm,0,0),si(this,zn(t),ro)}),replaceRange:function(e,t,n,i){wi(this,e,t=oe(this,t),n=n?oe(this,n):t,i)},getRange:function(e,t,n){return e=V(this,oe(this,e),oe(this,t)),!1===n?e:e.join(n||this.lineSeparator())},getLine:function(e){return(e=this.getLineHandle(e))&&e.text},getLineHandle:function(e){if(Z(this,e))return X(this,e)},getLineNumber:function(e){return $(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=X(this,e)),Le(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return oe(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:mn(function(e,t,n){si(this,zn(e=oe(this,"number"==typeof e?J(e,t||0):e),null),n)}),setSelection:mn(function(e,t,n){si(this,zn(oe(this,e),e=oe(this,t||e)),n)}),extendSelection:mn(function(e,t,n){ni(this,oe(this,e),t&&oe(this,t),n)}),extendSelections:mn(function(e,t){ii(this,se(this,e),t)}),extendSelectionsBy:mn(function(e,t){ii(this,se(this,e=C(this.sel.ranges,e)),t)}),setSelections:mn(function(e,t,n){if(e.length){for(var i=[],r=0;r<e.length;r++)i[r]=new Xo(oe(this,e[r].anchor),oe(this,e[r].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),si(this,Fn(this.cm,i,t),n)}}),addSelection:mn(function(e,t,n){var i=this.sel.ranges.slice(0);i.push(new Xo(oe(this,e),oe(this,t||e))),si(this,Fn(this.cm,i,i.length-1),n)}),getSelection:function(e){for(var t,n=this.sel.ranges,i=0;i<n.length;i++){var r=V(this,n[i].from(),n[i].to());t=t?t.concat(r):r}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,i=0;i<n.length;i++){var r=V(this,n[i].from(),n[i].to());!1!==e&&(r=r.join(e||this.lineSeparator())),t[i]=r}return t},replaceSelection:function(e,t,n){for(var i=[],r=0;r<this.sel.ranges.length;r++)i[r]=e;this.replaceSelections(i,t,n||"+input")},replaceSelections:mn(function(e,t,n){for(var i=[],r=this.sel,o=0;o<r.ranges.length;o++){var s=r.ranges[o];i[o]={from:s.from(),to:s.to(),text:this.splitLines(e[o]),origin:n}}if(e=t&&"end"!=t){for(e=[],r=n=J(this.first,0),o=0;o<i.length;o++){var a=i[o];s=Wn(a.from,n,r);var l=Wn(Pn(a),n,r);n=a.to,r=l,"around"==t?(a=ee((a=this.sel.ranges[o]).head,a.anchor)<0,e[o]=new Xo(a?l:s,a?s:l)):e[o]=new Xo(s,s)}e=new Go(e,this.sel.primIndex)}for(t=e,e=i.length-1;0<=e;e--)mi(this,i[e]);t?oi(this,t):this.cm&&Jt(this.cm)}),undo:mn(function(){yi(this,"undo")}),redo:mn(function(){yi(this,"redo")}),undoSelection:mn(function(){yi(this,"undo",!0)}),redoSelection:mn(function(){yi(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,i=0;i<e.done.length;i++)e.done[i].ranges||++t;for(i=0;i<e.undone.length;i++)e.undone[i].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){this.history=new Vn(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:ei(this.history.done),undone:ei(this.history.undone)}},setHistory:function(e){var t=this.history=new Vn(this.history.maxGeneration);t.done=ei(e.done.slice(0),null,!0),t.undone=ei(e.undone.slice(0),null,!0)},setGutterMarker:mn(function(e,n,i){return Li(this,e,"gutter",function(e){var t=e.gutterMarkers||(e.gutterMarkers={});return!(t[n]=i)&&s(t)&&(e.gutterMarkers=null),!0})}),clearGutter:mn(function(t){var n=this;this.iter(function(e){e.gutterMarkers&&e.gutterMarkers[t]&&Li(n,e,"gutter",function(){return e.gutterMarkers[t]=null,s(e.gutterMarkers)&&(e.gutterMarkers=null),!0})})}),lineInfo:function(e){if("number"==typeof e){if(!Z(this,e))return null;var t=e;if(!(e=X(this,e)))return null}else if(null==(t=$(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:mn(function(e,n,i){return Li(this,e,"gutter"==n?"gutter":"class",function(e){var t="text"==n?"textClass":"background"==n?"bgClass":"gutter"==n?"gutterClass":"wrapClass";if(e[t]){if(a(i).test(e[t]))return!1;e[t]+=" "+i}else e[t]=i;return!0})}),removeLineClass:mn(function(e,o,s){return Li(this,e,"gutter"==o?"gutter":"class",function(e){var t="text"==o?"textClass":"background"==o?"bgClass":"gutter"==o?"gutterClass":"wrapClass",n=e[t];if(!n)return!1;if(null==s)e[t]=null;else{var i=n.match(a(s));if(!i)return!1;var r=i.index+i[0].length;e[t]=n.slice(0,i.index)+(i.index&&r!=n.length?" ":"")+n.slice(r)||null}return!0})}),addLineWidget:mn(function(e,t,n){return function(n,e,t,i){var r=new Vo(n,t,i),o=n.cm;return o&&r.noHScroll&&(o.display.alignWidgets=!0),Li(n,e,"widget",function(e){var t=e.widgets||(e.widgets=[]);return null==r.insertAt?t.push(r):t.splice(Math.min(t.length-1,Math.max(0,r.insertAt)),0,r),r.line=e,o&&!De(n,e)&&(t=Ee(e)<n.scrollTop,q(e,e.height+Ke(r)),t&&Qt(o,r.height),o.curOp.forceUpdate=!0),!0}),o&&Re(o,"lineWidgetAdded",o,r,"number"==typeof e?e:$(e)),r}(this,e,t,n)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return Di(this,oe(this,e),oe(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){return t={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents},Di(this,e=oe(this,e),e,t,"bookmark")},findMarksAt:function(e){var t=[],n=X(this,(e=oe(this,e)).line).markedSpans;if(n)for(var i=0;i<n.length;++i){var r=n[i];(null==r.from||r.from<=e.ch)&&(null==r.to||r.to>=e.ch)&&t.push(r.marker.parent||r.marker)}return t},findMarks:function(i,r,o){i=oe(this,i),r=oe(this,r);var s=[],a=i.line;return this.iter(i.line,r.line+1,function(e){if(e=e.markedSpans)for(var t=0;t<e.length;t++){var n=e[t];null!=n.to&&a==i.line&&i.ch>=n.to||null==n.from&&a!=i.line||null!=n.from&&a==r.line&&n.from>=r.ch||o&&!o(n.marker)||s.push(n.marker.parent||n.marker)}++a}),s},getAllMarks:function(){var n=[];return this.iter(function(e){if(e=e.markedSpans)for(var t=0;t<e.length;++t)null!=e[t].from&&n.push(e[t].marker)}),n},posFromIndex:function(t){var n,i=this.first,r=this.lineSeparator().length;return this.iter(function(e){if(e=e.text.length+r,t<e)return n=t,!0;t-=e,++i}),oe(this,J(i,n))},indexFromPos:function(e){var t=(e=oe(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,function(e){t+=e.text.length+n}),t},copy:function(e){var t=new Zo(Y(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;for(null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to),t=new Zo(Y(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction),e.sharedHist&&(t.history=this.history),(this.linked||(this.linked=[])).push({doc:t,sharedHist:e.sharedHist}),t.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],e=Ai(this),n=0;n<e.length;n++){var i=e[n],r=i.find(),o=t.clipPos(r.from);ee(o,r=t.clipPos(r.to))&&(o=Di(t,o,r,i.primary,i.primary.type),i.markers.push(o),o.parent=i)}return t},unlinkDoc:function(e){if(e instanceof ar&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t)if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),Ei(Ai(this));break}if(e.history==this.history){var n=[e.id];Un(e,function(e){return n.push(e.id)},!0),e.history=new Vn(null),e.history.done=ei(this.history.done,n),e.history.undone=ei(this.history.undone,n)}},iterLinkedDocs:function(e){Un(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):mo(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:mn(function(e){"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(e){return e.order=null}),this.cm&&function(e){fn(e,function(){Xn(e),Ft(e)})}(this.cm))})}),Zo.prototype.eachLine=Zo.prototype.iter;for(var Qo=0,Jo=!1,es={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},ts=0;ts<10;ts++)es[ts+48]=es[ts+96]=String(ts);for(var ns=65;ns<=90;ns++)es[ns]=String.fromCharCode(ns);for(var is=1;is<=12;is++)es[is+111]=es[is+63235]="F"+is;var rs={basic:{Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},pcDefault:{"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},emacsy:{"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},macDefault:{"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]}};rs.default=_r?rs.macDefault:rs.pcDefault;var os={selectAll:pi,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),ro)},killLine:function(n){return ji(n,function(e){if(e.empty()){var t=X(n.doc,e.head.line).text.length;return e.head.ch==t&&e.head.line<n.lastLine()?{from:e.head,to:J(e.head.line+1,0)}:{from:e.head,to:J(e.head.line,t)}}return{from:e.from(),to:e.to()}})},deleteLine:function(t){return ji(t,function(e){return{from:J(e.from().line,0),to:oe(t.doc,J(e.to().line+1,0))}})},delLineLeft:function(e){return ji(e,function(e){return{from:J(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(n){return ji(n,function(e){var t=n.charCoords(e.head,"div").top+5;return{from:n.coordsChar({left:0,top:t},"div"),to:e.from()}})},delWrappedLineRight:function(n){return ji(n,function(e){var t=n.charCoords(e.head,"div").top+5;return t=n.coordsChar({left:n.display.lineDiv.offsetWidth+100,top:t},"div"),{from:e.from(),to:t}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(J(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(J(e.lastLine()))},goLineStart:function(t){return t.extendSelectionsBy(function(e){return Vi(t,e.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(t){return t.extendSelectionsBy(function(e){return Yi(t,e.head)},{origin:"+move",bias:1})},goLineEnd:function(r){return r.extendSelectionsBy(function(e){e=e.head.line;for(var t,n=X(r.doc,e),i=n;t=Se(i,!1);)i=t.find(1,!0).line;return i!=n&&(e=$(i)),Xi(!0,r,n,e,-1)},{origin:"+move",bias:-1})},goLineRight:function(t){return t.extendSelectionsBy(function(e){return e=t.cursorCoords(e.head,"div").top+5,t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:e},"div")},so)},goLineLeft:function(t){return t.extendSelectionsBy(function(e){return e=t.cursorCoords(e.head,"div").top+5,t.coordsChar({left:0,top:e},"div")},so)},goLineLeftSmart:function(n){return n.extendSelectionsBy(function(e){var t=n.cursorCoords(e.head,"div").top+5;return(t=n.coordsChar({left:0,top:t},"div")).ch<n.getLine(t.line).search(/\S/)?Yi(n,e.head):t},so)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"char")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),i=e.options.tabSize,r=0;r<n.length;r++){var o=n[r].from();o=x(e.getLine(o.line),o.ch,i),t.push(w(i-o%i))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(s){return fn(s,function(){for(var e=s.listSelections(),t=[],n=0;n<e.length;n++)if(e[n].empty()){var i=e[n].head,r=X(s.doc,i.line).text;if(r)if(i.ch==r.length&&(i=new J(i.line,i.ch-1)),0<i.ch)i=new J(i.line,i.ch+1),s.replaceRange(r.charAt(i.ch-1)+r.charAt(i.ch-2),J(i.line,i.ch-2),i,"+transpose");else if(i.line>s.doc.first){var o=X(s.doc,i.line-1).text;o&&(i=new J(i.line,1),s.replaceRange(r.charAt(0)+s.doc.lineSeparator()+o.charAt(o.length-1),J(i.line-1,o.length-1),i,"+transpose"))}t.push(new Xo(i,i))}s.setSelections(t)})},newlineAndIndent:function(n){return fn(n,function(){for(var e=n.listSelections(),t=e.length-1;0<=t;t--)n.replaceRange(n.doc.lineSeparator(),e[t].anchor,e[t].head,"+input");for(e=n.listSelections(),t=0;t<e.length;t++)n.indentLine(e[t].from().line,null,!0);Jt(n)})},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}},ss=new qr,as=null,ls=function(e,t,n){this.time=e,this.pos=t,this.button=n};ls.prototype.compare=function(e,t,n){return this.time+400>e&&0==ee(t,this.pos)&&n==this.button};var us,cs,hs={toString:function(){return"CodeMirror.Init"}},ds={},fs={};ar.defaults=ds,ar.optionHandlers=fs;var ps=[];ar.defineInitHook=function(e){return ps.push(e)};function gs(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new qr,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null}var ms=null;gs.prototype.init=function(e){function t(e){if(!T(s,e)){if(s.somethingSelected())ms={lineWise:!1,text:s.getSelections()},"cut"==e.type&&s.replaceSelection("",null,"cut");else{if(!s.options.lineWiseCopyCut)return;var t=dr(s);ms={lineWise:!0,text:t.text},"cut"==e.type&&s.operation(function(){s.setSelections(t.ranges,0,ro),s.replaceSelection("",null,"cut")})}if(e.clipboardData){e.clipboardData.clearData();var n=ms.text.join("\n");if(e.clipboardData.setData("Text",n),e.clipboardData.getData("Text")==n)return void e.preventDefault()}var i=pr();e=i.firstChild,s.display.lineSpace.insertBefore(i,s.display.lineSpace.firstChild),e.value=ms.text.join("\n");var r=document.activeElement;Yr(e),setTimeout(function(){s.display.lineSpace.removeChild(i),r.focus(),r==a&&o.showPrimarySelection()},50)}}var n=this,o=this,s=o.cm,a=o.div=e.lineDiv;fr(a,s.options.spellcheck,s.options.autocorrect,s.options.autocapitalize),po(a,"paste",function(e){T(s,e)||cr(e,s)||Dr<=11&&setTimeout(pn(s,function(){return n.updateFromDOM()}),20)}),po(a,"compositionstart",function(e){n.composing={data:e.data,done:!1}}),po(a,"compositionupdate",function(e){n.composing||(n.composing={data:e.data,done:!1})}),po(a,"compositionend",function(e){n.composing&&(e.data!=n.composing.data&&n.readFromDOMSoon(),n.composing.done=!0)}),po(a,"touchstart",function(){return o.forceCompositionEnd()}),po(a,"input",function(){n.composing||n.readFromDOMSoon()}),po(a,"copy",t),po(a,"cut",t)},gs.prototype.prepareSelection=function(){var e=_t(this.cm,!1);return e.focus=this.cm.state.focused,e},gs.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},gs.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},gs.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,n=t.doc.sel.primary(),i=n.from();if(n=n.to(),t.display.viewTo==t.display.viewFrom||i.line>=t.display.viewTo||n.line<t.display.viewFrom)e.removeAllRanges();else{var r=xr(t,e.anchorNode,e.anchorOffset),o=xr(t,e.focusNode,e.focusOffset);if(!r||r.bad||!o||o.bad||0!=ee(re(r,o),i)||0!=ee(ie(r,o),n))if(r=t.display.view,i=i.line>=t.display.viewFrom&&vr(t,i)||{node:r[0].measure.map[2],offset:0},(n=n.line<t.display.viewTo&&vr(t,n))||(n={node:(n=(n=r[r.length-1].measure).maps?n.maps[n.maps.length-1]:n.map)[n.length-1],offset:n[n.length-2]-n[n.length-3]}),i&&n){r=e.rangeCount&&e.getRangeAt(0);try{var s=Vr(i.node,i.offset,n.offset,n.node)}catch(e){}s&&(!Sr&&t.state.focused?(e.collapse(i.node,i.offset),s.collapsed||(e.removeAllRanges(),e.addRange(s))):(e.removeAllRanges(),e.addRange(s)),r&&null==e.anchorNode?e.addRange(r):Sr&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}},gs.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},gs.prototype.showMultipleSelections=function(e){A(this.cm.display.cursorDiv,e.cursors),A(this.cm.display.selectionDiv,e.selection)},gs.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},gs.prototype.selectionInEditor=function(){var e=this.getSelection();return!!e.rangeCount&&(e=e.getRangeAt(0).commonAncestorContainer,c(this.div,e))},gs.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},gs.prototype.blur=function(){this.div.blur()},gs.prototype.getField=function(){return this.div},gs.prototype.supportsTouch=function(){return!0},gs.prototype.receivedFocus=function(){var t=this;this.selectionInEditor()?this.pollSelection():fn(this.cm,function(){return t.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))})},gs.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},gs.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(Hr&&Nr&&this.cm.display.gutterSpecs.length&&function(e){for(;e;e=e.parentNode)if(/CodeMirror-gutter-wrapper/.test(e.className))return!0;return!1}(e.anchorNode))this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();else if(!this.composing){this.rememberSelection();var n=xr(t,e.anchorNode,e.anchorOffset),i=xr(t,e.focusNode,e.focusOffset);n&&i&&fn(t,function(){si(t.doc,zn(n,i),ro),(n.bad||i.bad)&&(t.curOp.selectionChanged=!0)})}}},gs.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t=this.cm,n=t.display,i=t.doc.sel.primary(),r=i.from(),o=i.to();if(0==r.ch&&r.line>t.firstLine()&&(r=J(r.line-1,X(t.doc,r.line-1).length)),o.ch==X(t.doc,o.line).text.length&&o.line<t.lastLine()&&(o=J(o.line+1,0)),r.line<n.viewFrom||o.line>n.viewTo-1)return!1;e=r.line==n.viewFrom||0==(e=Ot(t,r.line))?(i=$(n.view[0].line),n.view[0].node):(i=$(n.view[e].line),n.view[e-1].node.nextSibling);var s=Ot(t,o.line);if(n=s==n.view.length-1?(o=n.viewTo-1,n.lineDiv.lastChild):(o=$(n.view[s+1].line)-1,n.view[s+1].node.previousSibling),!e)return!1;for(n=t.doc.splitLines(function(i,e,t,r,o){function s(){u&&(n+=c,h&&(n+=c),u=h=!1)}function a(e){e&&(s(),n+=e)}function l(e){if(1==e.nodeType){var t,n=e.getAttribute("cm-text");if(n)a(n);else if(n=e.getAttribute("cm-marker"))(e=i.findMarks(J(r,0),J(o+1,0),function(t){return function(e){return e.id==t}}(+n))).length&&(t=e[0].find(0))&&a(V(i.doc,t.from,t.to).join(c));else if("false"!=e.getAttribute("contenteditable")&&(t=/^(pre|div|p|li|table|br)$/i.test(e.nodeName),/^br$/i.test(e.nodeName)||0!=e.textContent.length)){for(t&&s(),n=0;n<e.childNodes.length;n++)l(e.childNodes[n]);/^(pre|p)$/i.test(e.nodeName)&&(h=!0),t&&(u=!0)}}else 3==e.nodeType&&a(e.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(var n="",u=!1,c=i.doc.lineSeparator(),h=!1;l(e),e!=t;)e=e.nextSibling,h=!1;return n}(t,e,n,i,o)),e=V(t.doc,J(i,0),J(o,X(t.doc,o).text.length));1<n.length&&1<e.length;)if(g(n)==g(e))n.pop(),e.pop(),o--;else{if(n[0]!=e[0])break;n.shift(),e.shift(),i++}for(var a=0,l=n[s=0],u=e[0],c=Math.min(l.length,u.length);a<c&&l.charCodeAt(a)==u.charCodeAt(a);)++a;for(l=g(n),u=g(e),c=Math.min(l.length-(1==n.length?a:0),u.length-(1==e.length?a:0));s<c&&l.charCodeAt(l.length-s-1)==u.charCodeAt(u.length-s-1);)++s;if(1==n.length&&1==e.length&&i==r.line)for(;a&&a>r.ch&&l.charCodeAt(l.length-s-1)==u.charCodeAt(u.length-s-1);)a--,s++;return n[n.length-1]=l.slice(0,l.length-s).replace(/^\u200b+/,""),n[0]=n[0].slice(a).replace(/\u200b+$/,""),r=J(i,a),i=J(o,e.length?g(e).length-s:0),1<n.length||n[0]||ee(r,i)?(wi(t.doc,n,r,i,"+input"),!0):void 0},gs.prototype.ensurePolled=function(){this.forceCompositionEnd()},gs.prototype.reset=function(){this.forceCompositionEnd()},gs.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},gs.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()},80))},gs.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||fn(this.cm,function(){return Ft(e.cm)})},gs.prototype.setUneditable=function(e){e.contentEditable="false"},gs.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||pn(this.cm,ur)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},gs.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},gs.prototype.onContextMenu=function(){},gs.prototype.resetPosition=function(){},gs.prototype.needsContentAttribute=!0;function vs(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new qr,this.hasSelection=!1,this.composing=null}var ys,xs,bs,ws,Cs;function Ss(e,t,i,n){ys.defaults[e]=t,i&&(xs[e]=n?function(e,t,n){n!=hs&&i(e,t,n)}:i)}vs.prototype.init=function(n){function e(e){if(!T(r,e)){if(r.somethingSelected())ms={lineWise:!1,text:r.getSelections()};else{if(!r.options.lineWiseCopyCut)return;var t=dr(r);ms={lineWise:!0,text:t.text},"cut"==e.type?r.setSelections(t.ranges,null,ro):(i.prevInput="",o.value=t.text.join("\n"),Yr(o))}"cut"==e.type&&(r.state.cutIncoming=+new Date)}}var t=this,i=this,r=this.cm;this.createField(n);var o=this.textarea;n.wrapper.insertBefore(this.wrapper,n.wrapper.firstChild),Ir&&(o.style.width="0px"),po(o,"input",function(){Tr&&9<=Dr&&t.hasSelection&&(t.hasSelection=null),i.poll()}),po(o,"paste",function(e){T(r,e)||cr(e,r)||(r.state.pasteIncoming=+new Date,i.fastPoll())}),po(o,"cut",e),po(o,"copy",e),po(n.scroller,"paste",function(e){if(!Ze(n,e)&&!T(r,e))if(o.dispatchEvent){var t=new Event("paste");t.clipboardData=e.clipboardData,o.dispatchEvent(t)}else r.state.pasteIncoming=+new Date,i.focus()}),po(n.lineSpace,"selectstart",function(e){Ze(n,e)||z(e)}),po(o,"compositionstart",function(){var e=r.getCursor("from");i.composing&&i.composing.range.clear(),i.composing={start:e,range:r.markText(e,r.getCursor("to"),{className:"CodeMirror-composing"})}}),po(o,"compositionend",function(){i.composing&&(i.poll(),i.composing.range.clear(),i.composing=null)})},vs.prototype.createField=function(e){this.wrapper=pr(),this.textarea=this.wrapper.firstChild},vs.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,i=_t(e);if(e.options.moveInputWithCursor){e=vt(e,n.sel.primary().head,"div"),n=t.wrapper.getBoundingClientRect();var r=t.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,e.top+r.top-n.top)),i.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,e.left+r.left-n.left))}return i},vs.prototype.showSelection=function(e){var t=this.cm.display;A(t.cursorDiv,e.cursors),A(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},vs.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;t.somethingSelected()?(this.prevInput="",e=t.getSelection(),this.textarea.value=e,t.state.focused&&Yr(this.textarea),Tr&&9<=Dr&&(this.hasSelection=e)):e||(this.prevInput=this.textarea.value="",Tr&&9<=Dr&&(this.hasSelection=null))}},vs.prototype.getField=function(){return this.textarea},vs.prototype.supportsTouch=function(){return!1},vs.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!Wr||y()!=this.textarea))try{this.textarea.focus()}catch(e){}},vs.prototype.blur=function(){this.textarea.blur()},vs.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},vs.prototype.receivedFocus=function(){this.slowPoll()},vs.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},vs.prototype.fastPoll=function(){var t=!1,n=this;n.pollingFast=!0,n.polling.set(20,function e(){n.poll()||t?(n.pollingFast=!1,n.slowPoll()):(t=!0,n.polling.set(60,e))})},vs.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,i=this.prevInput;if(this.contextMenuPending||!t.state.focused||vo(n)&&!i&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var r=n.value;if(r==i&&!t.somethingSelected())return!1;if(Tr&&9<=Dr&&this.hasSelection===r||_r&&/[\uf700-\uf7ff]/.test(r))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var o=r.charCodeAt(0);if(8203!=o||i||(i="​"),8666==o)return this.reset(),this.cm.execCommand("undo")}var s=0;for(o=Math.min(i.length,r.length);s<o&&i.charCodeAt(s)==r.charCodeAt(s);)++s;return fn(t,function(){ur(t,r.slice(s),i.length-s,null,e.composing?"*compose":null),1e3<r.length||-1<r.indexOf("\n")?n.value=e.prevInput="":e.prevInput=r,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},vs.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},vs.prototype.onKeyPress=function(){Tr&&9<=Dr&&(this.hasSelection=null),this.fastPoll()},vs.prototype.onContextMenu=function(e){function n(){if(null!=a.selectionStart){var e=o.somethingSelected(),t="​"+(e?a.value:"");a.value="⇚",a.value=t,r.prevInput=e?"":"​",a.selectionStart=1,a.selectionEnd=t.length,s.selForContextMenu=o.doc.sel}}function i(){if(r.contextMenuPending==i&&(r.contextMenuPending=!1,r.wrapper.style.cssText=c,a.style.cssText=u,Tr&&Dr<9&&s.scrollbars.setScrollTop(s.scroller.scrollTop=l),null!=a.selectionStart)){(!Tr||Tr&&Dr<9)&&n();var e=0,t=function(){s.selForContextMenu==o.doc.sel&&0==a.selectionStart&&0<a.selectionEnd&&"​"==r.prevInput?pn(o,pi)(o):e++<10?s.detectingSelectAll=setTimeout(t,500):(s.selForContextMenu=null,s.input.reset())};s.detectingSelectAll=setTimeout(t,200)}}var r=this,o=r.cm,s=o.display,a=r.textarea;r.contextMenuPending&&r.contextMenuPending();var t=Nt(o,e),l=s.scroller.scrollTop;if(t&&!Or){o.options.resetSelectionOnContextMenu&&-1==o.doc.sel.contains(t)&&pn(o,si)(o.doc,zn(t),ro);var u=a.style.cssText,c=r.wrapper.style.cssText;if(t=r.wrapper.offsetParent.getBoundingClientRect(),r.wrapper.style.cssText="position: static",a.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-t.top-5)+"px; left: "+(e.clientX-t.left-5)+"px;\n      z-index: 1000; background: "+(Tr?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",Ar)var h=window.scrollY;if(s.input.focus(),Ar&&window.scrollTo(null,h),s.input.reset(),o.somethingSelected()||(a.value=r.prevInput=" "),r.contextMenuPending=i,s.selForContextMenu=o.doc.sel,clearTimeout(s.detectingSelectAll),Tr&&9<=Dr&&n(),Gr){I(e);var d=function(){M(window,"mouseup",d),setTimeout(i,20)};po(window,"mouseup",d)}else setTimeout(i,50)}},vs.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e},vs.prototype.setUneditable=function(){},vs.prototype.needsContentAttribute=!1,xs=(ys=ar).optionHandlers,ys.defineOption=Ss,ys.Init=hs,Ss("value","",function(e,t){return e.setValue(t)},!0),Ss("mode",null,function(e,t){e.doc.modeOption=t,_n(e)},!0),Ss("indentUnit",2,_n,!0),Ss("indentWithTabs",!1),Ss("smartIndent",!0),Ss("tabSize",4,function(e){Bn(e),ct(e),Ft(e)},!0),Ss("lineSeparator",null,function(e,i){if(e.doc.lineSep=i){var r=[],o=e.doc.first;e.doc.iter(function(e){for(var t=0;;){var n=e.text.indexOf(i,t);if(-1==n)break;t=n+i.length,r.push(J(o,n))}o++});for(var t=r.length-1;0<=t;t--)wi(e.doc,i,r[t],J(r[t].line,r[t].ch+i.length))}}),Ss("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(e,t,n){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),n!=hs&&e.refresh()}),Ss("specialCharPlaceholder",Pe,function(e){return e.refresh()},!0),Ss("electricChars",!0),Ss("inputStyle",Wr?"contenteditable":"textarea",function(){throw Error("inputStyle can not (yet) be changed in a running editor")},!0),Ss("spellcheck",!1,function(e,t){return e.getInputField().spellcheck=t},!0),Ss("autocorrect",!1,function(e,t){return e.getInputField().autocorrect=t},!0),Ss("autocapitalize",!1,function(e,t){return e.getInputField().autocapitalize=t},!0),Ss("rtlMoveVisually",!Rr),Ss("wholeLineUpdateBefore",!0),Ss("theme","default",function(e){rr(e),Dn(e)},!0),Ss("keyMap","default",function(e,t,n){t=Ri(t),(n=n!=hs&&Ri(n))&&n.detach&&n.detach(e,t),t.attach&&t.attach(e,n||null)}),Ss("extraKeys",null),Ss("configureMouse",null),Ss("lineWrapping",!1,sr,!0),Ss("gutters",[],function(e,t){e.display.gutterSpecs=Mn(t,e.options.lineNumbers),Dn(e)},!0),Ss("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?Dt(e.display)+"px":"0",e.refresh()},!0),Ss("coverGutterNextToScrollbar",!1,function(e){return ln(e)},!0),Ss("scrollbarStyle","native",function(e){cn(e),ln(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),Ss("lineNumbers",!1,function(e,t){e.display.gutterSpecs=Mn(e.options.gutters,t),Dn(e)},!0),Ss("firstLineNumber",1,Dn,!0),Ss("lineNumberFormatter",function(e){return e},Dn,!0),Ss("showCursorWhenSelecting",!1,Wt,!0),Ss("resetSelectionOnContextMenu",!0),Ss("lineWiseCopyCut",!0),Ss("pasteLinesPerSelection",!0),Ss("selectionsMayTouch",!1),Ss("readOnly",!1,function(e,t){"nocursor"==t&&(Yt(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)}),Ss("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),Ss("dragDrop",!0,or),Ss("allowDropFileTypes",null),Ss("cursorBlinkRate",530),Ss("cursorScrollMargin",0),Ss("cursorHeight",1,Wt,!0),Ss("singleCursorHeightPerLine",!0,Wt,!0),Ss("workTime",100),Ss("workDelay",100),Ss("flattenSpans",!0,Bn,!0),Ss("addModeClass",!1,Bn,!0),Ss("pollInterval",100),Ss("undoDepth",200,function(e,t){return e.doc.history.undoDepth=t}),Ss("historyEventDelay",1250),Ss("viewportMargin",10,function(e){return e.refresh()},!0),Ss("maxHighlightLength",1e4,Bn,!0),Ss("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),Ss("tabindex",null,function(e,t){return e.display.input.getField().tabIndex=t||""}),Ss("autofocus",null),Ss("direction","ltr",function(e,t){return e.doc.setDirection(t)},!0),Ss("phrases",null),ws=(bs=ar).optionHandlers,Cs=bs.helpers={},bs.prototype={constructor:bs,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,t){var n=this.options,i=n[e];n[e]==t&&"mode"!=e||(n[e]=t,ws.hasOwnProperty(e)&&pn(this,ws[e])(this,t,i),F(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](Ri(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:gn(function(e,t){var n=e.token?e:bs.getMode(this.options,e);if(n.startState)throw Error("Overlays may not be stateful.");!function(e,t,n){for(var i=0,r=n(t);i<e.length&&n(e[i])<=r;)i++;e.splice(i,0,t)}(this.state.overlays,{mode:n,modeSpec:e,opaque:t&&t.opaque,priority:t&&t.priority||0},function(e){return e.priority}),this.state.modeGen++,Ft(this)}),removeOverlay:gn(function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var i=t[n].modeSpec;if(i==e||"string"==typeof e&&i.name==e){t.splice(n,1),this.state.modeGen++,Ft(this);break}}}),indentLine:gn(function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),Z(this.doc,e)&&lr(this,e,t,n)}),indentSelection:gn(function(e){for(var t=this.doc.sel.ranges,n=-1,i=0;i<t.length;i++){var r=t[i];if(r.empty())r.head.line>n&&(lr(this,r.head.line,e,!0),n=r.head.line,i==this.doc.sel.primIndex&&Jt(this));else{var o=r.from();r=r.to();var s=Math.max(n,o.line);for(n=Math.min(this.lastLine(),r.line-(r.ch?0:1))+1,r=s;r<n;++r)lr(this,r,e);r=this.doc.sel.ranges,0==o.ch&&t.length==r.length&&0<r[i].from().ch&&ri(this.doc,i,new Xo(o,r[i].to()),ro)}}}),getTokenAt:function(e,t){return fe(this,e,t)},getLineTokens:function(e,t){return fe(this,J(e),t,!0)},getTokenTypeAt:function(e){e=oe(this.doc,e);var t=le(this,X(this.doc,e.line)),n=0,i=(t.length-1)/2;if(0==(e=e.ch))t=t[2];else for(;;){var r=n+i>>1;if((r?t[2*r-1]:0)>=e)i=r;else{if(!(t[2*r+1]<e)){t=t[2*r+2];break}n=1+r}}return(n=t?t.indexOf("overlay "):-1)<0?t:0==n?null:t.slice(0,n-1)},getModeAt:function(e){var t=this.doc.mode;return t.innerMode?bs.innerMode(t,this.getTokenAt(e).state).mode:t},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var n=[];if(!Cs.hasOwnProperty(t))return n;var i=Cs[t];if("string"==typeof(e=this.getModeAt(e))[t])i[e[t]]&&n.push(i[e[t]]);else if(e[t])for(var r=0;r<e[t].length;r++){var o=i[e[t][r]];o&&n.push(o)}else e.helperType&&i[e.helperType]?n.push(i[e.helperType]):i[e.name]&&n.push(i[e.name]);for(t=0;t<i._global.length;t++)(r=i._global[t]).pred(e,this)&&-1==v(n,r.val)&&n.push(r.val);return n},getStateAfter:function(e,t){var n=this.doc;return ue(this,(e=Math.max(n.first,Math.min(null==e?n.first+n.size-1:e,n.first+n.size-1)))+1,t).state},cursorCoords:function(e,t){var n=this.doc.sel.primary();return vt(this,e=null==e?n.head:"object"==typeof e?oe(this.doc,e):e?n.from():n.to(),t||"page")},charCoords:function(e,t){return mt(this,oe(this.doc,e),t||"page")},coordsChar:function(e,t){return bt(this,(e=gt(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=gt(this,{top:e,left:0},t||"page").top,K(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,n){var i=!1;if("number"==typeof e){var r=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:r<e&&(e=r,i=!0),e=X(this.doc,e)}return pt(this,e,{top:0,left:0},t||"page",n||i).top+(i?this.doc.height-Ee(e):0)},defaultTextHeight:function(){return Lt(this.display)},defaultCharWidth:function(){return Mt(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,i,r){var o=this.display,s=(e=vt(this,oe(this.doc,e))).bottom,a=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),o.sizer.appendChild(t),"over"==i)s=e.top;else if("above"==i||"near"==i){var l=Math.max(o.wrapper.clientHeight,this.doc.height),u=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==i||e.bottom+t.offsetHeight>l)&&e.top>t.offsetHeight?s=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=l&&(s=e.bottom),a+t.offsetWidth>u&&(a=u-t.offsetWidth)}t.style.top=s+"px",t.style.left=t.style.right="","right"==r?(a=o.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==r?a=0:"middle"==r&&(a=(o.sizer.clientWidth-t.offsetWidth)/2),t.style.left=a+"px"),n&&(null!=(e=Zt(this,{left:a,top:s,right:a+t.offsetWidth,bottom:s+t.offsetHeight})).scrollTop&&rn(this,e.scrollTop),null!=e.scrollLeft&&sn(this,e.scrollLeft))},triggerOnKeyDown:gn(Qi),triggerOnKeyPress:gn(er),triggerOnKeyUp:Ji,triggerOnMouseDown:gn(tr),execCommand:function(e){if(os.hasOwnProperty(e))return os[e].call(null,this)},triggerElectric:gn(function(e){hr(this,e)}),findPosH:function(e,t,n,i){var r=1;t<0&&(r=-1,t=-t),e=oe(this.doc,e);for(var o=0;o<t&&!(e=gr(this.doc,e,r,n,i)).hitSide;++o);return e},moveH:gn(function(t,n){var i=this;this.extendSelectionsBy(function(e){return i.display.shift||i.doc.extend||e.empty()?gr(i.doc,e.head,t,n,i.options.rtlMoveVisually):t<0?e.from():e.to()},so)}),deleteH:gn(function(n,i){var r=this.doc;this.doc.sel.somethingSelected()?r.replaceSelection("",null,"+delete"):ji(this,function(e){var t=gr(r,e.head,n,i,!1);return n<0?{from:t,to:e.head}:{from:e.head,to:t}})}),findPosV:function(e,t,n,i){var r=1;t<0&&(r=-1,t=-t);var o=oe(this.doc,e);for(e=0;e<t&&(o=vt(this,o,"div"),null==i?i=o.left:o.left=i,!(o=mr(this,o,r,n)).hitSide);++e);return o},moveV:gn(function(i,r){var o=this,s=this.doc,a=[],l=!this.display.shift&&!s.extend&&s.sel.somethingSelected();if(s.extendSelectionsBy(function(e){if(l)return i<0?e.from():e.to();var t=vt(o,e.head,"div");null!=e.goalColumn&&(t.left=e.goalColumn),a.push(t.left);var n=mr(o,t,i,r);return"page"==r&&e==s.sel.primary()&&Qt(o,mt(o,n,"div").top-t.top),n},so),a.length)for(var e=0;e<s.sel.ranges.length;e++)s.sel.ranges[e].goalColumn=a[e]}),findWordAt:function(e){var t=X(this.doc,e.line).text,n=e.ch,i=e.ch;if(t){var r=this.getHelper(e,"wordChars");"before"!=e.sticky&&i!=t.length||!n?++i:--n;var o=t.charAt(n);for(o=f(o,r)?function(e){return f(e,r)}:/\s/.test(o)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!f(e)};0<n&&o(t.charAt(n-1));)--n;for(;i<t.length&&o(t.charAt(i));)++i}return new Xo(J(e.line,n),J(e.line,i))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?i(this.display.cursorDiv,"CodeMirror-overwrite"):Xr(this.display.cursorDiv,"CodeMirror-overwrite"),F(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==y()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:gn(function(e,t){en(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-et(this)-this.display.barHeight,width:e.scrollWidth-et(this)-this.display.barWidth,clientHeight:nt(this),clientWidth:tt(this)}},scrollIntoView:gn(function(e,t){null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:J(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?(tn(this),this.curOp.scrollToPos=e):nn(this,e.from,e.to,e.margin)}),setSize:gn(function(e,t){function n(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e}var i=this;null!=e&&(this.display.wrapper.style.width=n(e)),null!=t&&(this.display.wrapper.style.height=n(t)),this.options.lineWrapping&&ut(this);var r=this.display.viewFrom;this.doc.iter(r,this.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){zt(i,r,"widget");break}++r}),this.curOp.forceUpdate=!0,F(this,"refresh",this)}),operation:function(e){return fn(this,e)},startOperation:function(){return hn(this)},endOperation:function(){return dn(this)},refresh:gn(function(){var e=this.display.cachedTextHeight;Ft(this),this.curOp.forceUpdate=!0,ct(this),en(this,this.doc.scrollLeft,this.doc.scrollTop),Cn(this.display),(null==e||.5<Math.abs(e-Lt(this.display)))&&Et(this),F(this,"refresh",this)}),swapDoc:gn(function(e){var t=this.doc;return t.cm=null,this.state.selectingText&&this.state.selectingText(),Gn(this,e),ct(this),this.display.input.reset(),en(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,Re(this,"swapDoc",this,t),t}),phrase:function(e){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},e(bs),bs.registerHelper=function(e,t,n){Cs.hasOwnProperty(e)||(Cs[e]=bs[e]={_global:[]}),Cs[e][t]=n},bs.registerGlobalHelper=function(e,t,n,i){bs.registerHelper(e,t,i),Cs[e]._global.push({pred:n,val:i})};var ks,Ls,Ms="iter insert remove copy getEditor constructor".split(" ");for(ks in Zo.prototype)Zo.prototype.hasOwnProperty(ks)&&v(Ms,ks)<0&&(ar.prototype[ks]=function(e){return function(){return e.apply(this.doc,arguments)}}(Zo.prototype[ks]));return e(Zo),ar.inputStyles={textarea:vs,contenteditable:gs},ar.defineMode=function(e){ar.defaults.mode||"null"==e||(ar.defaults.mode=e),function(e,t){2<arguments.length&&(t.dependencies=Array.prototype.slice.call(arguments,2)),bo[e]=t}.apply(this,arguments)},ar.defineMIME=function(e,t){wo[e]=t},ar.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),ar.defineMIME("text/plain","null"),ar.defineExtension=function(e,t){ar.prototype[e]=t},ar.defineDocExtension=function(e,t){Zo.prototype[e]=t},ar.fromTextArea=function(t,e){function n(){t.value=a.getValue()}if((e=e?u(e):{}).value=t.value,!e.tabindex&&t.tabIndex&&(e.tabindex=t.tabIndex),!e.placeholder&&t.placeholder&&(e.placeholder=t.placeholder),null==e.autofocus){var i=y();e.autofocus=i==t||null!=t.getAttribute("autofocus")&&i==document.body}if(t.form&&(po(t.form,"submit",n),!e.leaveSubmitMethodAlone)){var r=t.form,o=r.submit;try{var s=r.submit=function(){n(),r.submit=o,r.submit(),r.submit=s}}catch(e){}}e.finishInit=function(e){e.save=n,e.getTextArea=function(){return t},e.toTextArea=function(){e.toTextArea=isNaN,n(),t.parentNode.removeChild(e.getWrapperElement()),t.style.display="",t.form&&(M(t.form,"submit",n),"function"==typeof t.form.submit&&(t.form.submit=o))}},t.style.display="none";var a=ar(function(e){return t.parentNode.insertBefore(e,t.nextSibling)},e);return a},(Ls=ar).off=M,Ls.on=po,Ls.wheelEventPixels=Nn,Ls.Doc=Zo,Ls.splitLines=mo,Ls.countColumn=x,Ls.findColumn=b,Ls.isWordChar=o,Ls.Pass=io,Ls.signal=F,Ls.Line=Eo,Ls.changeEnd=Pn,Ls.scrollbarModel=_o,Ls.Pos=J,Ls.cmpPos=ee,Ls.modes=bo,Ls.mimeModes=wo,Ls.resolveMode=_,Ls.getMode=B,Ls.modeExtensions=Co,Ls.extendMode=R,Ls.copyState=j,Ls.startState=G,Ls.innerMode=U,Ls.commands=os,Ls.keyMap=rs,Ls.keyName=Bi,Ls.isModifierKey=Wi,Ls.lookupKey=Hi,Ls.normalizeKeyMap=Ii,Ls.StringStream=So,Ls.SharedTextMarker=$o,Ls.TextMarker=qo,Ls.LineWidget=Vo,Ls.e_preventDefault=z,Ls.e_stopPropagation=t,Ls.e_stop=I,Ls.addClass=i,Ls.contains=c,Ls.rmClass=Xr,Ls.keyNames=es,ar.version="5.47.0",ar}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(v){var y=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,x=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,b=/[*+-]\s/;v.commands.newlineAndIndentContinueMarkdownList=function(e){if(e.getOption("disableInput"))return v.Pass;for(var t=e.listSelections(),n=[],i=0;i<t.length;i++){var r=t[i].head,o=e.getStateAfter(r.line);if("markdown"!==(o=v.innerMode(e.getMode(),o)).mode.name)return void e.execCommand("newlineAndIndent");var s=!1!==(o=o.state).list,a=0!==o.quote,l=e.getLine(r.line);o=y.exec(l);var u=/^\s*$/.test(l.slice(0,r.ch));if(!t[i].empty()||!s&&!a||!o||u)return void e.execCommand("newlineAndIndent");if(x.test(l))/>\s*$/.test(l)||e.replaceRange("",{line:r.line,ch:0},{line:r.line,ch:r.ch+1}),n[i]="\n";else if(s=o[1],a=o[5],o=(l=!(b.test(o[2])||0<=o[2].indexOf(">")))?parseInt(o[3],10)+1+o[4]:o[2].replace("x"," "),n[i]="\n"+s+o+a,l)e:{o=e,r=r.line,a=s=0,u=(l=y.exec(o.getLine(r)))[1];do{var c=r+(s+=1),h=o.getLine(c),d=y.exec(h);if(d){var f=d[1],p=parseInt(l[3],10)+s-a,g=parseInt(d[3],10),m=g;if(u!==f||isNaN(g)){if(u.length>f.length)break e;if(u.length<f.length&&1===s)break e;a+=1}else p===g&&(m=g+1),g<p&&(m=1+p),o.replaceRange(h.replace(y,f+m+d[4]+d[5]),{line:c,ch:0},{line:c,ch:h.length})}}while(d)}}e.replaceSelections(n)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../xml/xml"),require("../meta")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../xml/xml","../meta"],e):e(CodeMirror)}(function(E){E.defineMode("markdown",function(h,d){function f(e,t,n){return t.f=t.inline=n,n(e,t)}function i(e){if(e.linkTitle=!1,e.linkHref=!1,e.linkText=!1,e.em=!1,e.strong=!1,e.strikethrough=!1,e.quote=0,e.indentedCode=!1,e.f==c){var t=s;t||(t="xml"==(t=E.innerMode(b,e.htmlState)).mode.name&&null===t.state.tagStart&&!t.state.context&&t.state.tokenize.isInText),t&&(e.f=m,e.block=o,e.htmlState=null)}return e.trailingSpace=0,e.trailingSpaceNewLine=!1,e.prevLine=e.thisLine,e.thisLine={stream:null},null}function o(e,t){var n=e.column()===t.indentation,i=t.prevLine.stream,r=!i||!/\S/.test(i.string),o=t.indentedCode,s=t.prevLine.hr,a=!1!==t.list,l=(t.listStack[t.listStack.length-1]||0)+3;if(t.indentedCode=!1,i=t.indentation,null===t.indentationDiff&&(t.indentationDiff=t.indentation,a)){for(t.em=!1,t.strong=!1,t.code=!1,t.strikethrough=!1,t.list=null;i<t.listStack[t.listStack.length-1];)t.listStack.pop(),t.listStack.length?t.indentation=t.listStack[t.listStack.length-1]:t.list=!1;!1!==t.list&&(t.indentationDiff=i-t.listStack[t.listStack.length-1])}var u=!(r||s||t.prevLine.header||a&&o||t.prevLine.fencedCodeEnd),c=(!1===t.list||s||r)&&t.indentation<=l&&e.match(C);return s=null,4<=t.indentationDiff&&(o||t.prevLine.fencedCodeEnd||t.prevLine.header||r)?(e.skipToEnd(),t.indentedCode=!0,w.code):e.eatSpace()?null:n&&t.indentation<=l&&(s=e.match(L))&&s[1].length<=6?(t.quote=0,t.header=s[1].length,t.thisLine.header=!0,d.highlightFormatting&&(t.formatting="header"),t.f=t.inline,g(t)):t.indentation<=l&&e.eat(">")?(t.quote=n?1:t.quote+1,d.highlightFormatting&&(t.formatting="quote"),e.eatSpace(),g(t)):!c&&!t.setext&&n&&t.indentation<=l&&(s=e.match(S))?(n=s[1]?"ol":"ul",t.indentation=i+e.current().length,t.list=!0,t.quote=0,t.listStack.push(t.indentation),d.taskLists&&e.match(k,!1)&&(t.taskList=!0),t.f=t.inline,d.highlightFormatting&&(t.formatting=["list","list-"+n]),g(t)):n&&t.indentation<=l&&(s=e.match(T,!0))?(t.quote=0,t.fencedEndRE=new RegExp(s[1]+"+ *$"),(e=d.fencedCodeBlockHighlighting)&&(e=s[2],E.findModeByName&&(n=E.findModeByName(e))&&(e=n.mime||n.mimes[0]),e="null"==(e=E.getMode(h,e)).name?null:e),t.localMode=e,t.localMode&&(t.localState=E.startState(t.localMode)),t.f=t.block=p,d.highlightFormatting&&(t.formatting="code-block"),t.code=-1,g(t)):t.setext||!(u&&a||t.quote||!1!==t.list||t.code||c||D.test(e.string))&&(s=e.lookAhead(1))&&(s=s.match(M))?(t.setext?(t.header=t.setext,t.setext=0,e.skipToEnd(),d.highlightFormatting&&(t.formatting="header")):(t.header="="==s[0].charAt(0)?1:2,t.setext=t.header),t.thisLine.header=!0,t.f=t.inline,g(t)):c?(e.skipToEnd(),t.hr=!0,t.thisLine.hr=!0,w.hr):"["===e.peek()?f(e,t,x):f(e,t,t.inline)}function c(e,t){var n=b.token(e,t.htmlState);if(!s){var i=E.innerMode(b,t.htmlState);("xml"==i.mode.name&&null===i.state.tagStart&&!i.state.context&&i.state.tokenize.isInText||t.md_inside&&-1<e.current().indexOf(">"))&&(t.f=m,t.block=o,t.htmlState=null)}return n}function p(e,t){var n,i=t.listStack[t.listStack.length-1]||0,r=t.indentation<i;return t.fencedEndRE&&t.indentation<=i+3&&(r||e.match(t.fencedEndRE))?(d.highlightFormatting&&(t.formatting="code-block"),r||(n=g(t)),t.localMode=t.localState=null,t.block=o,t.f=m,t.fencedEndRE=null,t.code=0,t.thisLine.fencedCodeEnd=!0,r?(i=t.block,t.f=t.block=i,i(e,t)):n):t.localMode?t.localMode.token(e,t.localState):(e.skipToEnd(),w.code)}function g(e){var t=[];if(e.formatting){t.push(w.formatting),"string"==typeof e.formatting&&(e.formatting=[e.formatting]);for(var n=0;n<e.formatting.length;n++)t.push(w.formatting+"-"+e.formatting[n]),"header"===e.formatting[n]&&t.push(w.formatting+"-"+e.formatting[n]+"-"+e.header),"quote"===e.formatting[n]&&(!d.maxBlockquoteDepth||d.maxBlockquoteDepth>=e.quote?t.push(w.formatting+"-"+e.formatting[n]+"-"+e.quote):t.push("error"))}return e.taskOpen?t.push("meta"):e.taskClosed?t.push("property"):(e.linkHref?t.push(w.linkHref,"url"):(e.strong&&t.push(w.strong),e.em&&t.push(w.em),e.strikethrough&&t.push(w.strikethrough),e.emoji&&t.push(w.emoji),e.linkText&&t.push(w.linkText),e.code&&t.push(w.code),e.image&&t.push(w.image),e.imageAltText&&t.push(w.imageAltText,"link"),e.imageMarker&&t.push(w.imageMarker)),e.header&&t.push(w.header,w.header+"-"+e.header),e.quote&&(t.push(w.quote),!d.maxBlockquoteDepth||d.maxBlockquoteDepth>=e.quote?t.push(w.quote+"-"+e.quote):t.push(w.quote+"-"+d.maxBlockquoteDepth)),!1!==e.list&&((n=(e.listStack.length-1)%3)?1===n?t.push(w.list2):t.push(w.list3):t.push(w.list1)),e.trailingSpaceNewLine?t.push("trailing-space-new-line"):e.trailingSpace&&t.push("trailing-space-"+(e.trailingSpace%2?"a":"b"))),t.length?t.join(" "):null}function e(e,t){if(e.match(a,!0))return g(t)}function m(e,t){var n=t.text(e,t);if(void 0!==n)return n;if(t.list)return t.list=null,g(t);if(t.taskList)return" "===e.match(k,!0)[1]?t.taskOpen=!0:t.taskClosed=!0,d.highlightFormatting&&(t.formatting="task"),t.taskList=!1,g(t);if(t.taskOpen=!1,t.taskClosed=!1,t.header&&e.match(/^#+$/,!0))return d.highlightFormatting&&(t.formatting="header"),g(t);if(n=e.next(),t.linkTitle){t.linkTitle=!1;var i=n;if("("===n&&(i=")"),i=(i+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1"),e.match(new RegExp("^\\s*(?:[^"+i+"\\\\]+|\\\\\\\\|\\\\.)"+i),!0))return w.linkHref}if("`"===n)return n=t.formatting,d.highlightFormatting&&(t.formatting="code"),e.eatWhile("`"),e=e.current().length,0!=t.code||t.quote&&1!=e?e==t.code?(e=g(t),t.code=0,e):(t.formatting=n,g(t)):(t.code=e,g(t));if(t.code)return g(t);if("\\"===n&&(e.next(),d.highlightFormatting))return n=g(t),t=w.formatting+"-escape",n?n+" "+t:t;if("!"===n&&e.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return t.imageMarker=!0,t.image=!0,d.highlightFormatting&&(t.formatting="image"),g(t);if("["===n&&t.imageMarker&&e.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return t.imageMarker=!1,t.imageAltText=!0,d.highlightFormatting&&(t.formatting="image"),g(t);if("]"===n&&t.imageAltText)return d.highlightFormatting&&(t.formatting="image"),n=g(t),t.imageAltText=!1,t.image=!1,t.inline=t.f=y,n;if("["===n&&!t.image)return t.linkText&&e.match(/^.*?\]/)||(t.linkText=!0,d.highlightFormatting&&(t.formatting="link")),g(t);if("]"===n&&t.linkText)return d.highlightFormatting&&(t.formatting="link"),n=g(t),t.linkText=!1,t.inline=t.f=e.match(/\(.*?\)| ?\[.*?\]/,!1)?y:m,n;if("<"===n&&e.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return t.f=t.inline=v,d.highlightFormatting&&(t.formatting="link"),((n=g(t))?n+" ":"")+w.linkInline;if("<"===n&&e.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return t.f=t.inline=v,d.highlightFormatting&&(t.formatting="link"),((n=g(t))?n+" ":"")+w.linkEmail;if(d.xml&&"<"===n&&e.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1))return-1!=(n=e.string.indexOf(">",e.pos))&&(n=e.string.substring(e.start,n),/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(n)&&(t.md_inside=!0)),e.backUp(1),t.htmlState=E.startState(b),n=c,t.f=t.block=n,n(e,t);if(d.xml&&"<"===n&&e.match(/^\/\w*?>/))return t.md_inside=!1,"tag";if("*"===n||"_"===n){for(var r=1,o=1==e.pos?" ":e.string.charAt(e.pos-2);r<3&&e.eat(n);)r++;var s=e.peek()||" ",a=!/\s/.test(s)&&(!A.test(s)||/\s/.test(o)||A.test(o)),l=!/\s/.test(o)&&(!A.test(o)||/\s/.test(s)||A.test(s)),u=i=null;if(r%2&&(t.em||!a||"*"!==n&&l&&!A.test(o)?t.em!=n||!l||"*"!==n&&a&&!A.test(s)||(i=!1):i=!0),1<r&&(t.strong||!a||"*"!==n&&l&&!A.test(o)?t.strong!=n||!l||"*"!==n&&a&&!A.test(s)||(u=!1):u=!0),null!=u||null!=i)return d.highlightFormatting&&(t.formatting=null==i?"strong":null==u?"em":"strong em"),!0===i&&(t.em=n),!0===u&&(t.strong=n),e=g(t),!1===i&&(t.em=!1),!1===u&&(t.strong=!1),e}else if(" "===n&&(e.eat("*")||e.eat("_"))){if(" "===e.peek())return g(t);e.backUp(1)}if(d.strikethrough)if("~"===n&&e.eatWhile(n)){if(t.strikethrough)return d.highlightFormatting&&(t.formatting="strikethrough"),e=g(t),t.strikethrough=!1,e;if(e.match(/^[^\s]/,!1))return t.strikethrough=!0,d.highlightFormatting&&(t.formatting="strikethrough"),g(t)}else if(" "===n&&e.match(/^~~/,!0)){if(" "===e.peek())return g(t);e.backUp(2)}return d.emoji&&":"===n&&e.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)?(t.emoji=!0,d.highlightFormatting&&(t.formatting="emoji"),e=g(t),t.emoji=!1,e):(" "===n&&(e.match(/^ +$/,!1)?t.trailingSpace++:t.trailingSpace&&(t.trailingSpaceNewLine=!0)),g(t))}function v(e,t){return">"===e.next()?(t.f=t.inline=m,d.highlightFormatting&&(t.formatting="link"),((e=g(t))?e+" ":"")+w.linkInline):(e.match(/^[^>]+/,!0),w.linkInline)}function y(e,t){return e.eatSpace()?null:"("===(e=e.next())||"["===e?(t.f=t.inline=function(n){return function(e,t){return e.next()===n?(t.f=t.inline=m,d.highlightFormatting&&(t.formatting="link-string"),e=g(t),t.linkHref=!1,e):(e.match(l[n]),t.linkHref=!0,g(t))}}("("===e?")":"]"),d.highlightFormatting&&(t.formatting="link-string"),t.linkHref=!0,g(t)):"error"}function x(e,t){return e.match(/^([^\]\\]|\\.)*\]:/,!1)?(t.f=n,e.next(),d.highlightFormatting&&(t.formatting="link"),t.linkText=!0,g(t)):f(e,t,m)}function n(e,t){return e.match(/^\]:/,!0)?(t.f=t.inline=r,d.highlightFormatting&&(t.formatting="link"),e=g(t),t.linkText=!1,e):(e.match(/^([^\]\\]|\\.)+/,!0),w.linkText)}function r(e,t){return e.eatSpace()?null:(e.match(/^[^\s]+/,!0),void 0===e.peek()?t.linkTitle=!0:e.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),t.f=t.inline=m,w.linkHref+" url")}var b=E.getMode(h,"text/html"),s="null"==b.name;void 0===d.highlightFormatting&&(d.highlightFormatting=!1),void 0===d.maxBlockquoteDepth&&(d.maxBlockquoteDepth=0),void 0===d.taskLists&&(d.taskLists=!1),void 0===d.strikethrough&&(d.strikethrough=!1),void 0===d.emoji&&(d.emoji=!1),void 0===d.fencedCodeBlockHighlighting&&(d.fencedCodeBlockHighlighting=!0),void 0===d.xml&&(d.xml=!0),void 0===d.tokenTypeOverrides&&(d.tokenTypeOverrides={});var t,w={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(t in w)w.hasOwnProperty(t)&&d.tokenTypeOverrides[t]&&(w[t]=d.tokenTypeOverrides[t]);var C=/^([*\-_])(?:\s*\1){2,}\s*$/,S=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,k=/^\[(x| )\](?=\s)/i,L=d.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,M=/^ *(?:={1,}|-{1,})\s*$/,a=/^[^#!\[\]*_\\<>` "'(~:]+/,T=/^(~~~+|```+)[ \t]*([\w+#-]*)[^\n`]*$/,D=/^\s*\[[^\]]+?\]:.*$/,A=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/,l={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/},u={startState:function(){return{f:o,prevLine:{stream:null},thisLine:{stream:null},block:o,htmlState:null,indentation:0,inline:m,text:e,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(e){return{f:e.f,prevLine:e.prevLine,thisLine:e.thisLine,block:e.block,htmlState:e.htmlState&&E.copyState(b,e.htmlState),indentation:e.indentation,localMode:e.localMode,localState:e.localMode?E.copyState(e.localMode,e.localState):null,inline:e.inline,text:e.text,formatting:!1,linkText:e.linkText,linkTitle:e.linkTitle,linkHref:e.linkHref,code:e.code,em:e.em,strong:e.strong,strikethrough:e.strikethrough,emoji:e.emoji,header:e.header,setext:e.setext,hr:e.hr,taskList:e.taskList,list:e.list,listStack:e.listStack.slice(0),quote:e.quote,indentedCode:e.indentedCode,trailingSpace:e.trailingSpace,trailingSpaceNewLine:e.trailingSpaceNewLine,md_inside:e.md_inside,fencedEndRE:e.fencedEndRE}},token:function(e,t){if(t.formatting=!1,e!=t.thisLine.stream){if(t.header=0,t.hr=!1,e.match(/^\s*$/,!0))return i(t),null;if(t.prevLine=t.thisLine,t.thisLine={stream:e},t.taskList=!1,t.trailingSpace=0,t.trailingSpaceNewLine=!1,!t.localState&&(t.f=t.block,t.f!=c)){var n=e.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(t.indentation=n,t.indentationDiff=null,0<n)return null}}return t.f(e,t)},innerMode:function(e){return e.block==c?{state:e.htmlState,mode:b}:e.localState?{state:e.localState,mode:e.localMode}:{state:e,mode:u}},indent:function(e,t,n){return e.block==c&&b.indent?b.indent(e.htmlState,t,n):e.localState&&e.localMode.indent?e.localMode.indent(e.localState,t,n):E.Pass},blankLine:i,getType:g,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return u},"xml"),E.defineMIME("text/markdown","markdown"),E.defineMIME("text/x-markdown","markdown")}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(C){var S={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},k={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};C.defineMode("xml",function(e,t){function o(t,n){function e(e){return(n.tokenize=e)(t,n)}var i=t.next();return"<"==i?t.eat("!")?t.eat("[")?t.match("CDATA[")?e(s("atom","]]>")):null:t.match("--")?e(s("comment","--\x3e")):t.match("DOCTYPE",!0,!0)?(t.eatWhile(/[\w\._\-]/),e(function i(r){return function(e,t){for(var n;null!=(n=e.next());){if("<"==n)return t.tokenize=i(r+1),t.tokenize(e,t);if(">"==n){if(1!=r)return t.tokenize=i(r-1),t.tokenize(e,t);t.tokenize=o;break}}return"meta"}}(1))):null:t.eat("?")?(t.eatWhile(/[\w\._\-]/),n.tokenize=s("meta","?>"),"meta"):(y=t.eat("/")?"closeTag":"openTag",n.tokenize=r,"tag bracket"):"&"==i?(t.eat("#")?t.eat("x")?t.eatWhile(/[a-fA-F\d]/)&&t.eat(";"):t.eatWhile(/[\d]/)&&t.eat(";"):t.eatWhile(/[\w\.\-:]/)&&t.eat(";"))?"atom":"error":(t.eatWhile(/[^&<]/),null)}function r(e,t){var n=e.next();return">"==n||"/"==n&&e.eat(">")?(t.tokenize=o,y=">"==n?"endTag":"selfcloseTag","tag bracket"):"="==n?(y="equals",null):"<"==n?(t.tokenize=o,t.state=u,t.tagName=t.tagStart=null,(e=t.tokenize(e,t))?e+" tag error":"tag error"):/['"]/.test(n)?(t.tokenize=function(n){function e(e,t){for(;!e.eol();)if(e.next()==n){t.tokenize=r;break}return"string"}return e.isInAttribute=!0,e}(n),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>"']*[^\s\u00a0=<>"'\/]/),"word")}function s(n,i){return function(e,t){for(;!e.eol();){if(e.match(i)){t.tokenize=o;break}e.next()}return n}}function a(e,t,n){this.prev=e.context,this.tagName=t,this.indent=e.indented,this.startOfLine=n,(w.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function i(e){e.context&&(e.context=e.context.prev)}function l(e,t){for(var n;e.context&&(n=e.context.tagName,w.contextGrabbers.hasOwnProperty(n)&&w.contextGrabbers[n].hasOwnProperty(t));)i(e)}function u(e,t,n){return"openTag"==e?(n.tagStart=t.column(),c):"closeTag"==e?h:u}function c(e,t,n){return"word"==e?(n.tagName=t.current(),x="tag",p):w.allowMissingTagName&&"endTag"==e?(x="tag bracket",p(e,t,n)):(x="error",c)}function h(e,t,n){return"word"==e?(e=t.current(),n.context&&n.context.tagName!=e&&w.implicitlyClosed.hasOwnProperty(n.context.tagName)&&i(n),n.context&&n.context.tagName==e||!1===w.matchClosing?(x="tag",d):(x="tag error",f)):w.allowMissingTagName&&"endTag"==e?(x="tag bracket",d(e,t,n)):(x="error",f)}function d(e,t,n){return"endTag"!=e?(x="error",d):(i(n),u)}function f(e,t,n){return x="error",d(e,0,n)}function p(e,t,n){if("word"==e)return x="attribute",g;if("endTag"!=e&&"selfcloseTag"!=e)return x="error",p;t=n.tagName;var i=n.tagStart;return n.tagName=n.tagStart=null,"selfcloseTag"==e||w.autoSelfClosers.hasOwnProperty(t)?l(n,t):(l(n,t),n.context=new a(n,t,i==n.indented)),u}function g(e,t,n){return"equals"==e?m:(w.allowMissing||(x="error"),p(e,t,n))}function m(e,t,n){return"string"==e?v:"word"==e&&w.allowUnquoted?(x="string",p):(x="error",p(e,t,n))}function v(e,t,n){return"string"==e?v:p(e,t,n)}var y,x,b=e.indentUnit,w={};for(var n in e=t.htmlMode?S:k)w[n]=e[n];for(n in t)w[n]=t[n];return o.isInText=!0,{startState:function(e){var t={tokenize:o,state:u,indented:e||0,tagName:null,tagStart:null,context:null};return null!=e&&(t.baseIndent=e),t},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;y=null;var n=t.tokenize(e,t);return(n||y)&&"comment"!=n&&(x=null,t.state=t.state(y||n,e,t),x&&(n="error"==x?n+" error":x)),n},indent:function(e,t,n){var i=e.context;if(e.tokenize.isInAttribute)return e.tagStart==e.indented?e.stringStartCol+1:e.indented+b;if(i&&i.noIndent)return C.Pass;if(e.tokenize!=r&&e.tokenize!=o)return n?n.match(/^(\s*)/)[0].length:0;if(e.tagName)return!1!==w.multilineTagIndentPastTag?e.tagStart+e.tagName.length+2:e.tagStart+b*(w.multilineTagIndentFactor||1);if(w.alignCDATA&&/<!\[CDATA\[/.test(t))return 0;if((t=t&&/^<(\/)?([\w_:\.-]*)/.exec(t))&&t[1])for(;i;){if(i.tagName==t[2]){i=i.prev;break}if(!w.implicitlyClosed.hasOwnProperty(i.tagName))break;i=i.prev}else if(t)for(;i&&((n=w.contextGrabbers[i.tagName])&&n.hasOwnProperty(t[2]));)i=i.prev;for(;i&&i.prev&&!i.startOfLine;)i=i.prev;return i?i.indent+b:e.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:w.htmlMode?"html":"xml",helperType:w.htmlMode?"html":"xml",skipAttribute:function(e){e.state==m&&(e.state=p)}}}),C.defineMIME("text/xml","xml"),C.defineMIME("application/xml","xml"),C.mimeModes.hasOwnProperty("text/html")||C.defineMIME("text/html",{name:"xml",htmlMode:!0})}),function(e){"use strict";"function"==typeof define&&define.amd?define(e):"undefined"!=typeof module&&void 0!==module.exports?module.exports=e():window.Sortable=e()}(function(){"use strict";if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};function N(e,t){if(!e||!e.getBoundingClientRect)return fe();var n=e,i=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=Se(n);if(n.clientWidth<n.scrollWidth&&("auto"==r.overflowX||"scroll"==r.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==r.overflowY||"scroll"==r.overflowY)){if(!n||!n.getBoundingClientRect||n===ue.body)return fe();if(i||t)return n;i=!0}}}while(n=n.parentNode);return fe()}function G(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function i(e){X&&X.parentNode&&X.parentNode[le]&&X.parentNode[le]._computeIsAligned(e)}function d(){!W&&p&&Se(p,"display","none")}function f(){!W&&p&&Se(p,"display","")}var X,V,p,g,Y,q,m,O,F,z,$,r,K,o,Z,Q,a,l,u,v,P,J,ee,te,ne,ie,y,re,s,I=[],H=!1,x=!1,oe=!1,c=[],se=!1,ae=!1,b=[],h=/\s+/g,le="Sortable"+(new Date).getTime(),w=window,ue=w.document,C=w.parseInt,ce=w.setTimeout,t=w.jQuery||w.Zepto,n=w.Polymer,S={capture:!1,passive:!1},k=!!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie|iemobile)/i),L=!!navigator.userAgent.match(/Edge/i),M=!!navigator.userAgent.match(/firefox/i),T=!(!navigator.userAgent.match(/safari/i)||navigator.userAgent.match(/chrome/i)||navigator.userAgent.match(/android/i)),D=!!navigator.userAgent.match(/iP(ad|od|hone)/i),A=L||k?"cssFloat":"float",E="draggable"in ue.createElement("div"),W=function(){if(k)return!1;var e=ue.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}(),he=!1,_=!1,de=Math.abs,B=Math.min,R=Math.max,j=[],U=function(e,t){var n=Se(e),i=C(n.width)-C(n.paddingLeft)-C(n.paddingRight)-C(n.borderLeftWidth)-C(n.borderRightWidth),r=Ee(e,0,t),o=Ee(e,1,t),s=r&&Se(r),a=o&&Se(o),l=s&&C(s.marginLeft)+C(s.marginRight)+Be(r).width,u=a&&C(a.marginLeft)+C(a.marginRight)+Be(o).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&"none"!==s.float){var c="left"===s.float?"left":"right";return!o||"both"!==a.clear&&a.clear!==c?"horizontal":"vertical"}return r&&("block"===s.display||"flex"===s.display||"table"===s.display||"grid"===s.display||i<=l&&"none"===n[A]||o&&"none"===n[A]&&i<l+u)?"vertical":"horizontal"},fe=function(){return k?ue.documentElement:ue.scrollingElement},pe=e(function(n,e,t,i){if(e.scroll){var r=t?t[le]:window,o=e.scrollSensitivity,s=e.scrollSpeed,a=n.clientX,l=n.clientY,u=fe(),c=!1;F!==t&&(ge(),O=e.scroll,z=e.scrollFn,!0===O&&(O=N(t,!0),F=O));var h=0,d=O;do{var f,p,g,m,v,y,x,b,w,C=d,S=Be(C),k=S.top,L=S.bottom,M=S.left,T=S.right,D=S.width,A=S.height;if(f=C.scrollWidth,p=C.scrollHeight,g=Se(C),b=C.scrollLeft,w=C.scrollTop,x=C===u?(y=D<f&&("auto"===g.overflowX||"scroll"===g.overflowX||"visible"===g.overflowX),A<p&&("auto"===g.overflowY||"scroll"===g.overflowY||"visible"===g.overflowY)):(y=D<f&&("auto"===g.overflowX||"scroll"===g.overflowX),A<p&&("auto"===g.overflowY||"scroll"===g.overflowY)),m=y&&(de(T-a)<=o&&b+D<f)-(de(M-a)<=o&&!!b),v=x&&(de(L-l)<=o&&w+A<p)-(de(k-l)<=o&&!!w),!I[h])for(var E=0;E<=h;E++)I[E]||(I[E]={});I[h].vx==m&&I[h].vy==v&&I[h].el===C||(I[h].el=C,I[h].vx=m,I[h].vy=v,clearInterval(I[h].pid),!C||0==m&&0==v||(c=!0,I[h].pid=setInterval(function(){i&&0===this.layer&&(ye.active._emulateDragOver(!0),ye.active._onTouchMove(P,!0));var e=I[this.layer].vy?I[this.layer].vy*s:0,t=I[this.layer].vx?I[this.layer].vx*s:0;"function"==typeof z&&"continue"!==z.call(r,t,e,n,P,I[this.layer].el)||G(I[this.layer].el,t,e)}.bind({layer:h}),24))),h++}while(e.bubbleScroll&&d!==u&&(d=N(d,!1)));H=c}},30),ge=function(){I.forEach(function(e){clearInterval(e.pid)}),I=[]},me=function(e){function l(s,a){return function(e,t,n,i){var r=e.options.group.name&&t.options.group.name&&e.options.group.name===t.options.group.name;if(null==s&&(a||r))return!0;if(null==s||!1===s)return!1;if(a&&"clone"===s)return s;if("function"==typeof s)return l(s(e,t,n,i),a)(e,t,n,i);var o=(a?e:t).options.group.name;return!0===s||"string"==typeof s&&s===o||s.join&&-1<s.indexOf(o)}}var t={},n=e.group;n&&"object"==typeof n||(n={name:n}),t.name=n.name,t.checkPull=l(n.pull,!0),t.checkPut=l(n.put),t.revertClone=n.revertClone,e.group=t};function ve(e){if(X){var t=function(e,t){for(var n=0;n<c.length;n++)if(!Ne(c[n])){var i=Be(c[n]),r=c[n][le].options.emptyInsertThreshold,o=e>=i.left-r&&e<=i.right+r,s=t>=i.top-r&&t<=i.bottom+r;if(r&&o&&s)return c[n]}}((e=e.touches?e.touches[0]:e).clientX,e.clientY);if(t){var n={};for(var i in e)n[i]=e[i];n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[le]._onDragOver(n)}}}function ye(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, not "+{}.toString.call(e);this.el=e,this.options=t=Ie({},t),e[le]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0,draggable:/[uo]l/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return U(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:C(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==ye.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var i in n)i in t||(t[i]=n[i]);for(var r in me(t),this)"_"===r.charAt(0)&&"function"==typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!t.forceFallback&&E,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?be(e,"pointerdown",this._onTapStart):(be(e,"mousedown",this._onTapStart),be(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(be(e,"dragover",this),be(e,"dragenter",this)),c.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[])}function xe(e,t,n,i){if(e){n=n||ue;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&Pe(e,t):Pe(e,t))||i&&e===n)return e;if(e===n)break}while(e=(r=e).host&&r!==ue&&r.host.nodeType?r.host:r.parentNode)}var r;return null}function be(e,t,n){e.addEventListener(t,n,!k&&S)}function we(e,t,n){e.removeEventListener(t,n,!k&&S)}function Ce(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var i=(" "+e.className+" ").replace(h," ").replace(" "+t+" "," ");e.className=(i+(n?" "+t:"")).replace(h," ")}}function Se(e,t,n){var i=e&&e.style;if(i){if(void 0===n)return ue.defaultView&&ue.defaultView.getComputedStyle?n=ue.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in i||-1!==t.indexOf("webkit")||(t="-webkit-"+t),i[t]=n+("string"==typeof n?"":"px")}}function ke(e){var t="";do{var n=Se(e,"transform");n&&"none"!==n&&(t=n+" "+t)}while(e=e.parentNode);return window.DOMMatrix?new DOMMatrix(t):window.WebKitCSSMatrix?new WebKitCSSMatrix(t):window.CSSMatrix?new CSSMatrix(t):void 0}function Le(e,t,n){if(e){var i=e.getElementsByTagName(t),r=0,o=i.length;if(n)for(;r<o;r++)n(i[r],r);return i}return[]}function Me(e,t,n,i,r,o,s,a,l,u,c){var h,d=(e=e||t[le]).options,f="on"+n.charAt(0).toUpperCase()+n.substr(1);!window.CustomEvent||k||L?(h=ue.createEvent("Event")).initEvent(n,!0,!0):h=new CustomEvent(n,{bubbles:!0,cancelable:!0}),h.to=r||t,h.from=o||t,h.item=i||t,h.clone=g,h.oldIndex=s,h.newIndex=a,h.oldDraggableIndex=l,h.newDraggableIndex=u,h.originalEvent=c,h.pullMode=Q?Q.lastPutMode:void 0,t&&t.dispatchEvent(h),d[f]&&d[f].call(e,h)}function Te(e,t,n,i,r,o,s,a){var l,u,c=e[le],h=c.options.onMove;return!window.CustomEvent||k||L?(l=ue.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=n,l.draggedRect=i,l.related=r||t,l.relatedRect=o||Be(t),l.willInsertAfter=a,l.originalEvent=s,e.dispatchEvent(l),h&&(u=h.call(c,l,s)),u}function De(e){e.draggable=!1}function Ae(){he=!1}function Ee(e,t,n){for(var i=0,r=0,o=e.children;r<o.length;){if("none"!==o[r].style.display&&o[r]!==p&&o[r]!==X&&xe(o[r],n.draggable,e,!1)){if(i===t)return o[r];i++}r++}return null}function Ne(e){for(var t=e.lastElementChild;t&&(t===p||"none"===Se(t,"display"));)t=t.previousElementSibling;return t||null}function Oe(e){return ze(X)<ze(e)?1:-1}function Fe(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,i=0;n--;)i+=t.charCodeAt(n);return i.toString(36)}function ze(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)"TEMPLATE"===e.nodeName.toUpperCase()||e===g||t&&!Pe(e,t)||n++;return n}function Pe(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function e(n,i){return function(){if(!s){var e=arguments,t=this;s=ce(function(){1===e.length?n.call(t,e[0]):n.apply(t,e),s=void 0},i)}}}function Ie(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function He(e){return n&&n.dom?n.dom(e).cloneNode(!0):t?t(e).clone(!0)[0]:e.cloneNode(!0)}function We(e){return ce(e,0)}function _e(e){return clearTimeout(e)}function Be(e,t,n,i){if(e.getBoundingClientRect||e===w){var r,o,s,a,l,u,c;if(c=e!==w&&e!==fe()?(o=(r=e.getBoundingClientRect()).top,s=r.left,a=r.bottom,l=r.right,u=r.height,r.width):(s=o=0,a=window.innerHeight,l=window.innerWidth,u=window.innerHeight,window.innerWidth),i&&e!==w&&(n=n||e.parentNode,!k))do{if(n&&n.getBoundingClientRect&&"none"!==Se(n,"transform")){var h=n.getBoundingClientRect();o-=h.top+C(Se(n,"border-top-width")),s-=h.left+C(Se(n,"border-left-width")),a=o+r.height,l=s+r.width;break}}while(n=n.parentNode);if(t&&e!==w){var d=ke(n||e),f=d&&d.a,p=d&&d.d;d&&(a=(o/=p)+(u/=p),l=(s/=f)+(c/=f))}return{top:o,left:s,bottom:a,right:l,width:c,height:u}}}function Re(e,t){for(var n=N(e,!0),i=Be(e)[t];n;){var r=Be(n)[t];if(!("top"===t||"left"===t?r<=i:i<=r))return n;if(n===fe())break;n=N(n,!1)}return!1}function je(e){var t=0,n=0,i=fe();if(e)do{var r=ke(e),o=r.a,s=r.d;t+=e.scrollLeft*o,n+=e.scrollTop*s}while(e!==i&&(e=e.parentNode));return[t,n]}return ue.addEventListener("click",function(e){if(oe)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),oe=!1},!0),ye.prototype={constructor:ye,_computeIsAligned:function(e){var t;if(p&&!W?(d(),t=ue.elementFromPoint(e.clientX,e.clientY),f()):t=e.target,t=xe(t,this.options.draggable,this.el,!1),!_&&X&&X.parentNode===this.el){for(var n,i,r,o,s,a,l,u,c=this.el.children,h=0;h<c.length;h++)xe(c[h],this.options.draggable,this.el,!1)&&c[h]!==t&&(c[h].sortableMouseAligned=(n=e.clientX,i=e.clientY,r=c[h],o=this._getDirection(e,null),this.options,s=Be(r),a="vertical"===o?s.left:s.top,l="vertical"===o?s.right:s.bottom,a<(u="vertical"===o?n:i)&&u<l));xe(t,this.options.draggable,this.el,!0)||(ee=null),_=!0,ce(function(){_=!1},30)}},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,X):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t,n,i=this,r=this.el,o=this.options,s=o.preventOnFilter,a=e.type,l=e.touches&&e.touches[0],u=(l||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||u,h=o.filter;if(function(e){j.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var i=t[n];i.checked&&j.push(i)}}(r),!X&&!(/mousedown|pointerdown/.test(a)&&0!==e.button||o.disabled||c.isContentEditable||(u=xe(u,o.draggable,r,!1),m===u))){if(t=ze(u),n=ze(u,o.draggable),"function"==typeof h){if(h.call(this,e,u,this))return Me(i,c,"filter",u,r,r,t,void 0,n),void(s&&e.cancelable&&e.preventDefault())}else if(h&&(h=h.split(",").some(function(e){if(e=xe(c,e.trim(),r,!1))return Me(i,e,"filter",u,r,r,t,void 0,n),!0})))return void(s&&e.cancelable&&e.preventDefault());o.handle&&!xe(c,o.handle,r,!1)||this._prepareDragStart(e,l,u,t,n)}}},_handleAutoScroll:function(t,n){if(X&&this.options.scroll){var i=t.clientX,r=t.clientY,e=ue.elementFromPoint(i,r),o=this;if(n||L||k||T){pe(t,o.options,e,n);var s=N(e,!0);!H||a&&i===l&&r===u||(a&&clearInterval(a),a=setInterval(function(){if(X){var e=N(ue.elementFromPoint(i,r),!0);e!==s&&(s=e,ge(),pe(t,o.options,s,n))}},10),l=i,u=r)}else{if(!o.options.bubbleScroll||N(e,!0)===fe())return void ge();pe(t,o.options,N(e,!1),!1)}}},_prepareDragStart:function(e,t,n,i,r){var o,s=this,a=s.el,l=s.options,u=a.ownerDocument;n&&!X&&n.parentNode===a&&(Y=a,V=(X=n).parentNode,q=X.nextSibling,m=n,Z=l.group,$=i,K=r,v={target:X,clientX:(t||e).clientX,clientY:(t||e).clientY},this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,X.style["will-change"]="all",X.style.transition="",X.style.transform="",o=function(){s._disableDelayedDragEvents(),!M&&s.nativeDraggable&&(X.draggable=!0),s._triggerDragStart(e,t),Me(s,Y,"choose",X,Y,Y,$,void 0,K),Ce(X,l.chosenClass,!0)},l.ignore.split(",").forEach(function(e){Le(X,e.trim(),De)}),be(u,"dragover",ve),be(u,"mousemove",ve),be(u,"touchmove",ve),be(u,"mouseup",s._onDrop),be(u,"touchend",s._onDrop),be(u,"touchcancel",s._onDrop),M&&this.nativeDraggable&&(this.options.touchStartThreshold=4,X.draggable=!0),!l.delay||l.delayOnTouchOnly&&!t||this.nativeDraggable&&(L||k)?o():(be(u,"mouseup",s._disableDelayedDrag),be(u,"touchend",s._disableDelayedDrag),be(u,"touchcancel",s._disableDelayedDrag),be(u,"mousemove",s._delayedDragTouchMoveHandler),be(u,"touchmove",s._delayedDragTouchMoveHandler),l.supportPointer&&be(u,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=ce(o,l.delay)))},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;R(de(t.clientX-this._lastX),de(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){X&&De(X),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;we(e,"mouseup",this._disableDelayedDrag),we(e,"touchend",this._disableDelayedDrag),we(e,"touchcancel",this._disableDelayedDrag),we(e,"mousemove",this._delayedDragTouchMoveHandler),we(e,"touchmove",this._delayedDragTouchMoveHandler),we(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||("touch"==e.pointerType?e:null),!this.nativeDraggable||t?this.options.supportPointer?be(ue,"pointermove",this._onTouchMove):be(ue,t?"touchmove":"mousemove",this._onTouchMove):(be(X,"dragend",this),be(Y,"dragstart",this._onDragStart));try{ue.selection?We(function(){ue.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){if(x=!1,Y&&X){this.nativeDraggable&&(be(ue,"dragover",this._handleAutoScroll),be(ue,"dragover",i));var n=this.options;e||Ce(X,n.dragClass,!1),Ce(X,n.ghostClass,!0),Se(X,"transform",""),ye.active=this,e&&this._appendGhost(),Me(this,Y,"start",X,Y,Y,$,void 0,K,void 0,t)}else this._nulling()},_emulateDragOver:function(e){if(P){if(this._lastX===P.clientX&&this._lastY===P.clientY&&!e)return;this._lastX=P.clientX,this._lastY=P.clientY,d();for(var t=ue.elementFromPoint(P.clientX,P.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(P.clientX,P.clientY))!==n;)n=t;if(n)do{if(n[le]&&n[le]._onDragOver({clientX:P.clientX,clientY:P.clientY,target:t,rootEl:n})&&!this.options.dragoverBubble)break;t=n}while(n=n.parentNode);X.parentNode[le]._computeIsAligned(P),f()}},_onTouchMove:function(e,t){if(v){var n=this.options,i=n.fallbackTolerance,r=n.fallbackOffset,o=e.touches?e.touches[0]:e,s=p&&ke(p),a=p&&s&&s.a,l=p&&s&&s.d,u=D&&y&&je(y),c=(o.clientX-v.clientX+r.x)/(a||1)+(u?u[0]-b[0]:0)/(a||1),h=(o.clientY-v.clientY+r.y)/(l||1)+(u?u[1]-b[1]:0)/(l||1),d=e.touches?"translate3d("+c+"px,"+h+"px,0)":"translate("+c+"px,"+h+"px)";if(!ye.active&&!x){if(i&&B(de(o.clientX-this._lastX),de(o.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}t||this._handleAutoScroll(o,!0),J=!0,P=o,Se(p,"webkitTransform",d),Se(p,"mozTransform",d),Se(p,"msTransform",d),Se(p,"transform",d),e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!p){var e=this.options.fallbackOnBody?ue.body:Y,t=Be(X,!0,e,!D),n=(Se(X),this.options);if(D){for(y=e;"static"===Se(y,"position")&&"none"===Se(y,"transform")&&y!==ue;)y=y.parentNode;if(y!==ue){var i=Be(y,!0);t.top-=i.top,t.left-=i.left}y!==ue.body&&y!==ue.documentElement?(y===ue&&(y=fe()),t.top+=y.scrollTop,t.left+=y.scrollLeft):y=fe(),b=je(y)}Ce(p=X.cloneNode(!0),n.ghostClass,!1),Ce(p,n.fallbackClass,!0),Ce(p,n.dragClass,!0),Se(p,"box-sizing","border-box"),Se(p,"margin",0),Se(p,"top",t.top),Se(p,"left",t.left),Se(p,"width",t.width),Se(p,"height",t.height),Se(p,"opacity","0.8"),Se(p,"position",D?"absolute":"fixed"),Se(p,"zIndex","100000"),Se(p,"pointerEvents","none"),e.appendChild(p)}},_onDragStart:function(e,t){var n=this,i=e.dataTransfer,r=n.options;(g=He(X)).draggable=!1,g.style["will-change"]="",this._hideClone(),Ce(g,n.options.chosenClass,!1),n._cloneId=We(function(){n.options.removeCloneOnHide||Y.insertBefore(g,X),Me(n,Y,"clone",X)}),t||Ce(X,r.dragClass,!0),t?(oe=!0,n._loopId=setInterval(n._emulateDragOver,50)):(we(ue,"mouseup",n._onDrop),we(ue,"touchend",n._onDrop),we(ue,"touchcancel",n._onDrop),i&&(i.effectAllowed="move",r.setData&&r.setData.call(n,i,X)),be(ue,"drop",n),Se(X,"transform","translateZ(0)")),x=!0,n._dragStartId=We(n._dragStarted.bind(n,t,e)),be(ue,"selectstart",n),T&&Se(ue.body,"user-select","none")},_onDragOver:function(t){var n,i,e,r,o,s,a,l,u,c,h,d,f,p,g,m,v,y,x,b,w,C=this.el,S=t.target,k=this.options,L=k.group,M=ye.active,T=Z===L,D=k.sort,A=this;if(!he){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),J=!0,S=xe(S,k.draggable,C,!0),X.contains(t.target)||S.animated)return j(!1);if(S!==X&&(oe=!1),M&&!k.disabled&&(T?D||(e=!Y.contains(X)):Q===this||(this.lastPutMode=Z.checkPull(this,M,X,t))&&L.checkPut(this,M,X,t))){var E=this._getDirection(t,S);if(n=Be(X),e)return this._hideClone(),V=Y,q?Y.insertBefore(X,q):Y.appendChild(X),j(!0);var N=Ne(C);if(N&&(p=t,g=E,m=Be(Ne(C)),v="vertical"===g?p.clientY:p.clientX,y="vertical"===g?p.clientX:p.clientY,x="vertical"===g?m.bottom:m.right,b="vertical"===g?m.left:m.top,w="vertical"===g?m.right:m.bottom,!("vertical"===g?w+10<y||y<=w&&x<v&&b<=y:x<v&&b<y||v<=x&&w+10<y)||N.animated)){if(S&&S!==X&&S.parentNode===C){var O,F=0,z=S.sortableMouseAligned,P=X.parentNode!==C,I="vertical"===E?"top":"left",H=Re(S,"top")||Re(X,"top"),W=H?H.scrollTop:void 0;if(ee!==S&&(ne=null,O=Be(S)[I],se=!1),r=S,o=E,s=X===X&&re||Be(X),a=r===X&&re||Be(r),l="vertical"===o?s.left:s.top,u="vertical"===o?s.right:s.bottom,c="vertical"===o?s.width:s.height,h="vertical"===o?a.left:a.top,d="vertical"===o?a.right:a.bottom,f="vertical"===o?a.width:a.height,ne=(l===h||u===d||l+c/2===h+f/2)&&z||P||H||k.invertSwap||"insert"===ne||"swap"===ne?("swap"!==ne&&(ae=k.invertSwap||P),F=function(e,t,n,i,r,o,s){var a=Be(t),l="vertical"===n?e.clientY:e.clientX,u="vertical"===n?a.height:a.width,c="vertical"===n?a.top:a.left,h="vertical"===n?a.bottom:a.right,d=Be(X),f=!1;if(!o)if(s&&ie<u*i){if(!se&&(1===te?c+u*r/2<l:l<h-u*r/2)&&(se=!0),se)f=!0;else if("vertical"===n?d.top:d.left,"vertical"===n?d.bottom:d.right,1===te?l<c+ie:h-ie<l)return-1*te}else if(c+u*(1-i)/2<l&&l<h-u*(1-i)/2)return Oe(t);return(f=f||o)&&(l<c+u*r/2||h-u*r/2<l)?c+u/2<l?1:-1:0}(t,S,E,k.swapThreshold,null==k.invertedSwapThreshold?k.swapThreshold:k.invertedSwapThreshold,ae,ee===S),"swap"):(F=Oe(S),"insert"),0===F)return j(!1);re=null,te=F,i=Be(ee=S);var _=S.nextElementSibling,B=!1,R=Te(Y,C,X,n,S,i,t,B=1===F);if(!1!==R)return 1!==R&&-1!==R||(B=1===R),he=!0,ce(Ae,30),T?M._hideClone():M._showClone(this),B&&!_?C.appendChild(X):S.parentNode.insertBefore(X,B?_:S),H&&G(H,0,W-H.scrollTop),V=X.parentNode,void 0===O||ae||(ie=de(O-Be(S)[I])),U(),j(!0)}}else if(N&&C===t.target&&(S=N),S&&(i=Be(S)),T?M._hideClone():M._showClone(this),!1!==Te(Y,C,X,n,S,i,t,!!S))return C.appendChild(X),V=C,re=null,U(),j(!0);if(C.contains(X))return j(!1)}return!1}function j(e){return e&&(T?M._hideClone():M._showClone(A),M&&(Ce(X,Q?Q.options.ghostClass:M.options.ghostClass,!1),Ce(X,k.ghostClass,!0)),Q!==A&&A!==ye.active?Q=A:A===ye.active&&(Q=null),n&&A._animate(n,X),S&&i&&A._animate(i,S)),(S===X&&!X.animated||S===C&&!S.animated)&&(ee=null),k.dragoverBubble||t.rootEl||S===ue||(A._handleAutoScroll(t),X.parentNode[le]._computeIsAligned(t),e||ve(t)),!k.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),!0}function U(){Me(A,Y,"change",S,C,Y,$,ze(X),K,ze(X,k.draggable),t)}},_animate:function(e,t){var n=this.options.animation;if(n){var i=Be(t);if(t===X&&(re=i),1===e.nodeType&&(e=Be(e)),e.left+e.width/2!==i.left+i.width/2||e.top+e.height/2!==i.top+i.height/2){var r=ke(this.el),o=r&&r.a,s=r&&r.d;Se(t,"transition","none"),Se(t,"transform","translate3d("+(e.left-i.left)/(o||1)+"px,"+(e.top-i.top)/(s||1)+"px,0)"),this._repaint(t),Se(t,"transition","transform "+n+"ms"+(this.options.easing?" "+this.options.easing:"")),Se(t,"transform","translate3d(0,0,0)")}"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=ce(function(){Se(t,"transition",""),Se(t,"transform",""),t.animated=!1},n)}},_repaint:function(e){return e.offsetWidth},_offMoveEvents:function(){we(ue,"touchmove",this._onTouchMove),we(ue,"pointermove",this._onTouchMove),we(ue,"dragover",ve),we(ue,"mousemove",ve),we(ue,"touchmove",ve)},_offUpEvents:function(){var e=this.el.ownerDocument;we(e,"mouseup",this._onDrop),we(e,"touchend",this._onDrop),we(e,"pointerup",this._onDrop),we(e,"touchcancel",this._onDrop),we(ue,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;se=ae=H=x=!1,clearInterval(this._loopId),clearInterval(a),ge(),clearTimeout(s),s=void 0,clearTimeout(this._dragStartTimer),_e(this._cloneId),_e(this._dragStartId),we(ue,"mousemove",this._onTouchMove),this.nativeDraggable&&(we(ue,"drop",this),we(t,"dragstart",this._onDragStart),we(ue,"dragover",this._handleAutoScroll),we(ue,"dragover",i)),T&&Se(ue.body,"user-select",""),this._offMoveEvents(),this._offUpEvents(),e&&(J&&(e.cancelable&&e.preventDefault(),n.dropBubble||e.stopPropagation()),p&&p.parentNode&&p.parentNode.removeChild(p),(Y===V||Q&&"clone"!==Q.lastPutMode)&&g&&g.parentNode&&g.parentNode.removeChild(g),X&&(this.nativeDraggable&&we(X,"dragend",this),De(X),X.style["will-change"]="",Ce(X,Q?Q.options.ghostClass:this.options.ghostClass,!1),Ce(X,this.options.chosenClass,!1),Me(this,Y,"unchoose",X,V,Y,$,null,K,null,e),Y!==V?(r=ze(X),o=ze(X,n.draggable),0<=r&&(Me(null,V,"add",X,V,Y,$,r,K,o,e),Me(this,Y,"remove",X,V,Y,$,r,K,o,e),Me(null,V,"sort",X,V,Y,$,r,K,o,e),Me(this,Y,"sort",X,V,Y,$,r,K,o,e)),Q&&Q.save()):X.nextSibling!==q&&(r=ze(X),o=ze(X,n.draggable),0<=r&&(Me(this,Y,"update",X,V,Y,$,r,K,o,e),Me(this,Y,"sort",X,V,Y,$,r,K,o,e))),ye.active&&(null!=r&&-1!==r||(r=$,o=K),Me(this,Y,"end",X,V,Y,$,r,K,o,e),this.save()))),this._nulling()},_nulling:function(){Y=X=V=p=q=g=m=O=F=I.length=a=l=u=v=P=J=r=$=ee=te=re=Q=Z=ye.active=null,j.forEach(function(e){e.checked=!0}),j.length=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":X&&(this._onDragOver(e),(t=e).dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault());break;case"selectstart":e.preventDefault()}var t},toArray:function(){for(var e,t=[],n=this.el.children,i=0,r=n.length,o=this.options;i<r;i++)xe(e=n[i],o.draggable,this.el,!1)&&t.push(e.getAttribute(o.dataIdAttr)||Fe(e));return t},sort:function(e){var i={},r=this.el;this.toArray().forEach(function(e,t){var n=r.children[t];xe(n,this.options.draggable,r,!1)&&(i[e]=n)},this),e.forEach(function(e){i[e]&&(r.removeChild(i[e]),r.appendChild(i[e]))})},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return xe(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];n[e]=t,"group"===e&&me(n)},destroy:function(){var e=this.el;e[le]=null,we(e,"mousedown",this._onTapStart),we(e,"touchstart",this._onTapStart),we(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(we(e,"dragover",this),we(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),c.splice(c.indexOf(this.el),1),this.el=e=null},_hideClone:function(){g.cloneHidden||(Se(g,"display","none"),g.cloneHidden=!0,g.parentNode&&this.options.removeCloneOnHide&&g.parentNode.removeChild(g))},_showClone:function(e){"clone"===e.lastPutMode?g.cloneHidden&&(Y.contains(X)&&!this.options.group.revertClone?Y.insertBefore(g,X):q?Y.insertBefore(g,q):Y.appendChild(g),this.options.group.revertClone&&this._animate(X,g),Se(g,"display",""),g.cloneHidden=!1):this._hideClone()}},be(ue,"touchmove",function(e){(ye.active||x)&&e.cancelable&&e.preventDefault()}),ye.utils={on:be,off:we,css:Se,find:Le,is:function(e,t){return!!xe(e,t,e,!1)},extend:Ie,throttle:e,closest:xe,toggleClass:Ce,clone:He,index:ze,nextTick:We,cancelNextTick:_e,detectDirection:U,getChild:Ee},ye.create=function(e,t){return new ye(e,t)},ye.version="1.9.0",ye});